!function(){"use strict";function e(){return{restrict:"E",scope:{languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(m.languages,function(e){m.insertNewObject[e]=!1,m.tabs[e]={$isOpen:!1},m.bindings[e]={forms:[]},m.xmlDefinitions[e]=JSON.toXML(m.translations[e])})}function t(){_.each(m.languages,function(e){m.xmlDefinitions[e]=JSON.toXML(m.translations[e])})}function a(){_.each(m.languages,function(e){m.bindings[e].forms=[]})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function o(e,n){var t=e;return _.each(n,function(e){t=t[e]}),t}function l(e,n){if(n=n||[],e.parentNode&&(n=l(e.parentNode,n)),e.previousSibling){var t=1,a=e.previousSibling;do 1==a.nodeType&&a.nodeName==e.nodeName&&t++,a=a.previousSibling;while(a);1==t&&(t=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function r(){_.each(m.languages,function(e){m.tabs[e].$isOpen=m.isAllCollapsed})}function s(e){return _.contains(_.pluck(m.queries,"search"),e)}function u(e){if(s(e))m.queries=_.reject(m.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||m.queries.push({label:n,search:e})}}function c(e,n,a,i){var l=o(e,n.path);l[a]=i,n.value=l,l=null,t()}function p(e,n){var a=o(e,n.path);a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,n.value=a,a=null,_.each(_.without(m.languages,n.lang),function(e){a=o(m.translations[e],n.path),_.has(a,m.newKey)||(a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,_.map(m.bindings[e].forms,function(e){e.value=a}))}),delete m.newKey,delete n.newValue,t()}function f(e,a){_.each(m.languages,function(n){var t;a?(t=o(m.translations[n],e.path),delete t[a]):(t=o(m.translations[n],e.path.slice(0,-1)),delete t[_.last(e.path)]),_.map(m.bindings[n].forms,function(n){n.label==e.label&&(n.value=t)})}),a||(delete m.search,n()),t()}function g(e){e.element.innerHTML=e.value;var n=Defiant.node.toJSON(m.xmlDefinitions[e.lang]);angular.copy(n,m.translations[e.lang])}function d(e){if(delete m.newKey,e)try{e=angular.uppercase(e),_.each(m.languages,function(n){m.bindings[n].forms=[];var t=Defiant.node.selectNodes(m.xmlDefinitions[n],e);_.each(t,function(e,t){var a=Defiant.node.toJSON(e),o=l(e).slice(1),r={lang:n,label:o.join("."),path:o,hasInput:"object"!=typeof e,isFlat:_.all(a,function(e,n){return i(e)}),value:a,element:e};r.hasInput="object"!=typeof a,m.bindings[n].forms.push(r)}),m.hasError=!1})}catch(n){m.hasError=!0,a()}else m.hasError=!1,a()}function h(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onUpdate(e)}function b(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onRemove(e)}var m=this;m.languages=m.languages||[],m.translations=m.translations||{},m.queries=m.queries||[],m.onUpdate=m.onUpdate||angular.noop(),m.onRemove=m.onRemove||angular.noop(),m.tabs={},m.insertNewObject={},m.bindings={},m.xmlDefinitions={},m.hasError=!1,m.isEmpty=_.isEmpty,m.isString=_.isString,m.collapseAll=r,m.isFavourited=s,m.addFavourite=u,m.updateObject=c,m.writeObjectByKey=p,m.deleteObjectByKey=f,m.updateTranslations=g,m.findByKey=d,m.callbackUpdate=h,m.callbackRemove=b,n(),e.$watch(function(){return m.languages},function(e,t){e!=t&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwibGFuZ3VhZ2VzIiwidHJhbnNsYXRpb25zIiwicXVlcmllcyIsIm9uVXBkYXRlIiwib25SZW1vdmUiLCJyZXBsYWNlIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsIlRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0IiwiXyIsImVhY2giLCJ2bSIsImxhbmciLCJpbnNlcnROZXdPYmplY3QiLCJ0YWJzIiwiJGlzT3BlbiIsImJpbmRpbmdzIiwiZm9ybXMiLCJ4bWxEZWZpbml0aW9ucyIsIkpTT04iLCJ0b1hNTCIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwiaXNGbGF0Iiwib2JqZWN0IiwiYWxsIiwidmFsdWUiLCJrZXkiLCJpc1N0cmluZyIsInRyYXZlcnNlT2JqZWN0IiwicGF0aCIsImN1cnIiLCJnZXRQYXRoVG9Ob2RlIiwibm9kZSIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJjb3VudCIsInNpYmxpbmciLCJub2RlVHlwZSIsIm5vZGVOYW1lIiwibmV4dFNpYmxpbmciLCJwdXNoIiwiY29sbGFwc2VBbGwiLCJsYW5ndWFnZSIsImlzQWxsQ29sbGFwc2VkIiwiaXNGYXZvdXJpdGVkIiwicXVlcnkiLCJjb250YWlucyIsInBsdWNrIiwiYWRkRmF2b3VyaXRlIiwicmVqZWN0Iiwic2VhcmNoIiwibGFiZWwiLCJwcm9tcHQiLCJpc0VtcHR5IiwidXBkYXRlT2JqZWN0IiwiZm9ybSIsIndyaXRlT2JqZWN0QnlLZXkiLCJuZXdLZXkiLCJuZXdWYWx1ZSIsIndpdGhvdXQiLCJoYXMiLCJtYXAiLCJkZWxldGVPYmplY3RCeUtleSIsImlucHV0Rm9ybSIsInNsaWNlIiwibGFzdCIsInVwZGF0ZVRyYW5zbGF0aW9ucyIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJ1cGRhdGVkSlNPTiIsIkRlZmlhbnQiLCJ0b0pTT04iLCJhbmd1bGFyIiwiY29weSIsImZpbmRCeUtleSIsInVwcGVyY2FzZSIsIm5vZGVzIiwic2VsZWN0Tm9kZXMiLCJpZHgiLCJub2RlVmFsIiwiam9pbiIsImhhc0lucHV0IiwiaGFzRXJyb3IiLCJlcnIiLCJjYWxsYmFja1VwZGF0ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjYWxsYmFja1JlbW92ZSIsInRoaXMiLCJub29wIiwiJHdhdGNoIiwib3JpZyIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiRpbmplY3QiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0MsWUFTQSxTQUFTQSxLQUNQLE9BQ0VDLFNBQVUsSUFDVkMsT0FDRUMsVUFBVyxJQUNYQyxhQUFjLElBQ2RDLFFBQVMsSUFDVEMsU0FBVSxJQUNWQyxTQUFVLEtBRVpDLFNBQVMsRUFDVEMsWUFBYSw0QkFDYkMsV0FBWSw0QkFDWkMsYUFBYyxTQUNkQyxrQkFBa0IsR0FJdEIsUUFBU0MsR0FBMEJDLEdBdUNqQyxRQUFTQyxLQUNQQyxFQUFFQyxLQUFLQyxFQUFHZixVQUFXLFNBQVVnQixHQUM5QkQsRUFBR0UsZ0JBQWdCRCxJQUFRLEVBQzNCRCxFQUFHRyxLQUFLRixJQUNQRyxTQUFTLEdBRVRKLEVBQUdLLFNBQVNKLElBQ1ZLLFVBRUZOLEVBQUdPLGVBQWVOLEdBQVFPLEtBQUtDLE1BQU1ULEVBQUdkLGFBQWFlLE1BSXpELFFBQVNTLEtBQ1BaLEVBQUVDLEtBQUtDLEVBQUdmLFVBQVcsU0FBVWdCLEdBQzdCRCxFQUFHTyxlQUFlTixHQUFRTyxLQUFLQyxNQUFNVCxFQUFHZCxhQUFhZSxNQUl6RCxRQUFTVSxLQUNQYixFQUFFQyxLQUFLQyxFQUFHZixVQUFXLFNBQVVnQixHQUM3QkQsRUFBR0ssU0FBU0osR0FBTUssV0FJdEIsUUFBU00sR0FBT0MsR0FDZixNQUFPZixHQUFFZ0IsSUFBSUQsRUFBUSxTQUFV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YXRlLWVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyXG5cdCAgLm1vZHVsZSgna2hjaGFuLnRyYW5zbGF0ZS1lZGl0b3InLCBbJ3VpLmJvb3RzdHJhcCcsICdhbmd1bGFyLXRyYW5zbGF0ZS10ZW1wbGF0ZXMnXSlcblx0ICAuZGlyZWN0aXZlKCd0cmFuc2xhdGVFZGl0b3InLCB0cmFuc2xhdGVFZGl0b3IpXG5cdCAgLmNvbnRyb2xsZXIoJ1RyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXInLCBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKTtcblxuXHR0cmFuc2xhdGVFZGl0b3IuJGluamVjdCA9IFtdO1xuXHRUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG5cdGZ1bmN0aW9uIHRyYW5zbGF0ZUVkaXRvcigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgIHNjb3BlOiB7XG5cdCAgICAgIGxhbmd1YWdlczogJz0nLCAgICAgIC8vIGFycmF5IG9mIGFsbG93YWJsZSBsb2NhbGVzXG5cdCAgICAgIHRyYW5zbGF0aW9uczogJz0nLCAgIC8vIGRpY3Rpb25hcnkgb2YgbGFuZ3VhZ2UtdHJhbnNsYXRpb25zXG5cdCAgICAgIHF1ZXJpZXM6ICc9JywgICAgICAgIC8vIHByZWRlZmluZWQgcXVlcmllcyB0byBidWlsZCBidXR0b25zIG9uXG5cdCAgICAgIG9uVXBkYXRlOiAnPScsXHRcdFx0IC8vIGNhbGxiYWNrIG9uIHVwZGF0ZSBvbmVcblx0ICAgICAgb25SZW1vdmU6ICc9J1x0XHRcdFx0IC8vIGNhbGxiYWNrIG9uIHJlbW92ZSBvbmVcblx0ICAgIH0sXG5cdCAgICByZXBsYWNlOiB0cnVlLFxuXHQgICAgdGVtcGxhdGVVcmw6ICd0cmFuc2xhdGUtZWRpdG9yLnRwbC5odG1sJyxcblx0ICAgIGNvbnRyb2xsZXI6ICdUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyJyxcblx0ICAgIGNvbnRyb2xsZXJBczogJ2xvY2FsZScsXG5cdCAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdCAgfTtcblx0fVxuXG5cdGZ1bmN0aW9uIFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cdCAgdmFyIHZtID0gdGhpcztcblxuXHQgIC8vIGZyb20gZGlyZWN0aXZlXG5cdCAgdm0ubGFuZ3VhZ2VzID0gdm0ubGFuZ3VhZ2VzIHx8IFtdO1xuXHQgIHZtLnRyYW5zbGF0aW9ucyA9IHZtLnRyYW5zbGF0aW9ucyB8fCB7fTtcblx0ICB2bS5xdWVyaWVzID0gdm0ucXVlcmllcyB8fCBbXTtcblx0ICB2bS5vblVwZGF0ZSA9IHZtLm9uVXBkYXRlIHx8IGFuZ3VsYXIubm9vcCgpO1xuXHQgIHZtLm9uUmVtb3ZlID0gdm0ub25SZW1vdmUgfHwgYW5ndWxhci5ub29wKCk7XG5cblx0ICAvLyBiaW5kYWJsZSB2YXJpYWJsZXNcblx0ICB2bS50YWJzID0ge307XG5cdCAgdm0uaW5zZXJ0TmV3T2JqZWN0ID0ge307XG5cdCAgdm0uYmluZGluZ3MgPSB7fTsgICAgICAgIC8vIHN0b3JlcyByZXN1bHRzIG9mIHhQYXRoIHF1ZXJ5XG5cdCAgdm0ueG1sRGVmaW5pdGlvbnMgPSB7fTsgIC8vIHhtbCBlcXVpdmFsZW50cyBvZiB0cmFuc2xhdGlvbiBqc29uc1xuXHQgIHZtLmhhc0Vycm9yID0gZmFsc2U7ICAgICAvLyBib29sZWFuIGRldGVybWluaW5nIHdoZXRoZXIgdGhlcmUgd2FzIGEgcXVlcnkgZXJyb3JcblxuXHQgIC8vIGJpbmRhYmxlIG1ldGhvZHNcblx0ICB2bS5pc0VtcHR5ID0gXy5pc0VtcHR5O1xuXHQgIHZtLmlzU3RyaW5nID0gXy5pc1N0cmluZztcblx0ICB2bS5jb2xsYXBzZUFsbCA9IGNvbGxhcHNlQWxsO1xuXHQgIHZtLmlzRmF2b3VyaXRlZCA9IGlzRmF2b3VyaXRlZDtcblx0ICB2bS5hZGRGYXZvdXJpdGUgPSBhZGRGYXZvdXJpdGU7XG5cdCAgdm0udXBkYXRlT2JqZWN0ID0gdXBkYXRlT2JqZWN0O1xuXHQgIHZtLndyaXRlT2JqZWN0QnlLZXkgPSB3cml0ZU9iamVjdEJ5S2V5O1xuXHQgIHZtLmRlbGV0ZU9iamVjdEJ5S2V5ID0gZGVsZXRlT2JqZWN0QnlLZXk7XG5cdCAgdm0udXBkYXRlVHJhbnNsYXRpb25zID0gdXBkYXRlVHJhbnNsYXRpb25zO1xuXHQgIHZtLmZpbmRCeUtleSA9IGZpbmRCeUtleTtcblx0ICB2bS5jYWxsYmFja1VwZGF0ZSA9IGNhbGxiYWNrVXBkYXRlO1xuXHQgIHZtLmNhbGxiYWNrUmVtb3ZlID0gY2FsbGJhY2tSZW1vdmU7XG5cblx0ICBpbml0KCk7XG5cblx0ICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblx0ICAvKipcblx0ICAgKiBQcml2YXRlIE1ldGhvZHNcblx0ICAgKi9cblxuXHQgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgXHR2bS5pbnNlcnROZXdPYmplY3RbbGFuZ10gPSBmYWxzZTtcblx0ICAgIFx0dm0udGFic1tsYW5nXSA9IHtcblx0ICAgIFx0XHQkaXNPcGVuOiBmYWxzZVxuXHQgICAgXHR9O1xuXHQgICAgICB2bS5iaW5kaW5nc1tsYW5nXSA9IHtcblx0ICAgICAgICBmb3JtczogW11cblx0ICAgICAgfTtcblx0ICAgICAgdm0ueG1sRGVmaW5pdGlvbnNbbGFuZ10gPSBKU09OLnRvWE1MKHZtLnRyYW5zbGF0aW9uc1tsYW5nXSk7XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBzeW5jSnNvblRvWE1MKCkge1xuXHQgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmcpIHtcblx0ICAgICAgdm0ueG1sRGVmaW5pdGlvbnNbbGFuZ10gPSBKU09OLnRvWE1MKHZtLnRyYW5zbGF0aW9uc1tsYW5nXSk7XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBjbGVhckJpbmRpbmdzKCkge1xuXHQgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmcpIHtcblx0ICAgICAgdm0uYmluZGluZ3NbbGFuZ10uZm9ybXMgPSBbXTtcblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGlzRmxhdChvYmplY3QpIHtcblx0ICBcdHJldHVybiBfLmFsbChvYmplY3QsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiBfLmlzU3RyaW5nKHZhbHVlKTtcbiAgICAgIH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHRyYXZlcnNlT2JqZWN0KG9iamVjdCwgcGF0aCkge1xuXHQgICAgdmFyIGN1cnIgPSBvYmplY3Q7XG5cdCAgICBfLmVhY2gocGF0aCwgZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBjdXJyID0gY3VycltrZXldO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gY3Vycjtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBnZXRQYXRoVG9Ob2RlKG5vZGUsIHBhdGgpIHtcblx0ICAgIHBhdGggPSBwYXRoIHx8IFtdO1xuXHQgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuXHQgICAgICBwYXRoID0gZ2V0UGF0aFRvTm9kZShub2RlLnBhcmVudE5vZGUsIHBhdGgpO1xuXHQgICAgfVxuXG5cdCAgICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcpIHtcblx0ICAgICAgdmFyIGNvdW50ID0gMTtcblx0ICAgICAgdmFyIHNpYmxpbmcgPSBub2RlLnByZXZpb3VzU2libGluZztcblx0ICAgICAgZG8ge1xuXHQgICAgICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlID09IDEgJiYgc2libGluZy5ub2RlTmFtZSA9PSBub2RlLm5vZGVOYW1lKSB7IGNvdW50Kys7IH1cblx0ICAgICAgICBzaWJsaW5nID0gc2libGluZy5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAgIH0gd2hpbGUoc2libGluZyk7XG5cdCAgICAgIGlmIChjb3VudCA9PSAxKSB7IGNvdW50ID0gbnVsbDsgfVxuXHQgICAgfSBlbHNlIGlmKG5vZGUubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdmFyIG5leHRTaWJsaW5nID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgICAgZG8ge1xuXHQgICAgICAgIGlmIChuZXh0U2libGluZy5ub2RlVHlwZSA9PSAxICYmIG5leHRTaWJsaW5nLm5vZGVOYW1lID09IG5vZGUubm9kZU5hbWUpIHtcblx0ICAgICAgICAgIG5leHRTaWJsaW5nID0gbnVsbDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IHdoaWxlKG5leHRTaWJsaW5nKTtcblx0ICAgIH1cblxuXHQgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuXHQgICAgICBwYXRoLnB1c2gobm9kZS5ub2RlTmFtZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcGF0aDtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBQdWJsaWMgTWV0aG9kc1xuXHQgICAqL1xuXG5cdCAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcblx0ICBcdHJldHVybiB2bS5sYW5ndWFnZXM7XG5cdCAgfSwgZnVuY3Rpb24gKGN1cnIsIG9yaWcpIHtcblx0ICBcdGlmIChjdXJyICE9IG9yaWcpIHtcblx0ICBcdFx0aW5pdCgpOyAvLyByZS1pbml0aWFsaXplIGJpbmRpbmdzIHdoZW4gbGFuZ3VhZ2VzIGFyZSBhZGRlZC9yZW1vdmVkXG5cdCAgXHR9XG5cdCAgfSwgdHJ1ZSk7XG5cblx0ICBmdW5jdGlvbiBjb2xsYXBzZUFsbCgpIHtcblx0ICBcdF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHRcdFx0XHR2bS50YWJzW2xhbmd1YWdlXS4kaXNPcGVuID0gdm0uaXNBbGxDb2xsYXBzZWQ7XG5cdCAgXHR9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBpc0Zhdm91cml0ZWQocXVlcnkpIHtcblx0ICBcdHJldHVybiBfLmNvbnRhaW5zKF8ucGx1Y2sodm0ucXVlcmllcywgJ3NlYXJjaCcpLCBxdWVyeSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gYWRkRmF2b3VyaXRlKHF1ZXJ5KSB7XG5cdCAgXHRpZiAoaXNGYXZvdXJpdGVkKHF1ZXJ5KSkge1xuXHQgIFx0XHR2bS5xdWVyaWVzID0gXy5yZWplY3Qodm0ucXVlcmllcywgeyBzZWFyY2g6IHF1ZXJ5IH0pO1xuXHQgIFx0fSBlbHNlIHtcblx0ICBcdFx0dmFyIGxhYmVsID0gcHJvbXB0KFwiUGxlYXNlIGVudGVyIGEgbGFiZWw6IFwiLCBxdWVyeSk7XG5cdCAgXHRcdGlmICghXy5pc0VtcHR5KGxhYmVsKSkge1xuXHQgIFx0XHRcdHZtLnF1ZXJpZXMucHVzaCh7XG5cdCAgXHRcdFx0XHRsYWJlbDogbGFiZWwsXG5cdCAgXHRcdFx0XHRzZWFyY2g6IHF1ZXJ5XG5cdCAgXHRcdFx0fSk7XG5cdCAgXHRcdH1cblx0ICBcdH1cblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiB1cGRhdGVPYmplY3Rcblx0ICAgKiBAZGVzY3JpcHRpb24gR2l2ZW4gYSBmbGF0IGpzb24gb2JqZWN0LCB1cGRhdGVzIGFuZCBzeW5jcyBhIHBhcnRpY3VsYXIga2V5L3ZhbHVlIHBhaXJcblx0ICAgKi9cblx0ICBmdW5jdGlvbiB1cGRhdGVPYmplY3Qob2JqZWN0LCBmb3JtLCBrZXksIHZhbHVlKSB7XG5cdCAgICB2YXIgY3VyciA9IHRyYXZlcnNlT2JqZWN0KG9iamVjdCwgZm9ybS5wYXRoKTtcblx0ICAgIGN1cnJba2V5XSA9IHZhbHVlO1xuXHQgICAgZm9ybS52YWx1ZSA9IGN1cnI7XG5cdCAgICBjdXJyID0gbnVsbDtcblxuXHQgICAgLy8gc3luYyBjaGFuZ2VkIGpzb24gYmFjayB0byB4bWwgbW9kZWxcblx0ICAgIHN5bmNKc29uVG9YTUwoKTtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiB3cml0ZU9iamVjdEJ5S2V5XG5cdCAgICogQGRlc2NyaXB0aW9uIFdyaXRlcyBhIG5ldyB2YWx1ZSB0byBhbiBvYmplY3QgYnkgdHJhdmVyc2luZyBkb3duIHRocm91Z2ggYSBwYXRoXG5cdCAgICogICAgICAgICAgICAgIHRoZW4gd3JpdGVzIGEgdmFsdWUgZ2l2ZW4gYSBrZXlcblx0ICAgKi9cblx0ICBmdW5jdGlvbiB3cml0ZU9iamVjdEJ5S2V5KG9iamVjdCwgZm9ybSkge1xuXHQgICAgLy8gdXBkYXRlIGZvciBmb3JtIGluIGN1cnJlbnQgbGFuZ3VhZ2Vcblx0ICAgIHZhciBjdXJyID0gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBmb3JtLnBhdGgpO1xuXHQgICAgLy8gc2V0IG5ldyBrZXkgdmFsdWVcblx0ICAgIGN1cnJbdm0ubmV3S2V5XSA9ICh2bS5pbnNlcnROZXdPYmplY3RbZm9ybS5sYW5nXSkgPyB7fSA6IGZvcm0ubmV3VmFsdWU7XG5cdCAgICAvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdCAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgIGN1cnIgPSBudWxsO1xuXG5cdCAgICAvLyBjaGVjayBvdGhlciBsYW5ndWFnZXMgZm9yIGtleSBhbmQgZmlsbCB3aXRoIHZhbHVlIGlmIG5vdCBleGlzdHNcblx0ICAgIF8uZWFjaChfLndpdGhvdXQodm0ubGFuZ3VhZ2VzLCBmb3JtLmxhbmcpLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcblx0ICAgICAgY3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGZvcm0ucGF0aCk7XG5cdCAgICAgIGlmICghXy5oYXMoY3Vyciwgdm0ubmV3S2V5KSkge1xuXHQgICAgICAgIGN1cnJbdm0ubmV3S2V5XSA9ICh2bS5pbnNlcnROZXdPYmplY3RbZm9ybS5sYW5nXSkgPyB7fSA6IGZvcm0ubmV3VmFsdWU7XG5cdCAgICAgICAgXy5tYXAodm0uYmluZGluZ3NbbGFuZ3VhZ2VdLmZvcm1zLCBmdW5jdGlvbiAoZm9ybSkge1xuXHQgICAgICAgICAgLy8gdXBkYXRlIGpzb24gaW4gcHJldmlld1xuXHQgICAgICAgICAgZm9ybS52YWx1ZSA9IGN1cnI7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICAvLyBjbGVhciBpbnB1dHNcblx0ICAgIGRlbGV0ZSB2bS5uZXdLZXk7XG5cdCAgICBkZWxldGUgZm9ybS5uZXdWYWx1ZTtcblxuXHQgICAgLy8gc3luYyBjaGFuZ2VkIGpzb24gYmFjayB0byB4bWwgbW9kZWxcblx0ICAgIHN5bmNKc29uVG9YTUwoKTtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBkZWxldGVPYmplY3RCeUtleVxuXHQgICAqIEBkZXNjcmlwdGlvbiBEZWxldGVzIGEgdmFsdWUgZ2l2ZW4gYSBrZXkgaW4gYSBmbGF0IGpzb24gb2JqZWN0XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZGVsZXRlT2JqZWN0QnlLZXkoaW5wdXRGb3JtLCBrZXkpIHtcblx0ICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHQgICAgXHR2YXIgY3Vycjtcblx0ICAgIFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0XHRjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgaW5wdXRGb3JtLnBhdGguc2xpY2UoMCwgLTEpKTtcblx0XHQgICAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHRcdCAgICAgIGRlbGV0ZSBjdXJyW18ubGFzdChpbnB1dEZvcm0ucGF0aCldO1xuXHQgICAgXHR9IGVsc2Uge1xuXHRcdCAgICBcdGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBpbnB1dEZvcm0ucGF0aCk7XG5cdFx0ICAgICAgLy8gc2V0IG5ldyBrZXkgdmFsdWVcblx0XHQgICAgICBkZWxldGUgY3VycltrZXldO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0Xy5tYXAodm0uYmluZGluZ3NbbGFuZ3VhZ2VdLmZvcm1zLCBmdW5jdGlvbiAoZm9ybSkge1xuXHQgICAgICBcdGlmIChmb3JtLmxhYmVsID09IGlucHV0Rm9ybS5sYWJlbCkge1xuXHRcdCAgICAgIFx0Ly8gdXBkYXRlIGpzb24gaW4gcHJldmlld1xuXHRcdCAgICAgICAgZm9ybS52YWx1ZSA9IGN1cnI7XG5cdCAgICAgIFx0fVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXG5cdCAgICBpZiAoIWtleSkgeyAvLyBpZiBubyBrZXkgZ2l2ZW4sIHJlbW92aW5nIGVtcHR5IG9iamVjdCBhbmQgcmVzZXRcblx0ICAgIFx0ZGVsZXRlIHZtLnNlYXJjaDtcblx0ICAgIFx0aW5pdCgpO1xuXHQgICAgfVxuXG5cdCAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHQgICAgc3luY0pzb25Ub1hNTCgpO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHVwZGF0ZVRyYW5zbGF0aW9ucyhmb3JtKSB7XG5cdCAgICBmb3JtLmVsZW1lbnQuaW5uZXJIVE1MID0gZm9ybS52YWx1ZTtcblx0ICAgIHZhciB1cGRhdGVkSlNPTiA9IERlZmlhbnQubm9kZS50b0pTT04odm0ueG1sRGVmaW5pdGlvbnNbZm9ybS5sYW5nXSk7XG5cdCAgICBhbmd1bGFyLmNvcHkodXBkYXRlZEpTT04sIHZtLnRyYW5zbGF0aW9uc1tmb3JtLmxhbmddKTtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBmaW5kQnlLZXlcblx0ICAgKiBAZGVzY3JpcHRpb24gTWFpbiBxdWVyeSBmdW5jdGlvbiBmb3IgZXZhbHVhdGluZyB4UGF0aCBxdWVyaWVzIGFnYWluc3Rcblx0ICAgKiAgICAgICAgICAgICAgSlNPTiB0cmFuc2xhdGlvbiBvYmplY3RzLlxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGZpbmRCeUtleShxdWVyeSkge1xuXHQgICAgZGVsZXRlIHZtLm5ld0tleTtcblx0ICAgIGlmICghcXVlcnkpIHtcblx0ICAgICAgdm0uaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgY2xlYXJCaW5kaW5ncygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBxdWVyeSA9IGFuZ3VsYXIudXBwZXJjYXNlKHF1ZXJ5KTtcblx0ICAgICAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgICAgICAgdm0uYmluZGluZ3NbbGFuZ10uZm9ybXMgPSBbXTtcblx0ICAgICAgICAgIHZhciBub2RlcyA9IERlZmlhbnQubm9kZS5zZWxlY3ROb2Rlcyh2bS54bWxEZWZpbml0aW9uc1tsYW5nXSwgcXVlcnkpO1xuXHQgICAgICAgICAgXy5lYWNoKG5vZGVzLCBmdW5jdGlvbiAobm9kZSwgaWR4KSB7XG5cdCAgICAgICAgICAgIHZhciBub2RlVmFsID0gRGVmaWFudC5ub2RlLnRvSlNPTihub2RlKTtcblx0ICAgICAgICAgICAgdmFyIHBhdGggPSBnZXRQYXRoVG9Ob2RlKG5vZGUpLnNsaWNlKDEpO1xuXHQgICAgICAgICAgICB2YXIgZm9ybSA9IHtcblx0ICAgICAgICAgICAgICBsYW5nOiBsYW5nLFxuXHQgICAgICAgICAgICAgIGxhYmVsOiBwYXRoLmpvaW4oXCIuXCIpLFxuXHQgICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgICAgICAgaGFzSW5wdXQ6ICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpLFxuXHQgICAgICAgICAgICAgIGlzRmxhdDogXy5hbGwobm9kZVZhbCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc0ZsYXQodmFsdWUpO1xuXHQgICAgICAgICAgICAgIH0pLFxuXHQgICAgICAgICAgICAgIHZhbHVlOiBub2RlVmFsLFxuXHQgICAgICAgICAgICAgIGVsZW1lbnQ6IG5vZGVcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgLy8gb25seSBhbGxvdyBub24gYXJyYXkvb2JqZWN0cyB0byBiZSBlZGl0YWJsZVxuXHQgICAgICAgICAgICBmb3JtLmhhc0lucHV0ID0gKHR5cGVvZiBub2RlVmFsICE9ICdvYmplY3QnKTtcblx0ICAgICAgICAgICAgdm0uYmluZGluZ3NbbGFuZ10uZm9ybXMucHVzaChmb3JtKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdm0uaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBjYXRjaChlcnIpIHsgLy8gcXVlcnkgaW52YWxpZCwgc28gY2xlYXIgYmluZGluZ3Ncblx0ICAgICAgICB2bS5oYXNFcnJvciA9IHRydWU7XG5cdCAgICAgICAgY2xlYXJCaW5kaW5ncygpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogY2FsbGJhY2tVcGRhdGVcblx0ICAgKiBAZGVzY3JpcHRpb24gSW52b2tlcyBjYWxsYmFjayBmdW5jdGlvbiB0byB1cGRhdGUgc3BlY2lmaWMgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gY2FsbGJhY2tVcGRhdGUobGFuZ3VhZ2UsIGV2ZW50KSB7XG5cdCAgXHRpZiAoZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdCAgXHRyZXR1cm4gdm0ub25VcGRhdGUobGFuZ3VhZ2UpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGNhbGxiYWNrUmVtb3ZlXG5cdCAgICogQGRlc2NyaXB0aW9uIEludm9rZXMgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVtb3ZlIHNwZWNpZmljIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGNhbGxiYWNrUmVtb3ZlKGxhbmd1YWdlLCBldmVudCkge1xuXHQgIFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHQgIFx0cmV0dXJuIHZtLm9uUmVtb3ZlKGxhbmd1YWdlKTtcblx0ICB9XG5cdH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n						\'glyphicon-star\': !locale.isFavourited(locale.search),\n						\'glyphicon-star-empty\': locale.isFavourited(locale.search)\n					}\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Collapse All</label></div><hr><accordion ng-if=\"!locale.hasError\" close-others=\"false\"><accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-info btn-xs\" ng-click=\"locale.callbackUpdate(language, $event)\">Update</button> <button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></accordion-heading><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><div ng-if=\"form.hasInput\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\"></div><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><div ng-if=\"locale.isString(value)\" class=\"input-group\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\"><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\"> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></accordion-group></accordion></div>");}]);