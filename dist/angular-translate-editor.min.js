!function(){"use strict";function e(){return{restrict:"E",scope:{basePath:"@",languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"=",isValid:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(v.languages,function(e){v.insertNewObject[e]=!1,v.tabs[e]={$isOpen:!1},v.bindings[e]={forms:[]},v.xmlDefinitions[e]=JSON.toXML(v.translations[e])}),_.isEmpty(v.basePath)||(v.search=v.basePath,g(v.basePath)),v.isValid=h()}function a(){_.each(v.languages,function(e){v.xmlDefinitions[e]=JSON.toXML(v.translations[e])})}function t(){_.each(v.languages,function(e){v.bindings[e].forms=[]})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function o(e,n){var a=e;return _.each(n,function(e){a=a[e]}),a}function l(e,n){if(n=n||[],e.parentNode&&(n=l(e.parentNode,n)),e.previousSibling){var a=1,t=e.previousSibling;do 1==t.nodeType&&t.nodeName==e.nodeName&&a++,t=t.previousSibling;while(t);1==a&&(a=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function s(){_.each(v.languages,function(e){v.tabs[e].$isOpen=v.isAllCollapsed})}function r(e){return _.contains(_.pluck(v.queries,"search"),e)}function u(e){if(r(e))v.queries=_.reject(v.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||v.queries.push({label:n,search:e})}}function c(e,n,t,i){var l=o(e,n.path);l[t]=i,n.value=l,l=null,v.isValid=!_.isEmpty(i),a()}function p(e,n){var t=o(e,n.path);t[v.newKey]=v.insertNewObject[n.lang]?{}:n.newValue,n.value=t,t=null,_.each(_.without(v.languages,n.lang),function(e){t=o(v.translations[e],n.path),_.has(t,v.newKey)||(t[v.newKey]=v.insertNewObject[n.lang]?{}:n.newValue,_.map(v.bindings[e].forms,function(e){e.value=t}))}),delete v.newKey,delete n.newValue,a()}function f(e,t){_.each(v.languages,function(n){var a;t?(a=o(v.translations[n],e.path),delete a[t]):(a=o(v.translations[n],e.path.slice(0,-1)),delete a[_.last(e.path)]),_.map(v.bindings[n].forms,function(n){n.label==e.label&&(n.value=a)})}),t||(delete v.search,n()),a()}function d(e){v.isValid=!_.isEmpty(e.value),e.element.innerHTML=e.value;var n=Defiant.node.toJSON(v.xmlDefinitions[e.lang]);angular.copy(n,v.translations[e.lang])}function g(e){if(delete v.newKey,e)try{e=angular.uppercase(e),_.each(v.languages,function(n){v.bindings[n].forms=[];var a=Defiant.node.selectNodes(v.xmlDefinitions[n],e);_.each(a,function(e,a){var t=Defiant.node.toJSON(e),o=l(e).slice(1),s={lang:n,label:o.join("."),path:o,hasInput:"object"!=typeof e,isFlat:_.all(t,function(e,n){return i(e)}),value:t,element:e};s.hasInput="object"!=typeof t,v.bindings[n].forms.push(s)}),v.hasError=!1})}catch(n){v.hasError=!0,t()}else v.hasError=!1,t()}function h(){return _.all(v.languages,function(e){return _.all(v.bindings[e].forms,function(e){return!_.isEmpty(e.value)})})}function b(e,n){return n&&(n.preventDefault(),n.stopPropagation()),v.onUpdate(e)}function m(e,n){return n&&(n.preventDefault(),n.stopPropagation()),v.onRemove(e)}var v=this;v.basePath=v.basePath||"",v.languages=v.languages||[],v.translations=v.translations||{},v.queries=v.queries||[],v.hasUpdateFn=_.isFunction(v.onUpdate),v.hasRemoveFn=_.isFunction(v.onRemove),v.onUpdate=v.onUpdate||angular.noop(),v.onRemove=v.onRemove||angular.noop(),v.isValid=v.isValid||!1,v.tabs={},v.insertNewObject={},v.bindings={},v.xmlDefinitions={},v.hasError=!1,v.isEmpty=_.isEmpty,v.isString=_.isString,v.collapseAll=s,v.isFavourited=r,v.addFavourite=u,v.updateObject=c,v.writeObjectByKey=p,v.deleteObjectByKey=f,v.updateTranslations=d,v.findByKey=g,v.areTranslationsValid=h,v.callbackUpdate=b,v.callbackRemove=m,n(),e.$watch(function(){return v.languages},function(e,a){e!=a&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwiYmFzZVBhdGgiLCJsYW5ndWFnZXMiLCJ0cmFuc2xhdGlvbnMiLCJxdWVyaWVzIiwib25VcGRhdGUiLCJvblJlbW92ZSIsImlzVmFsaWQiLCJyZXBsYWNlIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsIlRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0IiwiXyIsImVhY2giLCJ2bSIsImxhbmciLCJpbnNlcnROZXdPYmplY3QiLCJ0YWJzIiwiJGlzT3BlbiIsImJpbmRpbmdzIiwiZm9ybXMiLCJ4bWxEZWZpbml0aW9ucyIsIkpTT04iLCJ0b1hNTCIsImlzRW1wdHkiLCJzZWFyY2giLCJmaW5kQnlLZXkiLCJhcmVUcmFuc2xhdGlvbnNWYWxpZCIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwiaXNGbGF0Iiwib2JqZWN0IiwiYWxsIiwidmFsdWUiLCJrZXkiLCJpc1N0cmluZyIsInRyYXZlcnNlT2JqZWN0IiwicGF0aCIsImN1cnIiLCJnZXRQYXRoVG9Ob2RlIiwibm9kZSIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJjb3VudCIsInNpYmxpbmciLCJub2RlVHlwZSIsIm5vZGVOYW1lIiwibmV4dFNpYmxpbmciLCJwdXNoIiwiY29sbGFwc2VBbGwiLCJsYW5ndWFnZSIsImlzQWxsQ29sbGFwc2VkIiwiaXNGYXZvdXJpdGVkIiwicXVlcnkiLCJjb250YWlucyIsInBsdWNrIiwiYWRkRmF2b3VyaXRlIiwicmVqZWN0IiwibGFiZWwiLCJwcm9tcHQiLCJ1cGRhdGVPYmplY3QiLCJmb3JtIiwid3JpdGVPYmplY3RCeUtleSIsIm5ld0tleSIsIm5ld1ZhbHVlIiwid2l0aG91dCIsImhhcyIsIm1hcCIsImRlbGV0ZU9iamVjdEJ5S2V5IiwiaW5wdXRGb3JtIiwic2xpY2UiLCJsYXN0IiwidXBkYXRlVHJhbnNsYXRpb25zIiwiZWxlbWVudCIsImlubmVySFRNTCIsInVwZGF0ZWRKU09OIiwiRGVmaWFudCIsInRvSlNPTiIsImFuZ3VsYXIiLCJjb3B5IiwidXBwZXJjYXNlIiwibm9kZXMiLCJzZWxlY3ROb2RlcyIsImlkeCIsIm5vZGVWYWwiLCJqb2luIiwiaGFzSW5wdXQiLCJoYXNFcnJvciIsImVyciIsImNhbGxiYWNrVXBkYXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbGxiYWNrUmVtb3ZlIiwidGhpcyIsImhhc1VwZGF0ZUZuIiwiaXNGdW5jdGlvbiIsImhhc1JlbW92ZUZuIiwibm9vcCIsIiR3YXRjaCIsIm9yaWciLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkaW5qZWN0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBU0EsU0FBU0EsS0FDUixPQUNDQyxTQUFVLElBQ1ZDLE9BQ0NDLFNBQVUsSUFDVkMsVUFBVyxJQUNYQyxhQUFjLElBQ2RDLFFBQVMsSUFDVEMsU0FBVSxJQUNWQyxTQUFVLElBQ1ZDLFFBQVMsS0FFVkMsU0FBUyxFQUNUQyxZQUFhLDRCQUNiQyxXQUFZLDRCQUNaQyxhQUFjLFNBQ2RDLGtCQUFrQixHQUlwQixRQUFTQyxHQUEwQkMsR0E0Q2xDLFFBQVNDLEtBQ1JDLEVBQUVDLEtBQUtDLEVBQUdoQixVQUFXLFNBQVVpQixHQUM5QkQsRUFBR0UsZ0JBQWdCRCxJQUFRLEVBQzNCRCxFQUFHRyxLQUFLRixJQUNQRyxTQUFTLEdBRVZKLEVBQUdLLFNBQVNKLElBQ1hLLFVBRUROLEVBQUdPLGVBQWVOLEdBQVFPLEtBQUtDLE1BQU1ULEVBQUdmLGFBQWFnQixNQUVqREgsRUFBRVksUUFBUVYsRUFBR2pCLFlBQ2pCaUIsRUFBR1csT0FBU1gsRUFBR2pCLFNBQ2Y2QixFQUFVWixFQUFHakIsV0FFZGlCLEVBQUdYLFFBQVV3QixJQUdkLFFBQVNDLEtBQ1JoQixF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UUFBVVcsRUFBR1gsVUFBVyxFQUczQlcsRUFBR0csUUFDSEgsRUFBR0UsbUJBQ0hGLEVBQUdLLFlBQ0hMLEVBQUdPLGtCQUNIUCxFQUFHeUUsVUFBVyxFQUdkekUsRUFBR1UsUUFBVVosRUFBRVksUUFDZlYsRUFBR3FCLFNBQVd2QixFQUFFdUIsU0FDaEJyQixFQUFHbUMsWUFBY0EsRUFDakJuQyxFQUFHc0MsYUFBZUEsRUFDbEJ0QyxFQUFHMEMsYUFBZUEsRUFDbEIxQyxFQUFHOEMsYUFBZUEsRUFDbEI5QyxFQUFHZ0QsaUJBQW1CQSxFQUN0QmhELEVBQUdzRCxrQkFBb0JBLEVBQ3ZCdEQsRUFBRzBELG1CQUFxQkEsRUFDeEIxRCxFQUFHWSxVQUFZQSxFQUNmWixFQUFHYSxxQkFBdUJBLEVBQzFCYixFQUFHMkUsZUFBaUJBLEVBQ3BCM0UsRUFBRytFLGVBQWlCQSxFQUVwQmxGLElBdUZBRCxFQUFPeUYsT0FBTyxXQUNiLE1BQU9yRixHQUFHaEIsV0FDUixTQUFVd0MsRUFBTThELEdBQ2Q5RCxHQUFROEQsR0FDWHpGLE1BRUMsR0E3SkptRSxRQUNFdUIsT0FBTywyQkFBNEIsZUFBZ0IsZ0NBQ25EQyxVQUFVLGtCQUFtQjVHLEdBQzdCWSxXQUFXLDRCQUE2QkcsR0FFMUNmLEVBQWdCNkcsV0FDaEI5RixFQUEwQjhGLFNBQVciLCJmaWxlIjoiYW5ndWxhci10cmFuc2xhdGUtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdraGNoYW4udHJhbnNsYXRlLWVkaXRvcicsIFsndWkuYm9vdHN0cmFwJywgJ2FuZ3VsYXItdHJhbnNsYXRlLXRlbXBsYXRlcyddKVxuXHRcdC5kaXJlY3RpdmUoJ3RyYW5zbGF0ZUVkaXRvcicsIHRyYW5zbGF0ZUVkaXRvcilcblx0XHQuY29udHJvbGxlcignVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsIFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIpO1xuXG5cdHRyYW5zbGF0ZUVkaXRvci4kaW5qZWN0ID0gW107XG5cdFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XG5cblx0ZnVuY3Rpb24gdHJhbnNsYXRlRWRpdG9yKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0YmFzZVBhdGg6ICdAJywgICAgICAgLy8gaW5pdGlhbCBiYXNlIHBhdGggdG8gcHJlLWxvYWQgc2VhcmNoXG5cdFx0XHRcdGxhbmd1YWdlczogJz0nLCAgICAgIC8vIGFycmF5IG9mIGFsbG93YWJsZSBsb2NhbGVzXG5cdFx0XHRcdHRyYW5zbGF0aW9uczogJz0nLCAgIC8vIGRpY3Rpb25hcnkgb2YgbGFuZ3VhZ2UtdHJhbnNsYXRpb25zXG5cdFx0XHRcdHF1ZXJpZXM6ICc9JywgICAgICAgIC8vIHByZWRlZmluZWQgcXVlcmllcyB0byBidWlsZCBidXR0b25zIG9uXG5cdFx0XHRcdG9uVXBkYXRlOiAnPScsICAgICAgIC8vIGNhbGxiYWNrIG9uIHVwZGF0ZSBvbmVcblx0XHRcdFx0b25SZW1vdmU6ICc9JywgICAgICAgLy8gY2FsbGJhY2sgb24gcmVtb3ZlIG9uZVxuXHRcdFx0XHRpc1ZhbGlkOiAnPScgICAgICAgICAvLyBib29sZWFuIHZhbGlkaXR5IG9mIHRyYW5zbGF0aW9uIGNoYW5nZXNcblx0XHRcdH0sXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd0cmFuc2xhdGUtZWRpdG9yLnRwbC5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ2xvY2FsZScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdC8vIGZyb20gZGlyZWN0aXZlXG5cdFx0dm0uYmFzZVBhdGggPSB2bS5iYXNlUGF0aCB8fCBcIlwiO1xuXHRcdHZtLmxhbmd1YWdlcyA9IHZtLmxhbmd1YWdlcyB8fCBbXTtcblx0XHR2bS50cmFuc2xhdGlvbnMgPSB2bS50cmFuc2xhdGlvbnMgfHwge307XG5cdFx0dm0ucXVlcmllcyA9IHZtLnF1ZXJpZXMgfHwgW107XG5cdFx0dm0uaGFzVXBkYXRlRm4gPSBfLmlzRnVuY3Rpb24odm0ub25VcGRhdGUpO1xuXHRcdHZtLmhhc1JlbW92ZUZuID0gXy5pc0Z1bmN0aW9uKHZtLm9uUmVtb3ZlKTtcblx0XHR2bS5vblVwZGF0ZSA9IHZtLm9uVXBkYXRlIHx8IGFuZ3VsYXIubm9vcCgpO1xuXHRcdHZtLm9uUmVtb3ZlID0gdm0ub25SZW1vdmUgfHwgYW5ndWxhci5ub29wKCk7XG5cdFx0dm0uaXNWYWxpZCA9IHZtLmlzVmFsaWQgfHwgZmFsc2U7XG5cblx0XHQvLyBiaW5kYWJsZSB2YXJpYWJsZXNcblx0XHR2bS50YWJzID0ge307XG5cdFx0dm0uaW5zZXJ0TmV3T2JqZWN0ID0ge307XG5cdFx0dm0uYmluZGluZ3MgPSB7fTsgICAgICAgIC8vIHN0b3JlcyByZXN1bHRzIG9mIHhQYXRoIHF1ZXJ5XG5cdFx0dm0ueG1sRGVmaW5pdGlvbnMgPSB7fTsgIC8vIHhtbCBlcXVpdmFsZW50cyBvZiB0cmFuc2xhdGlvbiBqc29uc1xuXHRcdHZtLmhhc0Vycm9yID0gZmFsc2U7ICAgICAvLyBib29sZWFuIGRldGVybWluaW5nIHdoZXRoZXIgdGhlcmUgd2FzIGEgcXVlcnkgZXJyb3JcblxuXHRcdC8vIGJpbmRhYmxlIG1ldGhvZHNcblx0XHR2bS5pc0VtcHR5ID0gXy5pc0VtcHR5O1xuXHRcdHZtLmlzU3RyaW5nID0gXy5pc1N0cmluZztcblx0XHR2bS5jb2xsYXBzZUFsbCA9IGNvbGxhcHNlQWxsO1xuXHRcdHZtLmlzRmF2b3VyaXRlZCA9IGlzRmF2b3VyaXRlZDtcblx0XHR2bS5hZGRGYXZvdXJpdGUgPSBhZGRGYXZvdXJpdGU7XG5cdFx0dm0udXBkYXRlT2JqZWN0ID0gdXBkYXRlT2JqZWN0O1xuXHRcdHZtLndyaXRlT2JqZWN0QnlLZXkgPSB3cml0ZU9iamVjdEJ5S2V5O1xuXHRcdHZtLmRlbGV0ZU9iamVjdEJ5S2V5ID0gZGVsZXRlT2JqZWN0QnlLZXk7XG5cdFx0dm0udXBkYXRlVHJhbnNsYXRpb25zID0gdXBkYXRlVHJhbnNsYXRpb25zO1xuXHRcdHZtLmZpbmRCeUtleSA9IGZpbmRCeUtleTtcblx0XHR2bS5hcmVUcmFuc2xhdGlvbnNWYWxpZCA9IGFyZVRyYW5zbGF0aW9uc1ZhbGlkO1xuXHRcdHZtLmNhbGxiYWNrVXBkYXRlID0gY2FsbGJhY2tVcGRhdGU7XG5cdFx0dm0uY2FsbGJhY2tSZW1vdmUgPSBjYWxsYmFja1JlbW92ZTtcblxuXHRcdGluaXQoKTtcblxuXHRcdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXHRcdC8qKlxuXHRcdCAqIFByaXZhdGUgTWV0aG9kc1xuXHRcdCAqL1xuXG5cdFx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdFx0XHRcdHZtLmluc2VydE5ld09iamVjdFtsYW5nXSA9IGZhbHNlO1xuXHRcdFx0XHR2bS50YWJzW2xhbmddID0ge1xuXHRcdFx0XHRcdCRpc09wZW46IGZhbHNlXG5cdFx0XHRcdH07XG5cdFx0XHRcdHZtLmJpbmRpbmdzW2xhbmddID0ge1xuXHRcdFx0XHRcdGZvcm1zOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFfLmlzRW1wdHkodm0uYmFzZVBhdGgpKSB7XG5cdFx0XHRcdHZtLnNlYXJjaCA9IHZtLmJhc2VQYXRoO1xuXHRcdFx0XHRmaW5kQnlLZXkodm0uYmFzZVBhdGgpO1xuXHRcdFx0fVxuXHRcdFx0dm0uaXNWYWxpZCA9IGFyZVRyYW5zbGF0aW9uc1ZhbGlkKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc3luY0pzb25Ub1hNTCgpIHtcblx0XHRcdF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdFx0XHRcdHZtLnhtbERlZmluaXRpb25zW2xhbmddID0gSlNPTi50b1hNTCh2bS50cmFuc2xhdGlvbnNbbGFuZ10pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2xlYXJCaW5kaW5ncygpIHtcblx0XHRcdF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdFx0XHRcdHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zID0gW107XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc0ZsYXQob2JqZWN0KSB7XG5cdFx0XHRyZXR1cm4gXy5hbGwob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHRcdFx0XHRyZXR1cm4gXy5pc1N0cmluZyh2YWx1ZSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0cmF2ZXJzZU9iamVjdChvYmplY3QsIHBhdGgpIHtcblx0XHRcdHZhciBjdXJyID0gb2JqZWN0O1xuXHRcdFx0Xy5lYWNoKHBhdGgsIGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0Y3VyciA9IGN1cnJba2V5XTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGN1cnI7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0UGF0aFRvTm9kZShub2RlLCBwYXRoKSB7XG5cdFx0XHRwYXRoID0gcGF0aCB8fCBbXTtcblx0XHRcdGlmIChub2RlLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0cGF0aCA9IGdldFBhdGhUb05vZGUobm9kZS5wYXJlbnROb2RlLCBwYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKSB7XG5cdFx0XHRcdHZhciBjb3VudCA9IDE7XG5cdFx0XHRcdHZhciBzaWJsaW5nID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoc2libGluZy5ub2RlVHlwZSA9PSAxICYmIHNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZSkgeyBjb3VudCsrOyB9XG5cdFx0XHRcdFx0c2libGluZyA9IHNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuXHRcdFx0XHR9IHdoaWxlKHNpYmxpbmcpO1xuXHRcdFx0XHRpZiAoY291bnQgPT0gMSkgeyBjb3VudCA9IG51bGw7IH1cblx0XHRcdH0gZWxzZSBpZihub2RlLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdHZhciBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAobmV4dFNpYmxpbmcubm9kZVR5cGUgPT0gMSAmJiBuZXh0U2libGluZy5ub2RlTmFtZSA9PSBub2RlLm5vZGVOYW1lKSB7XG5cdFx0XHRcdFx0XHRuZXh0U2libGluZyA9IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZShuZXh0U2libGluZyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcblx0XHRcdFx0cGF0aC5wdXNoKG5vZGUubm9kZU5hbWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHBhdGg7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUHVibGljIE1ldGhvZHNcblx0XHQgKi9cblxuXHRcdCRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdm0ubGFuZ3VhZ2VzO1xuXHRcdH0sIGZ1bmN0aW9uIChjdXJyLCBvcmlnKSB7XG5cdFx0XHRpZiAoY3VyciAhPSBvcmlnKSB7XG5cdFx0XHRcdGluaXQoKTsgLy8gcmUtaW5pdGlhbGl6ZSBiaW5kaW5ncyB3aGVuIGxhbmd1YWdlcyBhcmUgYWRkZWQvcmVtb3ZlZFxuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdFx0ZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG5cdFx0XHRfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcblx0XHRcdFx0dm0udGFic1tsYW5ndWFnZV0uJGlzT3BlbiA9IHZtLmlzQWxsQ29sbGFwc2VkO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNGYXZvdXJpdGVkKHF1ZXJ5KSB7XG5cdFx0XHRyZXR1cm4gXy5jb250YWlucyhfLnBsdWNrKHZtLnF1ZXJpZXMsICdzZWFyY2gnKSwgcXVlcnkpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFkZEZhdm91cml0ZShxdWVyeSkge1xuXHRcdFx0aWYgKGlzRmF2b3VyaXRlZChxdWVyeSkpIHtcblx0XHRcdFx0dm0ucXVlcmllcyA9IF8ucmVqZWN0KHZtLnF1ZXJpZXMsIHsgc2VhcmNoOiBxdWVyeSB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBsYWJlbCA9IHByb21wdChcIlBsZWFzZSBlbnRlciBhIGxhYmVsOiBcIiwgcXVlcnkpO1xuXHRcdFx0XHRpZiAoIV8uaXNFbXB0eShsYWJlbCkpIHtcblx0XHRcdFx0XHR2bS5xdWVyaWVzLnB1c2goe1xuXHRcdFx0XHRcdFx0bGFiZWw6IGxhYmVsLFxuXHRcdFx0XHRcdFx0c2VhcmNoOiBxdWVyeVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogdXBkYXRlT2JqZWN0XG5cdFx0ICogQGRlc2NyaXB0aW9uIEdpdmVuIGEgZmxhdCBqc29uIG9iamVjdCwgdXBkYXRlcyBhbmQgc3luY3MgYSBwYXJ0aWN1bGFyIGtleS92YWx1ZSBwYWlyXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gdXBkYXRlT2JqZWN0KG9iamVjdCwgZm9ybSwga2V5LCB2YWx1ZSkge1xuXHRcdFx0dmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG5cdFx0XHRjdXJyW2tleV0gPSB2YWx1ZTtcblx0XHRcdGZvcm0udmFsdWUgPSBjdXJyO1xuXHRcdFx0Y3VyciA9IG51bGw7XG5cblx0XHRcdC8vIHVwZGF0ZSB2YWxpZGl0eVxuXHRcdFx0dm0uaXNWYWxpZCA9ICFfLmlzRW1wdHkodmFsdWUpO1xuXG5cdFx0XHQvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHRcdFx0c3luY0pzb25Ub1hNTCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIHdyaXRlT2JqZWN0QnlLZXlcblx0XHQgKiBAZGVzY3JpcHRpb24gV3JpdGVzIGEgbmV3IHZhbHVlIHRvIGFuIG9iamVjdCBieSB0cmF2ZXJzaW5nIGRvd24gdGhyb3VnaCBhIHBhdGhcblx0XHQgKiAgICAgICAgICAgICAgdGhlbiB3cml0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHdyaXRlT2JqZWN0QnlLZXkob2JqZWN0LCBmb3JtKSB7XG5cdFx0XHQvLyB1cGRhdGUgZm9yIGZvcm0gaW4gY3VycmVudCBsYW5ndWFnZVxuXHRcdFx0dmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG5cdFx0XHQvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHRcdFx0Y3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0XHRcdC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcblx0XHRcdGZvcm0udmFsdWUgPSBjdXJyO1xuXHRcdFx0Y3VyciA9IG51bGw7XG5cblx0XHRcdC8vIGNoZWNrIG90aGVyIGxhbmd1YWdlcyBmb3Iga2V5IGFuZCBmaWxsIHdpdGggdmFsdWUgaWYgbm90IGV4aXN0c1xuXHRcdFx0Xy5lYWNoKF8ud2l0aG91dCh2bS5sYW5ndWFnZXMsIGZvcm0ubGFuZyksIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHRcdFx0XHRjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgZm9ybS5wYXRoKTtcblx0XHRcdFx0aWYgKCFfLmhhcyhjdXJyLCB2bS5uZXdLZXkpKSB7XG5cdFx0XHRcdFx0Y3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0XHRcdFx0XHRfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdFx0XHRcdFx0XHQvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdFx0XHRcdFx0XHRmb3JtLnZhbHVlID0gY3Vycjtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGNsZWFyIGlucHV0c1xuXHRcdFx0ZGVsZXRlIHZtLm5ld0tleTtcblx0XHRcdGRlbGV0ZSBmb3JtLm5ld1ZhbHVlO1xuXG5cdFx0XHQvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHRcdFx0c3luY0pzb25Ub1hNTCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIGRlbGV0ZU9iamVjdEJ5S2V5XG5cdFx0ICogQGRlc2NyaXB0aW9uIERlbGV0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleSBpbiBhIGZsYXQganNvbiBvYmplY3Rcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWxldGVPYmplY3RCeUtleShpbnB1dEZvcm0sIGtleSkge1xuXHRcdFx0Xy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdFx0XHRcdHZhciBjdXJyO1xuXHRcdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHRcdGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBpbnB1dEZvcm0ucGF0aC5zbGljZSgwLCAtMSkpO1xuXHRcdFx0XHRcdC8vIHNldCBuZXcga2V5IHZhbHVlXG5cdFx0XHRcdFx0ZGVsZXRlIGN1cnJbXy5sYXN0KGlucHV0Rm9ybS5wYXRoKV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGlucHV0Rm9ybS5wYXRoKTtcblx0XHRcdFx0XHQvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHRcdFx0XHRcdGRlbGV0ZSBjdXJyW2tleV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdFx0XHRcdFx0aWYgKGZvcm0ubGFiZWwgPT0gaW5wdXRGb3JtLmxhYmVsKSB7XG5cdFx0XHRcdFx0XHQvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdFx0XHRcdFx0XHRmb3JtLnZhbHVlID0gY3Vycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICgha2V5KSB7IC8vIGlmIG5vIGtleSBnaXZlbiwgcmVtb3ZpbmcgZW1wdHkgb2JqZWN0IGFuZCByZXNldFxuXHRcdFx0XHRkZWxldGUgdm0uc2VhcmNoO1xuXHRcdFx0XHRpbml0KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG5cdFx0XHRzeW5jSnNvblRvWE1MKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVHJhbnNsYXRpb25zKGZvcm0pIHtcblx0XHRcdC8vIHVwZGF0ZSB2YWxpZGl0eVxuXHRcdFx0dm0uaXNWYWxpZCA9ICFfLmlzRW1wdHkoZm9ybS52YWx1ZSk7XG5cdFx0XHRmb3JtLmVsZW1lbnQuaW5uZXJIVE1MID0gZm9ybS52YWx1ZTtcblx0XHRcdHZhciB1cGRhdGVkSlNPTiA9IERlZmlhbnQubm9kZS50b0pTT04odm0ueG1sRGVmaW5pdGlvbnNbZm9ybS5sYW5nXSk7XG5cdFx0XHRhbmd1bGFyLmNvcHkodXBkYXRlZEpTT04sIHZtLnRyYW5zbGF0aW9uc1tmb3JtLmxhbmddKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBmaW5kQnlLZXlcblx0XHQgKiBAZGVzY3JpcHRpb24gTWFpbiBxdWVyeSBmdW5jdGlvbiBmb3IgZXZhbHVhdGluZyB4UGF0aCBxdWVyaWVzIGFnYWluc3Rcblx0XHQgKiAgICAgICAgICAgICAgSlNPTiB0cmFuc2xhdGlvbiBvYmplY3RzLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGZpbmRCeUtleShxdWVyeSkge1xuXHRcdFx0ZGVsZXRlIHZtLm5ld0tleTtcblx0XHRcdGlmICghcXVlcnkpIHtcblx0XHRcdFx0dm0uaGFzRXJyb3IgPSBmYWxzZTtcblx0XHRcdFx0Y2xlYXJCaW5kaW5ncygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRxdWVyeSA9IGFuZ3VsYXIudXBwZXJjYXNlKHF1ZXJ5KTtcblx0XHRcdFx0XHRfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHRcdFx0XHRcdFx0dm0uYmluZGluZ3NbbGFuZ10uZm9ybXMgPSBbXTtcblx0XHRcdFx0XHRcdHZhciBub2RlcyA9IERlZmlhbnQubm9kZS5zZWxlY3ROb2Rlcyh2bS54bWxEZWZpbml0aW9uc1tsYW5nXSwgcXVlcnkpO1xuXHRcdFx0XHRcdFx0Xy5lYWNoKG5vZGVzLCBmdW5jdGlvbiAobm9kZSwgaWR4KSB7XG5cdFx0XHRcdFx0XHRcdHZhciBub2RlVmFsID0gRGVmaWFudC5ub2RlLnRvSlNPTihub2RlKTtcblx0XHRcdFx0XHRcdFx0dmFyIHBhdGggPSBnZXRQYXRoVG9Ob2RlKG5vZGUpLnNsaWNlKDEpO1xuXHRcdFx0XHRcdFx0XHR2YXIgZm9ybSA9IHtcblx0XHRcdFx0XHRcdFx0XHRsYW5nOiBsYW5nLFxuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBwYXRoLmpvaW4oXCIuXCIpLFxuXHRcdFx0XHRcdFx0XHRcdHBhdGg6IHBhdGgsXG5cdFx0XHRcdFx0XHRcdFx0aGFzSW5wdXQ6ICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpLFxuXHRcdFx0XHRcdFx0XHRcdGlzRmxhdDogXy5hbGwobm9kZVZhbCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBpc0ZsYXQodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBub2RlVmFsLFxuXHRcdFx0XHRcdFx0XHRcdGVsZW1lbnQ6IG5vZGVcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Ly8gb25seSBhbGxvdyBub24gYXJyYXkvb2JqZWN0cyB0byBiZSBlZGl0YWJsZVxuXHRcdFx0XHRcdFx0XHRmb3JtLmhhc0lucHV0ID0gKHR5cGVvZiBub2RlVmFsICE9ICdvYmplY3QnKTtcblx0XHRcdFx0XHRcdFx0dm0uYmluZGluZ3NbbGFuZ10uZm9ybXMucHVzaChmb3JtKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0dm0uaGFzRXJyb3IgPSBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBjYXRjaChlcnIpIHsgLy8gcXVlcnkgaW52YWxpZCwgc28gY2xlYXIgYmluZGluZ3Ncblx0XHRcdFx0XHR2bS5oYXNFcnJvciA9IHRydWU7XG5cdFx0XHRcdFx0Y2xlYXJCaW5kaW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogYXJlVHJhbnNsYXRpb25zVmFsaWRcblx0XHQgKiBAZGVzY3JpcHRpb24gUmV0dXJucyB0cnVlIGlmIGZvcm1zIGhhdmUgYWxsIHRoZWlyIHRyYW5zbGF0ZWQgdmFsdWVzIGZpbGxlZCBvdXRcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGFyZVRyYW5zbGF0aW9uc1ZhbGlkKCkge1xuXHRcdFx0cmV0dXJuIF8uYWxsKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdFx0XHRcdHJldHVybiBfLmFsbCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdFx0XHRcdFx0cmV0dXJuICFfLmlzRW1wdHkoZm9ybS52YWx1ZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogY2FsbGJhY2tVcGRhdGVcblx0XHQgKiBAZGVzY3JpcHRpb24gSW52b2tlcyBjYWxsYmFjayBmdW5jdGlvbiB0byB1cGRhdGUgc3BlY2lmaWMgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gY2FsbGJhY2tVcGRhdGUobGFuZ3VhZ2UsIGV2ZW50KSB7XG5cdFx0XHRpZiAoZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdm0ub25VcGRhdGUobGFuZ3VhZ2UpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIGNhbGxiYWNrUmVtb3ZlXG5cdFx0ICogQGRlc2NyaXB0aW9uIEludm9rZXMgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVtb3ZlIHNwZWNpZmljIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGNhbGxiYWNrUmVtb3ZlKGxhbmd1YWdlLCBldmVudCkge1xuXHRcdFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHZtLm9uUmVtb3ZlKGxhbmd1YWdlKTtcblx0XHR9XG5cdH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"row\"><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-disabled=\"!locale.isValid\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n							\'glyphicon-star\': !locale.isFavourited(locale.search),\n							\'glyphicon-star-empty\': locale.isFavourited(locale.search)\n						}\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-disabled=\"!locale.isValid\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Expand All</label></div><hr></div><div class=\"row\"><accordion ng-if=\"!locale.hasError\" close-others=\"false\"><accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-if=\"locale.hasRemoveFn\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></accordion-heading><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><!-- Direct Access to Key --><div ng-if=\"form.hasInput\" ng-class=\"{ \'has-error\': !form.value }\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small></div><!-- Inference of Translation Module --><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><!-- String Fields --><div ng-if=\"locale.isString(value)\" class=\"input-group\" ng-class=\"{ \'has-error\': !form.value }\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><!-- Object Field --><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\" ng-class=\"{ \'has-error\': !form.value }\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></accordion-group></accordion></div></div>");}]);