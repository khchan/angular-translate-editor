!function(){"use strict";function e(){return{restrict:"E",scope:{basePath:"@",languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(m.languages,function(e){m.insertNewObject[e]=!1,m.tabs[e]={$isOpen:!1},m.bindings[e]={forms:[]},m.xmlDefinitions[e]=JSON.toXML(m.translations[e])}),_.isEmpty(m.basePath)||(m.search=m.basePath,d(m.basePath))}function t(){_.each(m.languages,function(e){m.xmlDefinitions[e]=JSON.toXML(m.translations[e])})}function a(){_.each(m.languages,function(e){m.bindings[e].forms=[]})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function o(e,n){var t=e;return _.each(n,function(e){t=t[e]}),t}function l(e,n){if(n=n||[],e.parentNode&&(n=l(e.parentNode,n)),e.previousSibling){var t=1,a=e.previousSibling;do 1==a.nodeType&&a.nodeName==e.nodeName&&t++,a=a.previousSibling;while(a);1==t&&(t=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function r(){_.each(m.languages,function(e){m.tabs[e].$isOpen=m.isAllCollapsed})}function s(e){return _.contains(_.pluck(m.queries,"search"),e)}function u(e){if(s(e))m.queries=_.reject(m.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||m.queries.push({label:n,search:e})}}function c(e,n,a,i){var l=o(e,n.path);l[a]=i,n.value=l,l=null,t()}function p(e,n){var a=o(e,n.path);a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,n.value=a,a=null,_.each(_.without(m.languages,n.lang),function(e){a=o(m.translations[e],n.path),_.has(a,m.newKey)||(a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,_.map(m.bindings[e].forms,function(e){e.value=a}))}),delete m.newKey,delete n.newValue,t()}function f(e,a){_.each(m.languages,function(n){var t;a?(t=o(m.translations[n],e.path),delete t[a]):(t=o(m.translations[n],e.path.slice(0,-1)),delete t[_.last(e.path)]),_.map(m.bindings[n].forms,function(n){n.label==e.label&&(n.value=t)})}),a||(delete m.search,n()),t()}function g(e){e.element.innerHTML=e.value;var n=Defiant.node.toJSON(m.xmlDefinitions[e.lang]);angular.copy(n,m.translations[e.lang])}function d(e){if(delete m.newKey,e)try{e=angular.uppercase(e),_.each(m.languages,function(n){m.bindings[n].forms=[];var t=Defiant.node.selectNodes(m.xmlDefinitions[n],e);_.each(t,function(e,t){var a=Defiant.node.toJSON(e),o=l(e).slice(1),r={lang:n,label:o.join("."),path:o,hasInput:"object"!=typeof e,isFlat:_.all(a,function(e,n){return i(e)}),value:a,element:e};r.hasInput="object"!=typeof a,m.bindings[n].forms.push(r)}),m.hasError=!1})}catch(n){m.hasError=!0,a()}else m.hasError=!1,a()}function h(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onUpdate(e)}function b(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onRemove(e)}var m=this;m.basePath=m.basePath||"",m.languages=m.languages||[],m.translations=m.translations||{},m.queries=m.queries||[],m.onUpdate=m.onUpdate||angular.noop(),m.onRemove=m.onRemove||angular.noop(),m.tabs={},m.insertNewObject={},m.bindings={},m.xmlDefinitions={},m.hasError=!1,m.isEmpty=_.isEmpty,m.isString=_.isString,m.collapseAll=r,m.isFavourited=s,m.addFavourite=u,m.updateObject=c,m.writeObjectByKey=p,m.deleteObjectByKey=f,m.updateTranslations=g,m.findByKey=d,m.callbackUpdate=h,m.callbackRemove=b,n(),e.$watch(function(){return m.languages},function(e,t){e!=t&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwiYmFzZVBhdGgiLCJsYW5ndWFnZXMiLCJ0cmFuc2xhdGlvbnMiLCJxdWVyaWVzIiwib25VcGRhdGUiLCJvblJlbW92ZSIsInJlcGxhY2UiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlciIsIiRzY29wZSIsImluaXQiLCJfIiwiZWFjaCIsInZtIiwibGFuZyIsImluc2VydE5ld09iamVjdCIsInRhYnMiLCIkaXNPcGVuIiwiYmluZGluZ3MiLCJmb3JtcyIsInhtbERlZmluaXRpb25zIiwiSlNPTiIsInRvWE1MIiwiaXNFbXB0eSIsInNlYXJjaCIsImZpbmRCeUtleSIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwiaXNGbGF0Iiwib2JqZWN0IiwiYWxsIiwidmFsdWUiLCJrZXkiLCJpc1N0cmluZyIsInRyYXZlcnNlT2JqZWN0IiwicGF0aCIsImN1cnIiLCJnZXRQYXRoVG9Ob2RlIiwibm9kZSIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJjb3VudCIsInNpYmxpbmciLCJub2RlVHlwZSIsIm5vZGVOYW1lIiwibmV4dFNpYmxpbmciLCJwdXNoIiwiY29sbGFwc2VBbGwiLCJsYW5ndWFnZSIsImlzQWxsQ29sbGFwc2VkIiwiaXNGYXZvdXJpdGVkIiwicXVlcnkiLCJjb250YWlucyIsInBsdWNrIiwiYWRkRmF2b3VyaXRlIiwicmVqZWN0IiwibGFiZWwiLCJwcm9tcHQiLCJ1cGRhdGVPYmplY3QiLCJmb3JtIiwid3JpdGVPYmplY3RCeUtleSIsIm5ld0tleSIsIm5ld1ZhbHVlIiwid2l0aG91dCIsImhhcyIsIm1hcCIsImRlbGV0ZU9iamVjdEJ5S2V5IiwiaW5wdXRGb3JtIiwic2xpY2UiLCJsYXN0IiwidXBkYXRlVHJhbnNsYXRpb25zIiwiZWxlbWVudCIsImlubmVySFRNTCIsInVwZGF0ZWRKU09OIiwiRGVmaWFudCIsInRvSlNPTiIsImFuZ3VsYXIiLCJjb3B5IiwidXBwZXJjYXNlIiwibm9kZXMiLCJzZWxlY3ROb2RlcyIsImlkeCIsIm5vZGVWYWwiLCJqb2luIiwiaGFzSW5wdXQiLCJoYXNFcnJvciIsImVyciIsImNhbGxiYWNrVXBkYXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbGxiYWNrUmVtb3ZlIiwidGhpcyIsIm5vb3AiLCIkd2F0Y2giLCJvcmlnIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwiJGluamVjdCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQyxZQVNBLFNBQVNBLEtBQ1AsT0FDRUMsU0FBVSxJQUNWQyxPQUNDQyxTQUFVLElBQ1RDLFVBQVcsSUFDWEMsYUFBYyxJQUNkQyxRQUFTLElBQ1RDLFNBQVUsSUFDVkMsU0FBVSxLQUVaQyxTQUFTLEVBQ1RDLFlBQWEsNEJBQ2JDLFdBQVksNEJBQ1pDLGFBQWMsU0FDZEMsa0JBQWtCLEdBSXRCLFFBQVNDLEdBQTBCQyxHQXdDakMsUUFBU0MsS0FDUEMsRUFBRUMsS0FBS0MsRUFBR2YsVUFBVyxTQUFVZ0IsR0FDOUJELEVBQUdFLGdCQUFnQkQsSUFBUSxFQUMzQkQsRUFBR0csS0FBS0YsSUFDUEcsU0FBUyxHQUVUSixFQUFHSyxTQUFTSixJQUNWSyxVQUVGTixFQUFHTyxlQUFlTixHQUFRTyxLQUFLQyxNQUFNVCxFQUFHZCxhQUFhZSxNQUVsREgsRUFBRVksUUFBUVYsRUFBR2hCLFlBQ2hCZ0IsRUFBR1csT0FBU1gsRUFBR2hCLFNBQ2Y0QixFQUFVWixFQUFHaEIsV0FJakIsUUFBUzZCLEtBQ1BmLEVBQUVDLEtBQUtDLEVBQUdmLFVBQVcsU0FBVWdCLEdBQzdCRCxFQUFHTyxlQUFlTixHQUFRTyxLQUFLQyxNQUFNVCxFQUFHZCxhQUFhZSxNQUl6RCxRQUFTYSxLQUNQaEIsRUFBRUMsS0FB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a0UsUUFDR29CLE9BQU8sMkJBQTRCLGVBQWdCLGdDQUNuREMsVUFBVSxrQkFBbUJ2RyxHQUM3QlcsV0FBVyw0QkFBNkJHLEdBRTNDZCxFQUFnQndHLFdBQ2hCMUYsRUFBMEIwRixTQUFXIiwiZmlsZSI6ImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyXG5cdCAgLm1vZHVsZSgna2hjaGFuLnRyYW5zbGF0ZS1lZGl0b3InLCBbJ3VpLmJvb3RzdHJhcCcsICdhbmd1bGFyLXRyYW5zbGF0ZS10ZW1wbGF0ZXMnXSlcblx0ICAuZGlyZWN0aXZlKCd0cmFuc2xhdGVFZGl0b3InLCB0cmFuc2xhdGVFZGl0b3IpXG5cdCAgLmNvbnRyb2xsZXIoJ1RyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXInLCBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKTtcblxuXHR0cmFuc2xhdGVFZGl0b3IuJGluamVjdCA9IFtdO1xuXHRUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG5cdGZ1bmN0aW9uIHRyYW5zbGF0ZUVkaXRvcigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgIHNjb3BlOiB7XG5cdCAgICBcdGJhc2VQYXRoOiAnQCcsXHRcdFx0IC8vIGluaXRpYWwgYmFzZSBwYXRoIHRvIHByZS1sb2FkIHNlYXJjaFxuXHQgICAgICBsYW5ndWFnZXM6ICc9JywgICAgICAvLyBhcnJheSBvZiBhbGxvd2FibGUgbG9jYWxlc1xuXHQgICAgICB0cmFuc2xhdGlvbnM6ICc9JywgICAvLyBkaWN0aW9uYXJ5IG9mIGxhbmd1YWdlLXRyYW5zbGF0aW9uc1xuXHQgICAgICBxdWVyaWVzOiAnPScsICAgICAgICAvLyBwcmVkZWZpbmVkIHF1ZXJpZXMgdG8gYnVpbGQgYnV0dG9ucyBvblxuXHQgICAgICBvblVwZGF0ZTogJz0nLFx0XHRcdCAvLyBjYWxsYmFjayBvbiB1cGRhdGUgb25lXG5cdCAgICAgIG9uUmVtb3ZlOiAnPSdcdFx0XHRcdCAvLyBjYWxsYmFjayBvbiByZW1vdmUgb25lXG5cdCAgICB9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZSxcblx0ICAgIHRlbXBsYXRlVXJsOiAndHJhbnNsYXRlLWVkaXRvci50cGwuaHRtbCcsXG5cdCAgICBjb250cm9sbGVyOiAnVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsXG5cdCAgICBjb250cm9sbGVyQXM6ICdsb2NhbGUnLFxuXHQgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHQgIH07XG5cdH1cblxuXHRmdW5jdGlvbiBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKCRzY29wZSkge1xuXHQgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAvLyBmcm9tIGRpcmVjdGl2ZVxuXHQgIHZtLmJhc2VQYXRoID0gdm0uYmFzZVBhdGggfHwgXCJcIjtcblx0ICB2bS5sYW5ndWFnZXMgPSB2bS5sYW5ndWFnZXMgfHwgW107XG5cdCAgdm0udHJhbnNsYXRpb25zID0gdm0udHJhbnNsYXRpb25zIHx8IHt9O1xuXHQgIHZtLnF1ZXJpZXMgPSB2bS5xdWVyaWVzIHx8IFtdO1xuXHQgIHZtLm9uVXBkYXRlID0gdm0ub25VcGRhdGUgfHwgYW5ndWxhci5ub29wKCk7XG5cdCAgdm0ub25SZW1vdmUgPSB2bS5vblJlbW92ZSB8fCBhbmd1bGFyLm5vb3AoKTtcblxuXHQgIC8vIGJpbmRhYmxlIHZhcmlhYmxlc1xuXHQgIHZtLnRhYnMgPSB7fTtcblx0ICB2bS5pbnNlcnROZXdPYmplY3QgPSB7fTtcblx0ICB2bS5iaW5kaW5ncyA9IHt9OyAgICAgICAgLy8gc3RvcmVzIHJlc3VsdHMgb2YgeFBhdGggcXVlcnlcblx0ICB2bS54bWxEZWZpbml0aW9ucyA9IHt9OyAgLy8geG1sIGVxdWl2YWxlbnRzIG9mIHRyYW5zbGF0aW9uIGpzb25zXG5cdCAgdm0uaGFzRXJyb3IgPSBmYWxzZTsgICAgIC8vIGJvb2xlYW4gZGV0ZXJtaW5pbmcgd2hldGhlciB0aGVyZSB3YXMgYSBxdWVyeSBlcnJvclxuXG5cdCAgLy8gYmluZGFibGUgbWV0aG9kc1xuXHQgIHZtLmlzRW1wdHkgPSBfLmlzRW1wdHk7XG5cdCAgdm0uaXNTdHJpbmcgPSBfLmlzU3RyaW5nO1xuXHQgIHZtLmNvbGxhcHNlQWxsID0gY29sbGFwc2VBbGw7XG5cdCAgdm0uaXNGYXZvdXJpdGVkID0gaXNGYXZvdXJpdGVkO1xuXHQgIHZtLmFkZEZhdm91cml0ZSA9IGFkZEZhdm91cml0ZTtcblx0ICB2bS51cGRhdGVPYmplY3QgPSB1cGRhdGVPYmplY3Q7XG5cdCAgdm0ud3JpdGVPYmplY3RCeUtleSA9IHdyaXRlT2JqZWN0QnlLZXk7XG5cdCAgdm0uZGVsZXRlT2JqZWN0QnlLZXkgPSBkZWxldGVPYmplY3RCeUtleTtcblx0ICB2bS51cGRhdGVUcmFuc2xhdGlvbnMgPSB1cGRhdGVUcmFuc2xhdGlvbnM7XG5cdCAgdm0uZmluZEJ5S2V5ID0gZmluZEJ5S2V5O1xuXHQgIHZtLmNhbGxiYWNrVXBkYXRlID0gY2FsbGJhY2tVcGRhdGU7XG5cdCAgdm0uY2FsbGJhY2tSZW1vdmUgPSBjYWxsYmFja1JlbW92ZTtcblxuXHQgIGluaXQoKTtcblxuXHQgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXHQgIC8qKlxuXHQgICAqIFByaXZhdGUgTWV0aG9kc1xuXHQgICAqL1xuXG5cdCAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICBcdHZtLmluc2VydE5ld09iamVjdFtsYW5nXSA9IGZhbHNlO1xuXHQgICAgXHR2bS50YWJzW2xhbmddID0ge1xuXHQgICAgXHRcdCRpc09wZW46IGZhbHNlXG5cdCAgICBcdH07XG5cdCAgICAgIHZtLmJpbmRpbmdzW2xhbmddID0ge1xuXHQgICAgICAgIGZvcm1zOiBbXVxuXHQgICAgICB9O1xuXHQgICAgICB2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcblx0ICAgIH0pO1xuXHQgICAgaWYgKCFfLmlzRW1wdHkodm0uYmFzZVBhdGgpKSB7XG5cdCAgICAgIHZtLnNlYXJjaCA9IHZtLmJhc2VQYXRoO1xuXHQgICAgICBmaW5kQnlLZXkodm0uYmFzZVBhdGgpO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHN5bmNKc29uVG9YTUwoKSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgICB2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGNsZWFyQmluZGluZ3MoKSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3JtcyA9IFtdO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gaXNGbGF0KG9iamVjdCkge1xuXHQgIFx0cmV0dXJuIF8uYWxsKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIF8uaXNTdHJpbmcodmFsdWUpO1xuICAgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBwYXRoKSB7XG5cdCAgICB2YXIgY3VyciA9IG9iamVjdDtcblx0ICAgIF8uZWFjaChwYXRoLCBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIGN1cnIgPSBjdXJyW2tleV07XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBjdXJyO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGdldFBhdGhUb05vZGUobm9kZSwgcGF0aCkge1xuXHQgICAgcGF0aCA9IHBhdGggfHwgW107XG5cdCAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHBhdGggPSBnZXRQYXRoVG9Ob2RlKG5vZGUucGFyZW50Tm9kZSwgcGF0aCk7XG5cdCAgICB9XG5cblx0ICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZykge1xuXHQgICAgICB2YXIgY291bnQgPSAxO1xuXHQgICAgICB2YXIgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgICBkbyB7XG5cdCAgICAgICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT0gMSAmJiBzaWJsaW5nLm5vZGVOYW1lID09IG5vZGUubm9kZU5hbWUpIHsgY291bnQrKzsgfVxuXHQgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzU2libGluZztcblx0ICAgICAgfSB3aGlsZShzaWJsaW5nKTtcblx0ICAgICAgaWYgKGNvdW50ID09IDEpIHsgY291bnQgPSBudWxsOyB9XG5cdCAgICB9IGVsc2UgaWYobm9kZS5uZXh0U2libGluZykge1xuXHQgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgICBkbyB7XG5cdCAgICAgICAgaWYgKG5leHRTaWJsaW5nLm5vZGVUeXBlID09IDEgJiYgbmV4dFNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZSkge1xuXHQgICAgICAgICAgbmV4dFNpYmxpbmcgPSBudWxsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gd2hpbGUobmV4dFNpYmxpbmcpO1xuXHQgICAgfVxuXG5cdCAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG5cdCAgICAgIHBhdGgucHVzaChub2RlLm5vZGVOYW1lKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIFB1YmxpYyBNZXRob2RzXG5cdCAgICovXG5cblx0ICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuXHQgIFx0cmV0dXJuIHZtLmxhbmd1YWdlcztcblx0ICB9LCBmdW5jdGlvbiAoY3Vyciwgb3JpZykge1xuXHQgIFx0aWYgKGN1cnIgIT0gb3JpZykge1xuXHQgIFx0XHRpbml0KCk7IC8vIHJlLWluaXRpYWxpemUgYmluZGluZ3Mgd2hlbiBsYW5ndWFnZXMgYXJlIGFkZGVkL3JlbW92ZWRcblx0ICBcdH1cblx0ICB9LCB0cnVlKTtcblxuXHQgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsKCkge1xuXHQgIFx0Xy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdFx0XHRcdHZtLnRhYnNbbGFuZ3VhZ2VdLiRpc09wZW4gPSB2bS5pc0FsbENvbGxhcHNlZDtcblx0ICBcdH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGlzRmF2b3VyaXRlZChxdWVyeSkge1xuXHQgIFx0cmV0dXJuIF8uY29udGFpbnMoXy5wbHVjayh2bS5xdWVyaWVzLCAnc2VhcmNoJyksIHF1ZXJ5KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBhZGRGYXZvdXJpdGUocXVlcnkpIHtcblx0ICBcdGlmIChpc0Zhdm91cml0ZWQocXVlcnkpKSB7XG5cdCAgXHRcdHZtLnF1ZXJpZXMgPSBfLnJlamVjdCh2bS5xdWVyaWVzLCB7IHNlYXJjaDogcXVlcnkgfSk7XG5cdCAgXHR9IGVsc2Uge1xuXHQgIFx0XHR2YXIgbGFiZWwgPSBwcm9tcHQoXCJQbGVhc2UgZW50ZXIgYSBsYWJlbDogXCIsIHF1ZXJ5KTtcblx0ICBcdFx0aWYgKCFfLmlzRW1wdHkobGFiZWwpKSB7XG5cdCAgXHRcdFx0dm0ucXVlcmllcy5wdXNoKHtcblx0ICBcdFx0XHRcdGxhYmVsOiBsYWJlbCxcblx0ICBcdFx0XHRcdHNlYXJjaDogcXVlcnlcblx0ICBcdFx0XHR9KTtcblx0ICBcdFx0fVxuXHQgIFx0fVxuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIHVwZGF0ZU9iamVjdFxuXHQgICAqIEBkZXNjcmlwdGlvbiBHaXZlbiBhIGZsYXQganNvbiBvYmplY3QsIHVwZGF0ZXMgYW5kIHN5bmNzIGEgcGFydGljdWxhciBrZXkvdmFsdWUgcGFpclxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIHVwZGF0ZU9iamVjdChvYmplY3QsIGZvcm0sIGtleSwgdmFsdWUpIHtcblx0ICAgIHZhciBjdXJyID0gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBmb3JtLnBhdGgpO1xuXHQgICAgY3VycltrZXldID0gdmFsdWU7XG5cdCAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgIGN1cnIgPSBudWxsO1xuXG5cdCAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHQgICAgc3luY0pzb25Ub1hNTCgpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIHdyaXRlT2JqZWN0QnlLZXlcblx0ICAgKiBAZGVzY3JpcHRpb24gV3JpdGVzIGEgbmV3IHZhbHVlIHRvIGFuIG9iamVjdCBieSB0cmF2ZXJzaW5nIGRvd24gdGhyb3VnaCBhIHBhdGhcblx0ICAgKiAgICAgICAgICAgICAgdGhlbiB3cml0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleVxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIHdyaXRlT2JqZWN0QnlLZXkob2JqZWN0LCBmb3JtKSB7XG5cdCAgICAvLyB1cGRhdGUgZm9yIGZvcm0gaW4gY3VycmVudCBsYW5ndWFnZVxuXHQgICAgdmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG5cdCAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHQgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0ICAgIC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcblx0ICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuXHQgICAgY3VyciA9IG51bGw7XG5cblx0ICAgIC8vIGNoZWNrIG90aGVyIGxhbmd1YWdlcyBmb3Iga2V5IGFuZCBmaWxsIHdpdGggdmFsdWUgaWYgbm90IGV4aXN0c1xuXHQgICAgXy5lYWNoKF8ud2l0aG91dCh2bS5sYW5ndWFnZXMsIGZvcm0ubGFuZyksIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHQgICAgICBjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgZm9ybS5wYXRoKTtcblx0ICAgICAgaWYgKCFfLmhhcyhjdXJyLCB2bS5uZXdLZXkpKSB7XG5cdCAgICAgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0ICAgICAgICBfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdCAgICAgICAgICAvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdCAgICAgICAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIC8vIGNsZWFyIGlucHV0c1xuXHQgICAgZGVsZXRlIHZtLm5ld0tleTtcblx0ICAgIGRlbGV0ZSBmb3JtLm5ld1ZhbHVlO1xuXG5cdCAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHQgICAgc3luY0pzb25Ub1hNTCgpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGRlbGV0ZU9iamVjdEJ5S2V5XG5cdCAgICogQGRlc2NyaXB0aW9uIERlbGV0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleSBpbiBhIGZsYXQganNvbiBvYmplY3Rcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBkZWxldGVPYmplY3RCeUtleShpbnB1dEZvcm0sIGtleSkge1xuXHQgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdCAgICBcdHZhciBjdXJyO1xuXHQgICAgXHRpZiAoIWtleSkge1xuXHRcdFx0XHRcdGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBpbnB1dEZvcm0ucGF0aC5zbGljZSgwLCAtMSkpO1xuXHRcdCAgICAgIC8vIHNldCBuZXcga2V5IHZhbHVlXG5cdFx0ICAgICAgZGVsZXRlIGN1cnJbXy5sYXN0KGlucHV0Rm9ybS5wYXRoKV07XG5cdCAgICBcdH0gZWxzZSB7XG5cdFx0ICAgIFx0Y3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGlucHV0Rm9ybS5wYXRoKTtcblx0XHQgICAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHRcdCAgICAgIGRlbGV0ZSBjdXJyW2tleV07XG5cdCAgICBcdH1cblxuXHQgICAgXHRfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdCAgICAgIFx0aWYgKGZvcm0ubGFiZWwgPT0gaW5wdXRGb3JtLmxhYmVsKSB7XG5cdFx0ICAgICAgXHQvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdFx0ICAgICAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgICAgXHR9XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cblx0ICAgIGlmICgha2V5KSB7IC8vIGlmIG5vIGtleSBnaXZlbiwgcmVtb3ZpbmcgZW1wdHkgb2JqZWN0IGFuZCByZXNldFxuXHQgICAgXHRkZWxldGUgdm0uc2VhcmNoO1xuXHQgICAgXHRpbml0KCk7XG5cdCAgICB9XG5cblx0ICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG5cdCAgICBzeW5jSnNvblRvWE1MKCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdXBkYXRlVHJhbnNsYXRpb25zKGZvcm0pIHtcblx0ICAgIGZvcm0uZWxlbWVudC5pbm5lckhUTUwgPSBmb3JtLnZhbHVlO1xuXHQgICAgdmFyIHVwZGF0ZWRKU09OID0gRGVmaWFudC5ub2RlLnRvSlNPTih2bS54bWxEZWZpbml0aW9uc1tmb3JtLmxhbmddKTtcblx0ICAgIGFuZ3VsYXIuY29weSh1cGRhdGVkSlNPTiwgdm0udHJhbnNsYXRpb25zW2Zvcm0ubGFuZ10pO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGZpbmRCeUtleVxuXHQgICAqIEBkZXNjcmlwdGlvbiBNYWluIHF1ZXJ5IGZ1bmN0aW9uIGZvciBldmFsdWF0aW5nIHhQYXRoIHF1ZXJpZXMgYWdhaW5zdFxuXHQgICAqICAgICAgICAgICAgICBKU09OIHRyYW5zbGF0aW9uIG9iamVjdHMuXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZmluZEJ5S2V5KHF1ZXJ5KSB7XG5cdCAgICBkZWxldGUgdm0ubmV3S2V5O1xuXHQgICAgaWYgKCFxdWVyeSkge1xuXHQgICAgICB2bS5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICBjbGVhckJpbmRpbmdzKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHF1ZXJ5ID0gYW5ndWxhci51cHBlcmNhc2UocXVlcnkpO1xuXHQgICAgICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICAgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3JtcyA9IFtdO1xuXHQgICAgICAgICAgdmFyIG5vZGVzID0gRGVmaWFudC5ub2RlLnNlbGVjdE5vZGVzKHZtLnhtbERlZmluaXRpb25zW2xhbmddLCBxdWVyeSk7XG5cdCAgICAgICAgICBfLmVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlLCBpZHgpIHtcblx0ICAgICAgICAgICAgdmFyIG5vZGVWYWwgPSBEZWZpYW50Lm5vZGUudG9KU09OKG5vZGUpO1xuXHQgICAgICAgICAgICB2YXIgcGF0aCA9IGdldFBhdGhUb05vZGUobm9kZSkuc2xpY2UoMSk7XG5cdCAgICAgICAgICAgIHZhciBmb3JtID0ge1xuXHQgICAgICAgICAgICAgIGxhbmc6IGxhbmcsXG5cdCAgICAgICAgICAgICAgbGFiZWw6IHBhdGguam9pbihcIi5cIiksXG5cdCAgICAgICAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICAgICAgICBoYXNJbnB1dDogKHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JyksXG5cdCAgICAgICAgICAgICAgaXNGbGF0OiBfLmFsbChub2RlVmFsLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGlzRmxhdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgICAgdmFsdWU6IG5vZGVWYWwsXG5cdCAgICAgICAgICAgICAgZWxlbWVudDogbm9kZVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAvLyBvbmx5IGFsbG93IG5vbiBhcnJheS9vYmplY3RzIHRvIGJlIGVkaXRhYmxlXG5cdCAgICAgICAgICAgIGZvcm0uaGFzSW5wdXQgPSAodHlwZW9mIG5vZGVWYWwgIT0gJ29iamVjdCcpO1xuXHQgICAgICAgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3Jtcy5wdXNoKGZvcm0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2bS5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGVycikgeyAvLyBxdWVyeSBpbnZhbGlkLCBzbyBjbGVhciBiaW5kaW5nc1xuXHQgICAgICAgIHZtLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICBjbGVhckJpbmRpbmdzKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBjYWxsYmFja1VwZGF0ZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBJbnZva2VzIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHVwZGF0ZSBzcGVjaWZpYyBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBjYWxsYmFja1VwZGF0ZShsYW5ndWFnZSwgZXZlbnQpIHtcblx0ICBcdGlmIChldmVudCkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0ICBcdHJldHVybiB2bS5vblVwZGF0ZShsYW5ndWFnZSk7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogY2FsbGJhY2tSZW1vdmVcblx0ICAgKiBAZGVzY3JpcHRpb24gSW52b2tlcyBjYWxsYmFjayBmdW5jdGlvbiB0byByZW1vdmUgc3BlY2lmaWMgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUobGFuZ3VhZ2UsIGV2ZW50KSB7XG5cdCAgXHRpZiAoZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdCAgXHRyZXR1cm4gdm0ub25SZW1vdmUobGFuZ3VhZ2UpO1xuXHQgIH1cblx0fVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n						\'glyphicon-star\': !locale.isFavourited(locale.search),\n						\'glyphicon-star-empty\': locale.isFavourited(locale.search)\n					}\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Expand All</label></div><hr><accordion ng-if=\"!locale.hasError\" close-others=\"false\"><accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-info btn-xs\" ng-click=\"locale.callbackUpdate(language, $event)\">Update</button> <button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></accordion-heading><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><div ng-if=\"form.hasInput\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\"></div><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><div ng-if=\"locale.isString(value)\" class=\"input-group\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\"><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\"> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></accordion-group></accordion></div>");}]);