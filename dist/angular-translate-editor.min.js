!function(){"use strict";function e(){return{restrict:"E",scope:{basePath:"@",languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"=",isValid:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(w.languages,function(e){w.insertNewObject[e]=!1,w.tabs[e]={$isOpen:!1},w.bindings[e]={forms:[]},w.xmlDefinitions[e]=JSON.toXML(w.translations[e])}),_.isEmpty(w.basePath)||(w.search=w.basePath,h(w.basePath)),w.isValid=m()}function a(){_.each(w.languages,function(e){w.xmlDefinitions[e]=JSON.toXML(w.translations[e])})}function t(){_.each(w.languages,function(e){w.bindings[e].forms=[],delete w.bindings[e].newForm})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function l(e,n){var a=e;return _.each(n,function(e){a=a[e]}),a}function s(e,n){var a=e;try{return _.each(n,function(e){if(_.has(a,e)){if(_.isString(a[e]))throw"invalid path"}else a[e]={};a=a[e]}),a}catch(t){return null}}function o(e,n){if(n=n||[],e.parentNode&&(n=o(e.parentNode,n)),e.previousSibling){var a=1,t=e.previousSibling;do 1==t.nodeType&&t.nodeName==e.nodeName&&a++,t=t.previousSibling;while(t);1==a&&(a=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function r(){_.each(w.languages,function(e){w.tabs[e].$isOpen=w.isAllCollapsed})}function u(e){return _.contains(_.pluck(w.queries,"search"),e)}function c(e){if(u(e))w.queries=_.reject(w.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||w.queries.push({label:n,search:e})}}function p(e,n,t,i){var s=l(e,n.path);s[t]=i,n.value=s,s=null,w.isValid=!_.isEmpty(i),a()}function d(e,n){var t=l(e,n.path);t[w.newKey]=w.insertNewObject[n.lang]?{}:n.newValue,n.value=t,t=null,_.each(_.without(w.languages,n.lang),function(e){t=l(w.translations[e],n.path),_.has(t,w.newKey)||(t[w.newKey]=w.insertNewObject[n.lang]?{}:n.newValue,_.map(w.bindings[e].forms,function(e){e.value=t}))}),delete w.newKey,delete n.newValue,a()}function f(e,t){_.each(w.languages,function(n){var a;t?(a=l(w.translations[n],e.path),delete a[t]):(a=l(w.translations[n],e.path.slice(0,-1)),delete a[_.last(e.path)]),_.map(w.bindings[n].forms,function(n){n.label==e.label&&(n.value=a)})}),t||(delete w.search,n()),a()}function g(e){w.isValid=!_.isEmpty(e.value),e.element.innerHTML=e.value;var n=Defiant.node.toJSON(w.xmlDefinitions[e.lang]);angular.copy(n,w.translations[e.lang])}function h(e){if(delete w.newKey,e)try{e=angular.uppercase(e),_.each(w.languages,function(n){w.bindings[n].forms=[];var a=Defiant.node.selectNodes(w.xmlDefinitions[n],e);if(a.length)delete w.bindings[n].newForm,_.each(a,function(e,a){var t=Defiant.node.toJSON(e),l=o(e).slice(1);w.bindings[n].forms.push({lang:n,label:l.join("."),path:l,hasInput:"object"!=typeof t,isFlat:_.all(t,function(e,n){return i(e)}),value:t,element:e})});else{var t=e.split("/").slice(2),l=s(w.translations[n],t.slice(0,-1));_.isNull(l)||(w.bindings[n].newForm={lang:n,label:t.join("."),path:t,value:""})}w.hasError=!1})}catch(n){w.hasError=!0,t()}else w.hasError=!1,t()}function b(e){try{var n=l(w.translations[e.lang],e.path.slice(0,-1));n[_.last(e.path)]=e.value,a()}catch(i){w.hasError=!0,t()}}function m(){return _.all(w.languages,function(e){return _.all(w.bindings[e].forms,function(e){return!_.isEmpty(e.value)})})}function v(e,n){return n&&(n.preventDefault(),n.stopPropagation()),w.onUpdate(e)}function y(e,n){return n&&(n.preventDefault(),n.stopPropagation()),w.onRemove(e)}var w=this;w.basePath=w.basePath||"",w.languages=w.languages||[],w.translations=w.translations||{},w.queries=w.queries||[],w.hasUpdateFn=_.isFunction(w.onUpdate),w.hasRemoveFn=_.isFunction(w.onRemove),w.onUpdate=w.onUpdate||angular.noop(),w.onRemove=w.onRemove||angular.noop(),w.isValid=w.isValid||!1,w.tabs={},w.insertNewObject={},w.bindings={},w.xmlDefinitions={},w.hasError=!1,w.isEmpty=_.isEmpty,w.isString=_.isString,w.collapseAll=r,w.isFavourited=u,w.addFavourite=c,w.updateObject=p,w.writeObjectByKey=d,w.deleteObjectByKey=f,w.updateTranslations=g,w.findByKey=h,w.insertNewTranslation=b,w.areTranslationsValid=m,w.callbackUpdate=v,w.callbackRemove=y,n(),e.$watch(function(){return w.languages},function(e,a){e!=a&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwiYmFzZVBhdGgiLCJsYW5ndWFnZXMiLCJ0cmFuc2xhdGlvbnMiLCJxdWVyaWVzIiwib25VcGRhdGUiLCJvblJlbW92ZSIsImlzVmFsaWQiLCJyZXBsYWNlIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsIlRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0IiwiXyIsImVhY2giLCJ2bSIsImxhbmciLCJpbnNlcnROZXdPYmplY3QiLCJ0YWJzIiwiJGlzT3BlbiIsImJpbmRpbmdzIiwiZm9ybXMiLCJ4bWxEZWZpbml0aW9ucyIsIkpTT04iLCJ0b1hNTCIsImlzRW1wdHkiLCJzZWFyY2giLCJmaW5kQnlLZXkiLCJhcmVUcmFuc2xhdGlvbnNWYWxpZCIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwibmV3Rm9ybSIsImlzRmxhdCIsIm9iamVjdCIsImFsbCIsInZhbHVlIiwia2V5IiwiaXNTdHJpbmciLCJ0cmF2ZXJzZU9iamVjdCIsInBhdGgiLCJjdXJyIiwidmFsaWRhdGVUcmF2ZXJzYWxQYXRoIiwiaGFzIiwiZXJyIiwiZ2V0UGF0aFRvTm9kZSIsIm5vZGUiLCJwYXJlbnROb2RlIiwicHJldmlvdXNTaWJsaW5nIiwiY291bnQiLCJzaWJsaW5nIiwibm9kZVR5cGUiLCJub2RlTmFtZSIsIm5leHRTaWJsaW5nIiwicHVzaCIsImNvbGxhcHNlQWxsIiwibGFuZ3VhZ2UiLCJpc0FsbENvbGxhcHNlZCIsImlzRmF2b3VyaXRlZCIsInF1ZXJ5IiwiY29udGFpbnMiLCJwbHVjayIsImFkZEZhdm91cml0ZSIsInJlamVjdCIsImxhYmVsIiwicHJvbXB0IiwidXBkYXRlT2JqZWN0IiwiZm9ybSIsIndyaXRlT2JqZWN0QnlLZXkiLCJuZXdLZXkiLCJuZXdWYWx1ZSIsIndpdGhvdXQiLCJtYXAiLCJkZWxldGVPYmplY3RCeUtleSIsImlucHV0Rm9ybSIsInNsaWNlIiwibGFzdCIsInVwZGF0ZVRyYW5zbGF0aW9ucyIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJ1cGRhdGVkSlNPTiIsIkRlZmlhbnQiLCJ0b0pTT04iLCJhbmd1bGFyIiwiY29weSIsInVwcGVyY2FzZSIsIm5vZGVzIiwic2VsZWN0Tm9kZXMiLCJsZW5ndGgiLCJpZHgiLCJub2RlVmFsIiwiam9pbiIsImhhc0lucHV0Iiwic3BsaXQiLCJpc051bGwiLCJoYXNFcnJvciIsImluc2VydE5ld1RyYW5zbGF0aW9uIiwiY2FsbGJhY2tVcGRhdGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2FsbGJhY2tSZW1vdmUiLCJ0aGlzIiwiaGFzVXBkYXRlRm4iLCJpc0Z1bmN0aW9uIiwiaGFzUmVtb3ZlRm4iLCJub29wIiwiJHdhdGNoIiwib3JpZyIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiRpbmplY3QiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0UsWUFTQSxTQUFTQSxLQUNQLE9BQ0VDLFNBQVUsSUFDVkMsT0FDRUMsU0FBVSxJQUNWQyxVQUFXLElBQ1hDLGFBQWMsSUFDZEMsUUFBUyxJQUNUQyxTQUFVLElBQ1ZDLFNBQVUsSUFDVkMsUUFBUyxLQUVYQyxTQUFTLEVBQ1RDLFlBQWEsNEJBQ2JDLFdBQVksNEJBQ1pDLGFBQWMsU0FDZEMsa0JBQWtCLEdBSXRCLFFBQVNDLEdBQTBCQyxHQTZDakMsUUFBU0MsS0FDUEMsRUFBRUMsS0FBS0MsRUFBR2hCLFVBQVcsU0FBVWlCLEdBQzdCRCxFQUFHRSxnQkFBZ0JELElBQVEsRUFDM0JELEVBQUdHLEtBQUtGLElBQ05HLFNBQVMsR0FFWEosRUFBR0ssU0FBU0osSUFDVkssVUFFRk4sRUFBR08sZUFBZU4sR0FBUU8sS0FBS0MsTUFBTVQsRUFBR2YsYUFBYWdCLE1BRWxESCxFQUFFWSxRQUFRVixFQUFHakIsWUFD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LEVBQUcwQyxhQUFlQSxFQUNsQjFDLEVBQUc4QyxhQUFlQSxFQUNsQjlDLEVBQUdrRCxhQUFlQSxFQUNsQmxELEVBQUdvRCxpQkFBbUJBLEVBQ3RCcEQsRUFBR3lELGtCQUFvQkEsRUFDdkJ6RCxFQUFHNkQsbUJBQXFCQSxFQUN4QjdELEVBQUdZLFVBQVlBLEVBQ2ZaLEVBQUdnRixxQkFBdUJBLEVBQzFCaEYsRUFBR2EscUJBQXVCQSxFQUMxQmIsRUFBR2lGLGVBQWlCQSxFQUNwQmpGLEVBQUdxRixlQUFpQkEsRUFFcEJ4RixJQTJHQUQsRUFBTytGLE9BQU8sV0FDWixNQUFPM0YsR0FBR2hCLFdBQ1QsU0FBVXlDLEVBQU1tRSxHQUNibkUsR0FBUW1FLEdBQ1YvRixNQUVELEdBbExMc0UsUUFDRzBCLE9BQU8sMkJBQTRCLGVBQWdCLGdDQUNuREMsVUFBVSxrQkFBbUJsSCxHQUM3QlksV0FBVyw0QkFBNkJHLEdBRTNDZixFQUFnQm1ILFdBQ2hCcEcsRUFBMEJvRyxTQUFXIiwiZmlsZSI6ImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgna2hjaGFuLnRyYW5zbGF0ZS1lZGl0b3InLCBbJ3VpLmJvb3RzdHJhcCcsICdhbmd1bGFyLXRyYW5zbGF0ZS10ZW1wbGF0ZXMnXSlcbiAgICAuZGlyZWN0aXZlKCd0cmFuc2xhdGVFZGl0b3InLCB0cmFuc2xhdGVFZGl0b3IpXG4gICAgLmNvbnRyb2xsZXIoJ1RyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXInLCBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKTtcblxuICB0cmFuc2xhdGVFZGl0b3IuJGluamVjdCA9IFtdO1xuICBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG4gIGZ1bmN0aW9uIHRyYW5zbGF0ZUVkaXRvcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGJhc2VQYXRoOiAnQCcsICAgICAgIC8vIGluaXRpYWwgYmFzZSBwYXRoIHRvIHByZS1sb2FkIHNlYXJjaFxuICAgICAgICBsYW5ndWFnZXM6ICc9JywgICAgICAvLyBhcnJheSBvZiBhbGxvd2FibGUgbG9jYWxlc1xuICAgICAgICB0cmFuc2xhdGlvbnM6ICc9JywgICAvLyBkaWN0aW9uYXJ5IG9mIGxhbmd1YWdlLXRyYW5zbGF0aW9uc1xuICAgICAgICBxdWVyaWVzOiAnPScsICAgICAgICAvLyBwcmVkZWZpbmVkIHF1ZXJpZXMgdG8gYnVpbGQgYnV0dG9ucyBvblxuICAgICAgICBvblVwZGF0ZTogJz0nLCAgICAgICAvLyBjYWxsYmFjayBvbiB1cGRhdGUgb25lXG4gICAgICAgIG9uUmVtb3ZlOiAnPScsICAgICAgIC8vIGNhbGxiYWNrIG9uIHJlbW92ZSBvbmVcbiAgICAgICAgaXNWYWxpZDogJz0nICAgICAgICAgLy8gYm9vbGVhbiB2YWxpZGl0eSBvZiB0cmFuc2xhdGlvbiBjaGFuZ2VzXG4gICAgICB9LFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlVXJsOiAndHJhbnNsYXRlLWVkaXRvci50cGwuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICdsb2NhbGUnLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKCRzY29wZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAvLyBmcm9tIGRpcmVjdGl2ZVxuICAgIHZtLmJhc2VQYXRoID0gdm0uYmFzZVBhdGggfHwgXCJcIjtcbiAgICB2bS5sYW5ndWFnZXMgPSB2bS5sYW5ndWFnZXMgfHwgW107XG4gICAgdm0udHJhbnNsYXRpb25zID0gdm0udHJhbnNsYXRpb25zIHx8IHt9O1xuICAgIHZtLnF1ZXJpZXMgPSB2bS5xdWVyaWVzIHx8IFtdO1xuICAgIHZtLmhhc1VwZGF0ZUZuID0gXy5pc0Z1bmN0aW9uKHZtLm9uVXBkYXRlKTtcbiAgICB2bS5oYXNSZW1vdmVGbiA9IF8uaXNGdW5jdGlvbih2bS5vblJlbW92ZSk7XG4gICAgdm0ub25VcGRhdGUgPSB2bS5vblVwZGF0ZSB8fCBhbmd1bGFyLm5vb3AoKTtcbiAgICB2bS5vblJlbW92ZSA9IHZtLm9uUmVtb3ZlIHx8IGFuZ3VsYXIubm9vcCgpO1xuICAgIHZtLmlzVmFsaWQgPSB2bS5pc1ZhbGlkIHx8IGZhbHNlO1xuXG4gICAgLy8gYmluZGFibGUgdmFyaWFibGVzXG4gICAgdm0udGFicyA9IHt9O1xuICAgIHZtLmluc2VydE5ld09iamVjdCA9IHt9O1xuICAgIHZtLmJpbmRpbmdzID0ge307ICAgICAgICAvLyBzdG9yZXMgcmVzdWx0cyBvZiB4UGF0aCBxdWVyeVxuICAgIHZtLnhtbERlZmluaXRpb25zID0ge307ICAvLyB4bWwgZXF1aXZhbGVudHMgb2YgdHJhbnNsYXRpb24ganNvbnNcbiAgICB2bS5oYXNFcnJvciA9IGZhbHNlOyAgICAgLy8gYm9vbGVhbiBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZXJlIHdhcyBhIHF1ZXJ5IGVycm9yXG5cbiAgICAvLyBiaW5kYWJsZSBtZXRob2RzXG4gICAgdm0uaXNFbXB0eSA9IF8uaXNFbXB0eTtcbiAgICB2bS5pc1N0cmluZyA9IF8uaXNTdHJpbmc7XG4gICAgdm0uY29sbGFwc2VBbGwgPSBjb2xsYXBzZUFsbDtcbiAgICB2bS5pc0Zhdm91cml0ZWQgPSBpc0Zhdm91cml0ZWQ7XG4gICAgdm0uYWRkRmF2b3VyaXRlID0gYWRkRmF2b3VyaXRlO1xuICAgIHZtLnVwZGF0ZU9iamVjdCA9IHVwZGF0ZU9iamVjdDtcbiAgICB2bS53cml0ZU9iamVjdEJ5S2V5ID0gd3JpdGVPYmplY3RCeUtleTtcbiAgICB2bS5kZWxldGVPYmplY3RCeUtleSA9IGRlbGV0ZU9iamVjdEJ5S2V5O1xuICAgIHZtLnVwZGF0ZVRyYW5zbGF0aW9ucyA9IHVwZGF0ZVRyYW5zbGF0aW9ucztcbiAgICB2bS5maW5kQnlLZXkgPSBmaW5kQnlLZXk7XG4gICAgdm0uaW5zZXJ0TmV3VHJhbnNsYXRpb24gPSBpbnNlcnROZXdUcmFuc2xhdGlvbjtcbiAgICB2bS5hcmVUcmFuc2xhdGlvbnNWYWxpZCA9IGFyZVRyYW5zbGF0aW9uc1ZhbGlkO1xuICAgIHZtLmNhbGxiYWNrVXBkYXRlID0gY2FsbGJhY2tVcGRhdGU7XG4gICAgdm0uY2FsbGJhY2tSZW1vdmUgPSBjYWxsYmFja1JlbW92ZTtcblxuICAgIGluaXQoKTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8qKlxuICAgICAqIFByaXZhdGUgTWV0aG9kc1xuICAgICAqL1xuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICAgIHZtLmluc2VydE5ld09iamVjdFtsYW5nXSA9IGZhbHNlO1xuICAgICAgICB2bS50YWJzW2xhbmddID0ge1xuICAgICAgICAgICRpc09wZW46IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHZtLmJpbmRpbmdzW2xhbmddID0ge1xuICAgICAgICAgIGZvcm1zOiBbXVxuICAgICAgICB9O1xuICAgICAgICB2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFfLmlzRW1wdHkodm0uYmFzZVBhdGgpKSB7XG4gICAgICAgIHZtLnNlYXJjaCA9IHZtLmJhc2VQYXRoO1xuICAgICAgICBmaW5kQnlLZXkodm0uYmFzZVBhdGgpO1xuICAgICAgfVxuICAgICAgdm0uaXNWYWxpZCA9IGFyZVRyYW5zbGF0aW9uc1ZhbGlkKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3luY0pzb25Ub1hNTCgpIHtcbiAgICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICAgIHZtLnhtbERlZmluaXRpb25zW2xhbmddID0gSlNPTi50b1hNTCh2bS50cmFuc2xhdGlvbnNbbGFuZ10pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJCaW5kaW5ncygpIHtcbiAgICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICAgIHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zID0gW107XG4gICAgICAgIGRlbGV0ZSB2bS5iaW5kaW5nc1tsYW5nXS5uZXdGb3JtO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNGbGF0KG9iamVjdCkge1xuICAgICAgcmV0dXJuIF8uYWxsKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIF8uaXNTdHJpbmcodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBwYXRoKSB7XG4gICAgICB2YXIgY3VyciA9IG9iamVjdDtcbiAgICAgIF8uZWFjaChwYXRoLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGN1cnIgPSBjdXJyW2tleV07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjdXJyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlVHJhdmVyc2FsUGF0aChvYmplY3QsIHBhdGgpIHtcbiAgICAgIHZhciBjdXJyID0gb2JqZWN0O1xuICAgICAgdHJ5IHtcbiAgICAgICAgXy5lYWNoKHBhdGgsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoIV8uaGFzKGN1cnIsIGtleSkpIHsgLy8gaWYgb2JqZWN0IGRvZXNuJ3QgZXhpc3QgYXQgY3VycmVudCBwYXRoIHlldFxuICAgICAgICAgICAgY3VycltrZXldID0ge307XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKGN1cnJba2V5XSkpIHsgLy8gaWYgcGF0aCBsZWFkcyB0byBzdHJpbmcgZmllbGQsIHBhdGggaXMgaW52YWxpZFxuICAgICAgICAgICAgICB0aHJvdyBcImludmFsaWQgcGF0aFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyID0gY3VycltrZXldO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGN1cnI7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGF0aFRvTm9kZShub2RlLCBwYXRoKSB7XG4gICAgICBwYXRoID0gcGF0aCB8fCBbXTtcbiAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgcGF0aCA9IGdldFBhdGhUb05vZGUobm9kZS5wYXJlbnROb2RlLCBwYXRoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDE7XG4gICAgICAgIHZhciBzaWJsaW5nID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAoc2libGluZy5ub2RlVHlwZSA9PSAxICYmIHNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZSkgeyBjb3VudCsrOyB9XG4gICAgICAgICAgc2libGluZyA9IHNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB9IHdoaWxlKHNpYmxpbmcpO1xuICAgICAgICBpZiAoY291bnQgPT0gMSkgeyBjb3VudCA9IG51bGw7IH1cbiAgICAgIH0gZWxzZSBpZihub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHZhciBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAobmV4dFNpYmxpbmcubm9kZVR5cGUgPT0gMSAmJiBuZXh0U2libGluZy5ub2RlTmFtZSA9PSBub2RlLm5vZGVOYW1lKSB7XG4gICAgICAgICAgICBuZXh0U2libGluZyA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZShuZXh0U2libGluZyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgcGF0aC5wdXNoKG5vZGUubm9kZU5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGljIE1ldGhvZHNcbiAgICAgKi9cblxuICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdm0ubGFuZ3VhZ2VzO1xuICAgIH0sIGZ1bmN0aW9uIChjdXJyLCBvcmlnKSB7XG4gICAgICBpZiAoY3VyciAhPSBvcmlnKSB7XG4gICAgICAgIGluaXQoKTsgLy8gcmUtaW5pdGlhbGl6ZSBiaW5kaW5ncyB3aGVuIGxhbmd1YWdlcyBhcmUgYWRkZWQvcmVtb3ZlZFxuICAgICAgfVxuICAgIH0sIHRydWUpO1xuXG4gICAgZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG4gICAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcbiAgICAgICAgdm0udGFic1tsYW5ndWFnZV0uJGlzT3BlbiA9IHZtLmlzQWxsQ29sbGFwc2VkO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNGYXZvdXJpdGVkKHF1ZXJ5KSB7XG4gICAgICByZXR1cm4gXy5jb250YWlucyhfLnBsdWNrKHZtLnF1ZXJpZXMsICdzZWFyY2gnKSwgcXVlcnkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEZhdm91cml0ZShxdWVyeSkge1xuICAgICAgaWYgKGlzRmF2b3VyaXRlZChxdWVyeSkpIHtcbiAgICAgICAgdm0ucXVlcmllcyA9IF8ucmVqZWN0KHZtLnF1ZXJpZXMsIHsgc2VhcmNoOiBxdWVyeSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBsYWJlbCA9IHByb21wdChcIlBsZWFzZSBlbnRlciBhIGxhYmVsOiBcIiwgcXVlcnkpO1xuICAgICAgICBpZiAoIV8uaXNFbXB0eShsYWJlbCkpIHtcbiAgICAgICAgICB2bS5xdWVyaWVzLnB1c2goe1xuICAgICAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAgICAgc2VhcmNoOiBxdWVyeVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlT2JqZWN0XG4gICAgICogQGRlc2NyaXB0aW9uIEdpdmVuIGEgZmxhdCBqc29uIG9iamVjdCwgdXBkYXRlcyBhbmQgc3luY3MgYSBwYXJ0aWN1bGFyIGtleS92YWx1ZSBwYWlyXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlT2JqZWN0KG9iamVjdCwgZm9ybSwga2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG4gICAgICBjdXJyW2tleV0gPSB2YWx1ZTtcbiAgICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuICAgICAgY3VyciA9IG51bGw7XG5cbiAgICAgIC8vIHVwZGF0ZSB2YWxpZGl0eVxuICAgICAgdm0uaXNWYWxpZCA9ICFfLmlzRW1wdHkodmFsdWUpO1xuXG4gICAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuICAgICAgc3luY0pzb25Ub1hNTCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHdyaXRlT2JqZWN0QnlLZXlcbiAgICAgKiBAZGVzY3JpcHRpb24gV3JpdGVzIGEgbmV3IHZhbHVlIHRvIGFuIG9iamVjdCBieSB0cmF2ZXJzaW5nIGRvd24gdGhyb3VnaCBhIHBhdGhcbiAgICAgKiAgICAgICAgICAgICAgdGhlbiB3cml0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyaXRlT2JqZWN0QnlLZXkob2JqZWN0LCBmb3JtKSB7XG4gICAgICAvLyB1cGRhdGUgZm9yIGZvcm0gaW4gY3VycmVudCBsYW5ndWFnZVxuICAgICAgdmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG4gICAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuICAgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcbiAgICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuICAgICAgY3VyciA9IG51bGw7XG5cbiAgICAgIC8vIGNoZWNrIG90aGVyIGxhbmd1YWdlcyBmb3Iga2V5IGFuZCBmaWxsIHdpdGggdmFsdWUgaWYgbm90IGV4aXN0c1xuICAgICAgXy5lYWNoKF8ud2l0aG91dCh2bS5sYW5ndWFnZXMsIGZvcm0ubGFuZyksIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuICAgICAgICBjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgZm9ybS5wYXRoKTtcbiAgICAgICAgaWYgKCFfLmhhcyhjdXJyLCB2bS5uZXdLZXkpKSB7XG4gICAgICAgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcbiAgICAgICAgICBfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG4gICAgICAgICAgICBmb3JtLnZhbHVlID0gY3VycjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGNsZWFyIGlucHV0c1xuICAgICAgZGVsZXRlIHZtLm5ld0tleTtcbiAgICAgIGRlbGV0ZSBmb3JtLm5ld1ZhbHVlO1xuXG4gICAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuICAgICAgc3luY0pzb25Ub1hNTCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRlbGV0ZU9iamVjdEJ5S2V5XG4gICAgICogQGRlc2NyaXB0aW9uIERlbGV0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleSBpbiBhIGZsYXQganNvbiBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWxldGVPYmplY3RCeUtleShpbnB1dEZvcm0sIGtleSkge1xuICAgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG4gICAgICAgIHZhciBjdXJyO1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgIGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBpbnB1dEZvcm0ucGF0aC5zbGljZSgwLCAtMSkpO1xuICAgICAgICAgIC8vIHNldCBuZXcga2V5IHZhbHVlXG4gICAgICAgICAgZGVsZXRlIGN1cnJbXy5sYXN0KGlucHV0Rm9ybS5wYXRoKV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGlucHV0Rm9ybS5wYXRoKTtcbiAgICAgICAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuICAgICAgICAgIGRlbGV0ZSBjdXJyW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICAgaWYgKGZvcm0ubGFiZWwgPT0gaW5wdXRGb3JtLmxhYmVsKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG4gICAgICAgICAgICBmb3JtLnZhbHVlID0gY3VycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICgha2V5KSB7IC8vIGlmIG5vIGtleSBnaXZlbiwgcmVtb3ZpbmcgZW1wdHkgb2JqZWN0IGFuZCByZXNldFxuICAgICAgICBkZWxldGUgdm0uc2VhcmNoO1xuICAgICAgICBpbml0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG4gICAgICBzeW5jSnNvblRvWE1MKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVHJhbnNsYXRpb25zKGZvcm0pIHtcbiAgICAgIC8vIHVwZGF0ZSB2YWxpZGl0eVxuICAgICAgdm0uaXNWYWxpZCA9ICFfLmlzRW1wdHkoZm9ybS52YWx1ZSk7XG4gICAgICBmb3JtLmVsZW1lbnQuaW5uZXJIVE1MID0gZm9ybS52YWx1ZTtcbiAgICAgIHZhciB1cGRhdGVkSlNPTiA9IERlZmlhbnQubm9kZS50b0pTT04odm0ueG1sRGVmaW5pdGlvbnNbZm9ybS5sYW5nXSk7XG4gICAgICBhbmd1bGFyLmNvcHkodXBkYXRlZEpTT04sIHZtLnRyYW5zbGF0aW9uc1tmb3JtLmxhbmddKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmaW5kQnlLZXlcbiAgICAgKiBAZGVzY3JpcHRpb24gTWFpbiBxdWVyeSBmdW5jdGlvbiBmb3IgZXZhbHVhdGluZyB4UGF0aCBxdWVyaWVzIGFnYWluc3RcbiAgICAgKiAgICAgICAgICAgICAgSlNPTiB0cmFuc2xhdGlvbiBvYmplY3RzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRCeUtleShxdWVyeSkge1xuICAgICAgZGVsZXRlIHZtLm5ld0tleTtcbiAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgdm0uaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgY2xlYXJCaW5kaW5ncygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBxdWVyeSA9IGFuZ3VsYXIudXBwZXJjYXNlKHF1ZXJ5KTtcbiAgICAgICAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuICAgICAgICAgICAgdm0uYmluZGluZ3NbbGFuZ10uZm9ybXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IERlZmlhbnQubm9kZS5zZWxlY3ROb2Rlcyh2bS54bWxEZWZpbml0aW9uc1tsYW5nXSwgcXVlcnkpO1xuXG4gICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoKSB7IC8vIGlmIHNlYXJjaCByZXR1cm5lZCByZXN1bHRzXG4gICAgICAgICAgICAgIGRlbGV0ZSB2bS5iaW5kaW5nc1tsYW5nXS5uZXdGb3JtO1xuICAgICAgICAgICAgICBfLmVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlLCBpZHgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZVZhbCA9IERlZmlhbnQubm9kZS50b0pTT04obm9kZSk7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBnZXRQYXRoVG9Ob2RlKG5vZGUpLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbGFuZzogbGFuZyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBwYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgICAgIGhhc0lucHV0OiAodHlwZW9mIG5vZGVWYWwgIT09ICdvYmplY3QnKSxcbiAgICAgICAgICAgICAgICAgIGlzRmxhdDogXy5hbGwobm9kZVZhbCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRmxhdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBub2RlVmFsLFxuICAgICAgICAgICAgICAgICAgZWxlbWVudDogbm9kZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIG90aGVyd2lzZSwgaW5zZXJ0IGtleS92YWx1ZSByZWN1cnNpdmVseVxuICAgICAgICAgICAgICB2YXIgcGF0aCA9IHF1ZXJ5LnNwbGl0KCcvJykuc2xpY2UoMik7XG4gICAgICAgICAgICAgIC8vIHRyeSB0cmF2ZXJzaW5nIHRyYW5zbGF0aW9uIG9iamVjdCB3aXRoIHBhdGggbGVhZGluZyB0byBrZXlcbiAgICAgICAgICAgICAgdmFyIGN1cnIgPSB2YWxpZGF0ZVRyYXZlcnNhbFBhdGgodm0udHJhbnNsYXRpb25zW2xhbmddLCBwYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgICAgICAgICAgIGlmICghXy5pc051bGwoY3VycikpIHtcbiAgICAgICAgICAgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5uZXdGb3JtID0ge1xuICAgICAgICAgICAgICAgICAgbGFuZzogbGFuZyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBwYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdm0uaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnIpIHsgLy8gcXVlcnkgaW52YWxpZCwgc28gY2xlYXIgYmluZGluZ3NcbiAgICAgICAgICB2bS5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgY2xlYXJCaW5kaW5ncygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0TmV3VHJhbnNsYXRpb24gZGVzY3JpcHRpb25cbiAgICAgKiBAZGVzY3JpcHRpb24gUmVjdXJzaXZlbHkgY2hlY2tzIGpzb24gc3RydWN0dXJlIHRvIGluc2VydCBuZXcga2V5IHZhbHVlIHRyYW5zbGF0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBuZXdGb3JtXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5zZXJ0TmV3VHJhbnNsYXRpb24obmV3Rm9ybSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gdHJ5IHRyYXZlcnNpbmcgdHJhbnNsYXRpb24gb2JqZWN0IHdpdGggcGF0aCBsZWFkaW5nIHRvIGtleVxuICAgICAgICB2YXIgY3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tuZXdGb3JtLmxhbmddLCBuZXdGb3JtLnBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgY3VycltfLmxhc3QobmV3Rm9ybS5wYXRoKV0gPSBuZXdGb3JtLnZhbHVlO1xuXG4gICAgICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG4gICAgICAgIHN5bmNKc29uVG9YTUwoKTtcbiAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgIHZtLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJCaW5kaW5ncygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFyZVRyYW5zbGF0aW9uc1ZhbGlkXG4gICAgICogQGRlc2NyaXB0aW9uIFJldHVybnMgdHJ1ZSBpZiBmb3JtcyBoYXZlIGFsbCB0aGVpciB0cmFuc2xhdGVkIHZhbHVlcyBmaWxsZWQgb3V0XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhcmVUcmFuc2xhdGlvbnNWYWxpZCgpIHtcbiAgICAgIHJldHVybiBfLmFsbCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuICAgICAgICByZXR1cm4gXy5hbGwodm0uYmluZGluZ3NbbGFuZ3VhZ2VdLmZvcm1zLCBmdW5jdGlvbiAoZm9ybSkge1xuICAgICAgICAgIHJldHVybiAhXy5pc0VtcHR5KGZvcm0udmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNhbGxiYWNrVXBkYXRlXG4gICAgICogQGRlc2NyaXB0aW9uIEludm9rZXMgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdXBkYXRlIHNwZWNpZmljIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbGxiYWNrVXBkYXRlKGxhbmd1YWdlLCBldmVudCkge1xuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZtLm9uVXBkYXRlKGxhbmd1YWdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjYWxsYmFja1JlbW92ZVxuICAgICAqIEBkZXNjcmlwdGlvbiBJbnZva2VzIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlbW92ZSBzcGVjaWZpYyBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWxsYmFja1JlbW92ZShsYW5ndWFnZSwgZXZlbnQpIHtcbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2bS5vblJlbW92ZShsYW5ndWFnZSk7XG4gICAgfVxuICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"row\"><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-disabled=\"!locale.isValid\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n              \'glyphicon-star\': !locale.isFavourited(locale.search),\n              \'glyphicon-star-empty\': locale.isFavourited(locale.search)\n            }\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-disabled=\"!locale.isValid\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Expand All</label></div><hr></div><div class=\"row\"><uib-accordion ng-if=\"!locale.hasError\" close-others=\"false\"><uib-accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><uib-accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-if=\"locale.hasRemoveFn\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></uib-accordion-heading><!-- Panel for new inputs to be inserted from unsucessful query --><div ng-if=\"locale.bindings[language].newForm\" ng-class=\"{ \'has-error\': !locale.bindings[language].newForm.value }\"><label>{{locale.bindings[language].newForm.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.bindings[language].newForm.value\" ng-change=\"locale.insertNewTranslation(locale.bindings[language].newForm)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!locale.bindings[language].newForm.value\" class=\"pull-right text-danger\">Missing Translation!</small></div><!-- Panel for Inputs from Valid Query --><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><!-- Direct Access to Key --><div ng-if=\"form.hasInput\" ng-class=\"{ \'has-error\': !form.value }\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small></div><!-- Inference of Translation Module --><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><!-- String Fields --><div ng-if=\"locale.isString(value)\" class=\"input-group\" ng-class=\"{ \'has-error\': !value }\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\"><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><!-- Object Field --><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\" ng-class=\"{ \'has-error\': !form.value }\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></uib-accordion-group></uib-accordion></div></div>");}]);