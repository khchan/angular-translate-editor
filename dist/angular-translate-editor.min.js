!function(){"use strict";function e(){return{restrict:"E",scope:{basePath:"@",languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"=",onSave:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(y.languages,function(e){y.insertNewObject[e]=!1,y.tabs[e]={$isOpen:!1},y.bindings[e]={forms:[]},y.xmlDefinitions[e]=JSON.toXML(y.translations[e])}),_.isEmpty(y.basePath)||(y.search=y.basePath,d(y.basePath))}function a(){_.each(y.languages,function(e){y.xmlDefinitions[e]=JSON.toXML(y.translations[e])})}function t(){_.each(y.languages,function(e){y.bindings[e].forms=[]})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function o(e,n){var a=e;return _.each(n,function(e){a=a[e]}),a}function l(e,n){if(n=n||[],e.parentNode&&(n=l(e.parentNode,n)),e.previousSibling){var a=1,t=e.previousSibling;do 1==t.nodeType&&t.nodeName==e.nodeName&&a++,t=t.previousSibling;while(t);1==a&&(a=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function r(){_.each(y.languages,function(e){y.tabs[e].$isOpen=y.isAllCollapsed})}function s(e){return _.contains(_.pluck(y.queries,"search"),e)}function u(e){if(s(e))y.queries=_.reject(y.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||y.queries.push({label:n,search:e})}}function c(e,n,t,i){var l=o(e,n.path);l[t]=i,n.value=l,l=null,a()}function p(e,n){var t=o(e,n.path);t[y.newKey]=y.insertNewObject[n.lang]?{}:n.newValue,n.value=t,t=null,_.each(_.without(y.languages,n.lang),function(e){t=o(y.translations[e],n.path),_.has(t,y.newKey)||(t[y.newKey]=y.insertNewObject[n.lang]?{}:n.newValue,_.map(y.bindings[e].forms,function(e){e.value=t}))}),delete y.newKey,delete n.newValue,a()}function f(e,t){_.each(y.languages,function(n){var a;t?(a=o(y.translations[n],e.path),delete a[t]):(a=o(y.translations[n],e.path.slice(0,-1)),delete a[_.last(e.path)]),_.map(y.bindings[n].forms,function(n){n.label==e.label&&(n.value=a)})}),t||(delete y.search,n()),a()}function g(e){e.element.innerHTML=e.value;var n=Defiant.node.toJSON(y.xmlDefinitions[e.lang]);angular.copy(n,y.translations[e.lang])}function d(e){if(delete y.newKey,e)try{e=angular.uppercase(e),_.each(y.languages,function(n){y.bindings[n].forms=[];var a=Defiant.node.selectNodes(y.xmlDefinitions[n],e);_.each(a,function(e,a){var t=Defiant.node.toJSON(e),o=l(e).slice(1),r={lang:n,label:o.join("."),path:o,hasInput:"object"!=typeof e,isFlat:_.all(t,function(e,n){return i(e)}),value:t,element:e};r.hasInput="object"!=typeof t,y.bindings[n].forms.push(r)}),y.hasError=!1})}catch(n){y.hasError=!0,t()}else y.hasError=!1,t()}function h(){return _.all(y.languages,function(e){return _.all(y.bindings[e].forms,function(e){return!_.isEmpty(e.value)})})}function b(e,n){return n&&(n.preventDefault(),n.stopPropagation()),y.onUpdate(e)}function v(e,n){return n&&(n.preventDefault(),n.stopPropagation()),y.onRemove(e)}function m(e){return e&&(e.preventDefault(),e.stopPropagation()),y.onSave()}var y=this;y.basePath=y.basePath||"",y.languages=y.languages||[],y.translations=y.translations||{},y.queries=y.queries||[],y.hasUpdateFn=_.isFunction(y.onUpdate),y.hasRemoveFn=_.isFunction(y.onRemove),y.onUpdate=y.onUpdate||angular.noop(),y.onRemove=y.onRemove||angular.noop(),y.onSave=y.onSave||angular.noop(),y.tabs={},y.insertNewObject={},y.bindings={},y.xmlDefinitions={},y.hasError=!1,y.isEmpty=_.isEmpty,y.isString=_.isString,y.collapseAll=r,y.isFavourited=s,y.addFavourite=u,y.updateObject=c,y.writeObjectByKey=p,y.deleteObjectByKey=f,y.updateTranslations=g,y.findByKey=d,y.areTranslationsValid=h,y.callbackUpdate=b,y.callbackRemove=v,y.callbackSave=m,n(),e.$watch(function(){return y.languages},function(e,a){e!=a&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwiYmFzZVBhdGgiLCJsYW5ndWFnZXMiLCJ0cmFuc2xhdGlvbnMiLCJxdWVyaWVzIiwib25VcGRhdGUiLCJvblJlbW92ZSIsIm9uU2F2ZSIsInJlcGxhY2UiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlciIsIiRzY29wZSIsImluaXQiLCJfIiwiZWFjaCIsInZtIiwibGFuZyIsImluc2VydE5ld09iamVjdCIsInRhYnMiLCIkaXNPcGVuIiwiYmluZGluZ3MiLCJmb3JtcyIsInhtbERlZmluaXRpb25zIiwiSlNPTiIsInRvWE1MIiwiaXNFbXB0eSIsInNlYXJjaCIsImZpbmRCeUtleSIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwiaXNGbGF0Iiwib2JqZWN0IiwiYWxsIiwidmFsdWUiLCJrZXkiLCJpc1N0cmluZyIsInRyYXZlcnNlT2JqZWN0IiwicGF0aCIsImN1cnIiLCJnZXRQYXRoVG9Ob2RlIiwibm9kZSIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJjb3VudCIsInNpYmxpbmciLCJub2RlVHlwZSIsIm5vZGVOYW1lIiwibmV4dFNpYmxpbmciLCJwdXNoIiwiY29sbGFwc2VBbGwiLCJsYW5ndWFnZSIsImlzQWxsQ29sbGFwc2VkIiwiaXNGYXZvdXJpdGVkIiwicXVlcnkiLCJjb250YWlucyIsInBsdWNrIiwiYWRkRmF2b3VyaXRlIiwicmVqZWN0IiwibGFiZWwiLCJwcm9tcHQiLCJ1cGRhdGVPYmplY3QiLCJmb3JtIiwid3JpdGVPYmplY3RCeUtleSIsIm5ld0tleSIsIm5ld1ZhbHVlIiwid2l0aG91dCIsImhhcyIsIm1hcCIsImRlbGV0ZU9iamVjdEJ5S2V5IiwiaW5wdXRGb3JtIiwic2xpY2UiLCJsYXN0IiwidXBkYXRlVHJhbnNsYXRpb25zIiwiZWxlbWVudCIsImlubmVySFRNTCIsInVwZGF0ZWRKU09OIiwiRGVmaWFudCIsInRvSlNPTiIsImFuZ3VsYXIiLCJjb3B5IiwidXBwZXJjYXNlIiwibm9kZXMiLCJzZWxlY3ROb2RlcyIsImlkeCIsIm5vZGVWYWwiLCJqb2luIiwiaGFzSW5wdXQiLCJoYXNFcnJvciIsImVyciIsImFyZVRyYW5zbGF0aW9uc1ZhbGlkIiwiY2FsbGJhY2tVcGRhdGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2FsbGJhY2tSZW1vdmUiLCJjYWxsYmFja1NhdmUiLCJ0aGlzIiwiaGFzVXBkYXRlRm4iLCJpc0Z1bmN0aW9uIiwiaGFzUmVtb3ZlRm4iLCJub29wIiwiJHdhdGNoIiwib3JpZyIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiRpbmplY3QiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0MsWUFTQSxTQUFTQSxLQUNQLE9BQ0VDLFNBQVUsSUFDVkMsT0FDQ0MsU0FBVSxJQUNUQyxVQUFXLElBQ1hDLGFBQWMsSUFDZEMsUUFBUyxJQUNUQyxTQUFVLElBQ1ZDLFNBQVUsSUFDVkMsT0FBUSxLQUVWQyxTQUFTLEVBQ1RDLFlBQWEsNEJBQ2JDLFdBQVksNEJBQ1pDLGFBQWMsU0FDZEMsa0JBQWtCLEdBSXRCLFFBQVNDLEdBQTBCQyxHQTZDakMsUUFBU0MsS0FDUEMsRUFBRUMsS0FBS0MsRUFBR2hCLFVBQVcsU0FBVWlCLEdBQzlCRCxFQUFHRSxnQkFBZ0JELElBQVEsRUFDM0JELEVBQUdHLEtBQUtGLElBQ1BHLFNBQVMsR0FFVEosRUFBR0ssU0FBU0osSUFDVkssVUFFRk4sRUFBR08sZUFBZU4sR0FBUU8sS0FBS0MsTUFBTVQsRUFBR2YsYUFBYWdCLE1BRWxESCxFQUFFWSxRQUFRVixFQUFHakIsWUFDaEJpQixFQUFHVyxPQUFTWCxFQUFHakIsU0FDZjZCLEVBQVVaLEVBQUdqQixXQUlqQixRQUFTOEIsS0FDUGYsRUFBRUMs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RUFBR1gsUUFBVTBFLFFBQVFzQixPQUdqQ3JGLEVBQUdHLFFBQ0hILEVBQUdFLG1CQUNIRixFQUFHSyxZQUNITCxFQUFHTyxrQkFDSFAsRUFBR3dFLFVBQVcsRUFHZHhFLEVBQUdVLFFBQVVaLEVBQUVZLFFBQ2ZWLEVBQUdvQixTQUFXdEIsRUFBRXNCLFNBQ2hCcEIsRUFBR2tDLFlBQWNBLEVBQ2pCbEMsRUFBR3FDLGFBQWVBLEVBQ2xCckMsRUFBR3lDLGFBQWVBLEVBQ2xCekMsRUFBRzZDLGFBQWVBLEVBQ2xCN0MsRUFBRytDLGlCQUFtQkEsRUFDdEIvQyxFQUFHcUQsa0JBQW9CQSxFQUN2QnJELEVBQUd5RCxtQkFBcUJBLEVBQ3hCekQsRUFBR1ksVUFBWUEsRUFDZlosRUFBRzBFLHFCQUF1QkEsRUFDMUIxRSxFQUFHMkUsZUFBaUJBLEVBQ3BCM0UsRUFBRytFLGVBQWlCQSxFQUNwQi9FLEVBQUdnRixhQUFlQSxFQUVsQm5GLElBc0ZBRCxFQUFPMEYsT0FBTyxXQUNiLE1BQU90RixHQUFHaEIsV0FDUixTQUFVdUMsRUFBTWdFLEdBQ2RoRSxHQUFRZ0UsR0FDWDFGLE1BRUMsR0E3SkxrRSxRQUNHeUIsT0FBTywyQkFBNEIsZUFBZ0IsZ0NBQ25EQyxVQUFVLGtCQUFtQjdHLEdBQzdCWSxXQUFXLDRCQUE2QkcsR0FFM0NmLEVBQWdCOEcsV0FDaEIvRixFQUEwQitGLFNBQVciLCJmaWxlIjoiYW5ndWxhci10cmFuc2xhdGUtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXHQndXNlIHN0cmljdCc7XG5cdGFuZ3VsYXJcblx0ICAubW9kdWxlKCdraGNoYW4udHJhbnNsYXRlLWVkaXRvcicsIFsndWkuYm9vdHN0cmFwJywgJ2FuZ3VsYXItdHJhbnNsYXRlLXRlbXBsYXRlcyddKVxuXHQgIC5kaXJlY3RpdmUoJ3RyYW5zbGF0ZUVkaXRvcicsIHRyYW5zbGF0ZUVkaXRvcilcblx0ICAuY29udHJvbGxlcignVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsIFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIpO1xuXG5cdHRyYW5zbGF0ZUVkaXRvci4kaW5qZWN0ID0gW107XG5cdFRyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XG5cblx0ZnVuY3Rpb24gdHJhbnNsYXRlRWRpdG9yKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgc2NvcGU6IHtcblx0ICAgIFx0YmFzZVBhdGg6ICdAJyxcdFx0XHQgLy8gaW5pdGlhbCBiYXNlIHBhdGggdG8gcHJlLWxvYWQgc2VhcmNoXG5cdCAgICAgIGxhbmd1YWdlczogJz0nLCAgICAgIC8vIGFycmF5IG9mIGFsbG93YWJsZSBsb2NhbGVzXG5cdCAgICAgIHRyYW5zbGF0aW9uczogJz0nLCAgIC8vIGRpY3Rpb25hcnkgb2YgbGFuZ3VhZ2UtdHJhbnNsYXRpb25zXG5cdCAgICAgIHF1ZXJpZXM6ICc9JywgICAgICAgIC8vIHByZWRlZmluZWQgcXVlcmllcyB0byBidWlsZCBidXR0b25zIG9uXG5cdCAgICAgIG9uVXBkYXRlOiAnPScsXHRcdFx0IC8vIGNhbGxiYWNrIG9uIHVwZGF0ZSBvbmVcblx0ICAgICAgb25SZW1vdmU6ICc9JyxcdFx0XHQgLy8gY2FsbGJhY2sgb24gcmVtb3ZlIG9uZVxuXHQgICAgICBvblNhdmU6ICc9J1x0XHRcdFx0IFx0IC8vIGNhbGxiYWNrIG9uIHNhdmUgYWxsXG5cdCAgICB9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZSxcblx0ICAgIHRlbXBsYXRlVXJsOiAndHJhbnNsYXRlLWVkaXRvci50cGwuaHRtbCcsXG5cdCAgICBjb250cm9sbGVyOiAnVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsXG5cdCAgICBjb250cm9sbGVyQXM6ICdsb2NhbGUnLFxuXHQgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHQgIH07XG5cdH1cblxuXHRmdW5jdGlvbiBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKCRzY29wZSkge1xuXHQgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAvLyBmcm9tIGRpcmVjdGl2ZVxuXHQgIHZtLmJhc2VQYXRoID0gdm0uYmFzZVBhdGggfHwgXCJcIjtcblx0ICB2bS5sYW5ndWFnZXMgPSB2bS5sYW5ndWFnZXMgfHwgW107XG5cdCAgdm0udHJhbnNsYXRpb25zID0gdm0udHJhbnNsYXRpb25zIHx8IHt9O1xuXHQgIHZtLnF1ZXJpZXMgPSB2bS5xdWVyaWVzIHx8IFtdO1xuXHQgIHZtLmhhc1VwZGF0ZUZuID0gXy5pc0Z1bmN0aW9uKHZtLm9uVXBkYXRlKTtcblx0ICB2bS5oYXNSZW1vdmVGbiA9IF8uaXNGdW5jdGlvbih2bS5vblJlbW92ZSk7XG5cdCAgdm0ub25VcGRhdGUgPSB2bS5vblVwZGF0ZSB8fCBhbmd1bGFyLm5vb3AoKTtcblx0ICB2bS5vblJlbW92ZSA9IHZtLm9uUmVtb3ZlIHx8IGFuZ3VsYXIubm9vcCgpO1xuXHQgIHZtLm9uU2F2ZSA9IHZtLm9uU2F2ZSB8fCBhbmd1bGFyLm5vb3AoKTtcblxuXHQgIC8vIGJpbmRhYmxlIHZhcmlhYmxlc1xuXHQgIHZtLnRhYnMgPSB7fTtcblx0ICB2bS5pbnNlcnROZXdPYmplY3QgPSB7fTtcblx0ICB2bS5iaW5kaW5ncyA9IHt9OyAgICAgICAgLy8gc3RvcmVzIHJlc3VsdHMgb2YgeFBhdGggcXVlcnlcblx0ICB2bS54bWxEZWZpbml0aW9ucyA9IHt9OyAgLy8geG1sIGVxdWl2YWxlbnRzIG9mIHRyYW5zbGF0aW9uIGpzb25zXG5cdCAgdm0uaGFzRXJyb3IgPSBmYWxzZTsgICAgIC8vIGJvb2xlYW4gZGV0ZXJtaW5pbmcgd2hldGhlciB0aGVyZSB3YXMgYSBxdWVyeSBlcnJvclxuXG5cdCAgLy8gYmluZGFibGUgbWV0aG9kc1xuXHQgIHZtLmlzRW1wdHkgPSBfLmlzRW1wdHk7XG5cdCAgdm0uaXNTdHJpbmcgPSBfLmlzU3RyaW5nO1xuXHQgIHZtLmNvbGxhcHNlQWxsID0gY29sbGFwc2VBbGw7XG5cdCAgdm0uaXNGYXZvdXJpdGVkID0gaXNGYXZvdXJpdGVkO1xuXHQgIHZtLmFkZEZhdm91cml0ZSA9IGFkZEZhdm91cml0ZTtcblx0ICB2bS51cGRhdGVPYmplY3QgPSB1cGRhdGVPYmplY3Q7XG5cdCAgdm0ud3JpdGVPYmplY3RCeUtleSA9IHdyaXRlT2JqZWN0QnlLZXk7XG5cdCAgdm0uZGVsZXRlT2JqZWN0QnlLZXkgPSBkZWxldGVPYmplY3RCeUtleTtcblx0ICB2bS51cGRhdGVUcmFuc2xhdGlvbnMgPSB1cGRhdGVUcmFuc2xhdGlvbnM7XG5cdCAgdm0uZmluZEJ5S2V5ID0gZmluZEJ5S2V5O1xuXHQgIHZtLmFyZVRyYW5zbGF0aW9uc1ZhbGlkID0gYXJlVHJhbnNsYXRpb25zVmFsaWQ7XG5cdCAgdm0uY2FsbGJhY2tVcGRhdGUgPSBjYWxsYmFja1VwZGF0ZTtcblx0ICB2bS5jYWxsYmFja1JlbW92ZSA9IGNhbGxiYWNrUmVtb3ZlO1xuXHQgIHZtLmNhbGxiYWNrU2F2ZSA9IGNhbGxiYWNrU2F2ZTtcblxuXHQgIGluaXQoKTtcblxuXHQgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXHQgIC8qKlxuXHQgICAqIFByaXZhdGUgTWV0aG9kc1xuXHQgICAqL1xuXG5cdCAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICBcdHZtLmluc2VydE5ld09iamVjdFtsYW5nXSA9IGZhbHNlO1xuXHQgICAgXHR2bS50YWJzW2xhbmddID0ge1xuXHQgICAgXHRcdCRpc09wZW46IGZhbHNlXG5cdCAgICBcdH07XG5cdCAgICAgIHZtLmJpbmRpbmdzW2xhbmddID0ge1xuXHQgICAgICAgIGZvcm1zOiBbXVxuXHQgICAgICB9O1xuXHQgICAgICB2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcblx0ICAgIH0pO1xuXHQgICAgaWYgKCFfLmlzRW1wdHkodm0uYmFzZVBhdGgpKSB7XG5cdCAgICAgIHZtLnNlYXJjaCA9IHZtLmJhc2VQYXRoO1xuXHQgICAgICBmaW5kQnlLZXkodm0uYmFzZVBhdGgpO1xuXHQgICAgfVxuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIHN5bmNKc29uVG9YTUwoKSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgICB2bS54bWxEZWZpbml0aW9uc1tsYW5nXSA9IEpTT04udG9YTUwodm0udHJhbnNsYXRpb25zW2xhbmddKTtcblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGNsZWFyQmluZGluZ3MoKSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZykge1xuXHQgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3JtcyA9IFtdO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gaXNGbGF0KG9iamVjdCkge1xuXHQgIFx0cmV0dXJuIF8uYWxsKG9iamVjdCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIF8uaXNTdHJpbmcodmFsdWUpO1xuICAgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBwYXRoKSB7XG5cdCAgICB2YXIgY3VyciA9IG9iamVjdDtcblx0ICAgIF8uZWFjaChwYXRoLCBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIGN1cnIgPSBjdXJyW2tleV07XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBjdXJyO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGdldFBhdGhUb05vZGUobm9kZSwgcGF0aCkge1xuXHQgICAgcGF0aCA9IHBhdGggfHwgW107XG5cdCAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHBhdGggPSBnZXRQYXRoVG9Ob2RlKG5vZGUucGFyZW50Tm9kZSwgcGF0aCk7XG5cdCAgICB9XG5cblx0ICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZykge1xuXHQgICAgICB2YXIgY291bnQgPSAxO1xuXHQgICAgICB2YXIgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgICBkbyB7XG5cdCAgICAgICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT0gMSAmJiBzaWJsaW5nLm5vZGVOYW1lID09IG5vZGUubm9kZU5hbWUpIHsgY291bnQrKzsgfVxuXHQgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzU2libGluZztcblx0ICAgICAgfSB3aGlsZShzaWJsaW5nKTtcblx0ICAgICAgaWYgKGNvdW50ID09IDEpIHsgY291bnQgPSBudWxsOyB9XG5cdCAgICB9IGVsc2UgaWYobm9kZS5uZXh0U2libGluZykge1xuXHQgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgICBkbyB7XG5cdCAgICAgICAgaWYgKG5leHRTaWJsaW5nLm5vZGVUeXBlID09IDEgJiYgbmV4dFNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZSkge1xuXHQgICAgICAgICAgbmV4dFNpYmxpbmcgPSBudWxsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gd2hpbGUobmV4dFNpYmxpbmcpO1xuXHQgICAgfVxuXG5cdCAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG5cdCAgICAgIHBhdGgucHVzaChub2RlLm5vZGVOYW1lKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIFB1YmxpYyBNZXRob2RzXG5cdCAgICovXG5cblx0ICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuXHQgIFx0cmV0dXJuIHZtLmxhbmd1YWdlcztcblx0ICB9LCBmdW5jdGlvbiAoY3Vyciwgb3JpZykge1xuXHQgIFx0aWYgKGN1cnIgIT0gb3JpZykge1xuXHQgIFx0XHRpbml0KCk7IC8vIHJlLWluaXRpYWxpemUgYmluZGluZ3Mgd2hlbiBsYW5ndWFnZXMgYXJlIGFkZGVkL3JlbW92ZWRcblx0ICBcdH1cblx0ICB9LCB0cnVlKTtcblxuXHQgIGZ1bmN0aW9uIGNvbGxhcHNlQWxsKCkge1xuXHQgIFx0Xy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdFx0XHRcdHZtLnRhYnNbbGFuZ3VhZ2VdLiRpc09wZW4gPSB2bS5pc0FsbENvbGxhcHNlZDtcblx0ICBcdH0pO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGlzRmF2b3VyaXRlZChxdWVyeSkge1xuXHQgIFx0cmV0dXJuIF8uY29udGFpbnMoXy5wbHVjayh2bS5xdWVyaWVzLCAnc2VhcmNoJyksIHF1ZXJ5KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBhZGRGYXZvdXJpdGUocXVlcnkpIHtcblx0ICBcdGlmIChpc0Zhdm91cml0ZWQocXVlcnkpKSB7XG5cdCAgXHRcdHZtLnF1ZXJpZXMgPSBfLnJlamVjdCh2bS5xdWVyaWVzLCB7IHNlYXJjaDogcXVlcnkgfSk7XG5cdCAgXHR9IGVsc2Uge1xuXHQgIFx0XHR2YXIgbGFiZWwgPSBwcm9tcHQoXCJQbGVhc2UgZW50ZXIgYSBsYWJlbDogXCIsIHF1ZXJ5KTtcblx0ICBcdFx0aWYgKCFfLmlzRW1wdHkobGFiZWwpKSB7XG5cdCAgXHRcdFx0dm0ucXVlcmllcy5wdXNoKHtcblx0ICBcdFx0XHRcdGxhYmVsOiBsYWJlbCxcblx0ICBcdFx0XHRcdHNlYXJjaDogcXVlcnlcblx0ICBcdFx0XHR9KTtcblx0ICBcdFx0fVxuXHQgIFx0fVxuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIHVwZGF0ZU9iamVjdFxuXHQgICAqIEBkZXNjcmlwdGlvbiBHaXZlbiBhIGZsYXQganNvbiBvYmplY3QsIHVwZGF0ZXMgYW5kIHN5bmNzIGEgcGFydGljdWxhciBrZXkvdmFsdWUgcGFpclxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIHVwZGF0ZU9iamVjdChvYmplY3QsIGZvcm0sIGtleSwgdmFsdWUpIHtcblx0ICAgIHZhciBjdXJyID0gdHJhdmVyc2VPYmplY3Qob2JqZWN0LCBmb3JtLnBhdGgpO1xuXHQgICAgY3VycltrZXldID0gdmFsdWU7XG5cdCAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgIGN1cnIgPSBudWxsO1xuXG5cdCAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHQgICAgc3luY0pzb25Ub1hNTCgpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIHdyaXRlT2JqZWN0QnlLZXlcblx0ICAgKiBAZGVzY3JpcHRpb24gV3JpdGVzIGEgbmV3IHZhbHVlIHRvIGFuIG9iamVjdCBieSB0cmF2ZXJzaW5nIGRvd24gdGhyb3VnaCBhIHBhdGhcblx0ICAgKiAgICAgICAgICAgICAgdGhlbiB3cml0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleVxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIHdyaXRlT2JqZWN0QnlLZXkob2JqZWN0LCBmb3JtKSB7XG5cdCAgICAvLyB1cGRhdGUgZm9yIGZvcm0gaW4gY3VycmVudCBsYW5ndWFnZVxuXHQgICAgdmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG5cdCAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHQgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0ICAgIC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcblx0ICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuXHQgICAgY3VyciA9IG51bGw7XG5cblx0ICAgIC8vIGNoZWNrIG90aGVyIGxhbmd1YWdlcyBmb3Iga2V5IGFuZCBmaWxsIHdpdGggdmFsdWUgaWYgbm90IGV4aXN0c1xuXHQgICAgXy5lYWNoKF8ud2l0aG91dCh2bS5sYW5ndWFnZXMsIGZvcm0ubGFuZyksIGZ1bmN0aW9uIChsYW5ndWFnZSkge1xuXHQgICAgICBjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgZm9ybS5wYXRoKTtcblx0ICAgICAgaWYgKCFfLmhhcyhjdXJyLCB2bS5uZXdLZXkpKSB7XG5cdCAgICAgICAgY3Vyclt2bS5uZXdLZXldID0gKHZtLmluc2VydE5ld09iamVjdFtmb3JtLmxhbmddKSA/IHt9IDogZm9ybS5uZXdWYWx1ZTtcblx0ICAgICAgICBfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdCAgICAgICAgICAvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdCAgICAgICAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIC8vIGNsZWFyIGlucHV0c1xuXHQgICAgZGVsZXRlIHZtLm5ld0tleTtcblx0ICAgIGRlbGV0ZSBmb3JtLm5ld1ZhbHVlO1xuXG5cdCAgICAvLyBzeW5jIGNoYW5nZWQganNvbiBiYWNrIHRvIHhtbCBtb2RlbFxuXHQgICAgc3luY0pzb25Ub1hNTCgpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGRlbGV0ZU9iamVjdEJ5S2V5XG5cdCAgICogQGRlc2NyaXB0aW9uIERlbGV0ZXMgYSB2YWx1ZSBnaXZlbiBhIGtleSBpbiBhIGZsYXQganNvbiBvYmplY3Rcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBkZWxldGVPYmplY3RCeUtleShpbnB1dEZvcm0sIGtleSkge1xuXHQgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdCAgICBcdHZhciBjdXJyO1xuXHQgICAgXHRpZiAoIWtleSkge1xuXHRcdFx0XHRcdGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBpbnB1dEZvcm0ucGF0aC5zbGljZSgwLCAtMSkpO1xuXHRcdCAgICAgIC8vIHNldCBuZXcga2V5IHZhbHVlXG5cdFx0ICAgICAgZGVsZXRlIGN1cnJbXy5sYXN0KGlucHV0Rm9ybS5wYXRoKV07XG5cdCAgICBcdH0gZWxzZSB7XG5cdFx0ICAgIFx0Y3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGlucHV0Rm9ybS5wYXRoKTtcblx0XHQgICAgICAvLyBzZXQgbmV3IGtleSB2YWx1ZVxuXHRcdCAgICAgIGRlbGV0ZSBjdXJyW2tleV07XG5cdCAgICBcdH1cblxuXHQgICAgXHRfLm1hcCh2bS5iaW5kaW5nc1tsYW5ndWFnZV0uZm9ybXMsIGZ1bmN0aW9uIChmb3JtKSB7XG5cdCAgICAgIFx0aWYgKGZvcm0ubGFiZWwgPT0gaW5wdXRGb3JtLmxhYmVsKSB7XG5cdFx0ICAgICAgXHQvLyB1cGRhdGUganNvbiBpbiBwcmV2aWV3XG5cdFx0ICAgICAgICBmb3JtLnZhbHVlID0gY3Vycjtcblx0ICAgICAgXHR9XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cblx0ICAgIGlmICgha2V5KSB7IC8vIGlmIG5vIGtleSBnaXZlbiwgcmVtb3ZpbmcgZW1wdHkgb2JqZWN0IGFuZCByZXNldFxuXHQgICAgXHRkZWxldGUgdm0uc2VhcmNoO1xuXHQgICAgXHRpbml0KCk7XG5cdCAgICB9XG5cblx0ICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG5cdCAgICBzeW5jSnNvblRvWE1MKCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gdXBkYXRlVHJhbnNsYXRpb25zKGZvcm0pIHtcblx0ICAgIGZvcm0uZWxlbWVudC5pbm5lckhUTUwgPSBmb3JtLnZhbHVlO1xuXHQgICAgdmFyIHVwZGF0ZWRKU09OID0gRGVmaWFudC5ub2RlLnRvSlNPTih2bS54bWxEZWZpbml0aW9uc1tmb3JtLmxhbmddKTtcblx0ICAgIGFuZ3VsYXIuY29weSh1cGRhdGVkSlNPTiwgdm0udHJhbnNsYXRpb25zW2Zvcm0ubGFuZ10pO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGZpbmRCeUtleVxuXHQgICAqIEBkZXNjcmlwdGlvbiBNYWluIHF1ZXJ5IGZ1bmN0aW9uIGZvciBldmFsdWF0aW5nIHhQYXRoIHF1ZXJpZXMgYWdhaW5zdFxuXHQgICAqICAgICAgICAgICAgICBKU09OIHRyYW5zbGF0aW9uIG9iamVjdHMuXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZmluZEJ5S2V5KHF1ZXJ5KSB7XG5cdCAgICBkZWxldGUgdm0ubmV3S2V5O1xuXHQgICAgaWYgKCFxdWVyeSkge1xuXHQgICAgICB2bS5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICBjbGVhckJpbmRpbmdzKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHF1ZXJ5ID0gYW5ndWxhci51cHBlcmNhc2UocXVlcnkpO1xuXHQgICAgICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICAgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3JtcyA9IFtdO1xuXHQgICAgICAgICAgdmFyIG5vZGVzID0gRGVmaWFudC5ub2RlLnNlbGVjdE5vZGVzKHZtLnhtbERlZmluaXRpb25zW2xhbmddLCBxdWVyeSk7XG5cdCAgICAgICAgICBfLmVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlLCBpZHgpIHtcblx0ICAgICAgICAgICAgdmFyIG5vZGVWYWwgPSBEZWZpYW50Lm5vZGUudG9KU09OKG5vZGUpO1xuXHQgICAgICAgICAgICB2YXIgcGF0aCA9IGdldFBhdGhUb05vZGUobm9kZSkuc2xpY2UoMSk7XG5cdCAgICAgICAgICAgIHZhciBmb3JtID0ge1xuXHQgICAgICAgICAgICAgIGxhbmc6IGxhbmcsXG5cdCAgICAgICAgICAgICAgbGFiZWw6IHBhdGguam9pbihcIi5cIiksXG5cdCAgICAgICAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICAgICAgICBoYXNJbnB1dDogKHR5cGVvZiBub2RlICE9PSAnb2JqZWN0JyksXG5cdCAgICAgICAgICAgICAgaXNGbGF0OiBfLmFsbChub2RlVmFsLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGlzRmxhdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgICAgdmFsdWU6IG5vZGVWYWwsXG5cdCAgICAgICAgICAgICAgZWxlbWVudDogbm9kZVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAvLyBvbmx5IGFsbG93IG5vbiBhcnJheS9vYmplY3RzIHRvIGJlIGVkaXRhYmxlXG5cdCAgICAgICAgICAgIGZvcm0uaGFzSW5wdXQgPSAodHlwZW9mIG5vZGVWYWwgIT0gJ29iamVjdCcpO1xuXHQgICAgICAgICAgICB2bS5iaW5kaW5nc1tsYW5nXS5mb3Jtcy5wdXNoKGZvcm0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2bS5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGVycikgeyAvLyBxdWVyeSBpbnZhbGlkLCBzbyBjbGVhciBiaW5kaW5nc1xuXHQgICAgICAgIHZtLmhhc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICBjbGVhckJpbmRpbmdzKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBhcmVUcmFuc2xhdGlvbnNWYWxpZFxuXHQgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRydWUgaWYgZm9ybXMgaGF2ZSBhbGwgdGhlaXIgdHJhbnNsYXRlZCB2YWx1ZXMgZmlsbGVkIG91dFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gYXJlVHJhbnNsYXRpb25zVmFsaWQoKSB7XG5cdCAgXHRyZXR1cm4gXy5hbGwodm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcblx0ICBcdFx0cmV0dXJuIF8uYWxsKHZtLmJpbmRpbmdzW2xhbmd1YWdlXS5mb3JtcywgZnVuY3Rpb24gKGZvcm0pIHtcblx0ICBcdFx0XHRyZXR1cm4gIV8uaXNFbXB0eShmb3JtLnZhbHVlKTtcblx0ICBcdFx0fSk7XG5cdCAgXHR9KTtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBjYWxsYmFja1VwZGF0ZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBJbnZva2VzIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHVwZGF0ZSBzcGVjaWZpYyBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBjYWxsYmFja1VwZGF0ZShsYW5ndWFnZSwgZXZlbnQpIHtcblx0ICBcdGlmIChldmVudCkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0ICBcdHJldHVybiB2bS5vblVwZGF0ZShsYW5ndWFnZSk7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogY2FsbGJhY2tSZW1vdmVcblx0ICAgKiBAZGVzY3JpcHRpb24gSW52b2tlcyBjYWxsYmFjayBmdW5jdGlvbiB0byByZW1vdmUgc3BlY2lmaWMgbGFuZ3VhZ2UgdHJhbnNsYXRpb25zXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUobGFuZ3VhZ2UsIGV2ZW50KSB7XG5cdCAgXHRpZiAoZXZlbnQpIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdCAgXHRyZXR1cm4gdm0ub25SZW1vdmUobGFuZ3VhZ2UpO1xuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGNhbGxiYWNrU2F2ZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBJbnZva2VzIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHNhdmUgYWxsIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGNhbGxiYWNrU2F2ZShldmVudCkge1xuXHQgIFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHQgIFx0cmV0dXJuIHZtLm9uU2F2ZSgpO1xuXHQgIH1cblx0fVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"row\"><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-disabled=\"!locale.areTranslationsValid()\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n							\'glyphicon-star\': !locale.isFavourited(locale.search),\n							\'glyphicon-star-empty\': locale.isFavourited(locale.search)\n						}\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-disabled=\"!locale.areTranslationsValid()\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button> <button type=\"button\" ng-disabled=\"!locale.areTranslationsValid()\" class=\"btn btn-success pull-right btn-sm\" ng-click=\"locale.callbackSave($event)\">Save All Changes</button></div><div class=\"row\"><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Expand All</label></div></div><hr><accordion ng-if=\"!locale.hasError\" close-others=\"false\"><accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-if=\"locale.hasRemoveFn\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></accordion-heading><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><!-- Direct Access to Key --><div ng-if=\"form.hasInput\" ng-class=\"{ \'has-error\': !form.value }\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small></div><!-- Inference of Translation Module --><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><!-- String Fields --><div ng-if=\"locale.isString(value)\" class=\"input-group\" ng-class=\"{ \'has-error\': !form.value }\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><!-- Object Field --><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\" ng-class=\"{ \'has-error\': !form.value }\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\" required> <small ng-if=\"!form.value\" class=\"pull-right text-danger\">Missing Translation!</small> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></accordion-group></accordion></div>");}]);