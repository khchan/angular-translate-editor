!function(){"use strict";function e(){return{restrict:"E",scope:{basePath:"@",languages:"=",translations:"=",queries:"=",onUpdate:"=",onRemove:"="},replace:!0,templateUrl:"translate-editor.tpl.html",controller:"TranslateEditorController",controllerAs:"locale",bindToController:!0}}function n(e){function n(){_.each(m.languages,function(e){m.insertNewObject[e]=!1,m.tabs[e]={$isOpen:!1},m.bindings[e]={forms:[]},m.xmlDefinitions[e]=JSON.toXML(m.translations[e])}),_.isEmpty(m.basePath)||(m.search=m.basePath,g(m.basePath))}function t(){_.each(m.languages,function(e){m.xmlDefinitions[e]=JSON.toXML(m.translations[e])})}function a(){_.each(m.languages,function(e){m.bindings[e].forms=[]})}function i(e){return _.all(e,function(e,n){return _.isString(e)})}function o(e,n){var t=e;return _.each(n,function(e){t=t[e]}),t}function l(e,n){if(n=n||[],e.parentNode&&(n=l(e.parentNode,n)),e.previousSibling){var t=1,a=e.previousSibling;do 1==a.nodeType&&a.nodeName==e.nodeName&&t++,a=a.previousSibling;while(a);1==t&&(t=null)}else if(e.nextSibling){var i=e.nextSibling;do i=1==i.nodeType&&i.nodeName==e.nodeName?null:i.previousSibling;while(i)}return 1==e.nodeType&&n.push(e.nodeName),n}function s(){_.each(m.languages,function(e){m.tabs[e].$isOpen=m.isAllCollapsed})}function r(e){return _.contains(_.pluck(m.queries,"search"),e)}function u(e){if(r(e))m.queries=_.reject(m.queries,{search:e});else{var n=prompt("Please enter a label: ",e);_.isEmpty(n)||m.queries.push({label:n,search:e})}}function c(e,n,a,i){var l=o(e,n.path);l[a]=i,n.value=l,l=null,t()}function p(e,n){var a=o(e,n.path);a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,n.value=a,a=null,_.each(_.without(m.languages,n.lang),function(e){a=o(m.translations[e],n.path),_.has(a,m.newKey)||(a[m.newKey]=m.insertNewObject[n.lang]?{}:n.newValue,_.map(m.bindings[e].forms,function(e){e.value=a}))}),delete m.newKey,delete n.newValue,t()}function f(e,a){_.each(m.languages,function(n){var t;a?(t=o(m.translations[n],e.path),delete t[a]):(t=o(m.translations[n],e.path.slice(0,-1)),delete t[_.last(e.path)]),_.map(m.bindings[n].forms,function(n){n.label==e.label&&(n.value=t)})}),a||(delete m.search,n()),t()}function d(e){e.element.innerHTML=e.value;var n=Defiant.node.toJSON(m.xmlDefinitions[e.lang]);angular.copy(n,m.translations[e.lang])}function g(e){if(delete m.newKey,e)try{e=angular.uppercase(e),_.each(m.languages,function(n){m.bindings[n].forms=[];var t=Defiant.node.selectNodes(m.xmlDefinitions[n],e);_.each(t,function(e,t){var a=Defiant.node.toJSON(e),o=l(e).slice(1),s={lang:n,label:o.join("."),path:o,hasInput:"object"!=typeof e,isFlat:_.all(a,function(e,n){return i(e)}),value:a,element:e};s.hasInput="object"!=typeof a,m.bindings[n].forms.push(s)}),m.hasError=!1})}catch(n){m.hasError=!0,a()}else m.hasError=!1,a()}function h(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onUpdate(e)}function b(e,n){return n&&(n.preventDefault(),n.stopPropagation()),m.onRemove(e)}var m=this;m.basePath=m.basePath||"",m.languages=m.languages||[],m.translations=m.translations||{},m.queries=m.queries||[],m.hasUpdateFn=_.isFunction(m.onUpdate),m.hasRemoveFn=_.isFunction(m.onRemove),m.onUpdate=m.onUpdate||angular.noop(),m.onRemove=m.onRemove||angular.noop(),m.tabs={},m.insertNewObject={},m.bindings={},m.xmlDefinitions={},m.hasError=!1,m.isEmpty=_.isEmpty,m.isString=_.isString,m.collapseAll=s,m.isFavourited=r,m.addFavourite=u,m.updateObject=c,m.writeObjectByKey=p,m.deleteObjectByKey=f,m.updateTranslations=d,m.findByKey=g,m.callbackUpdate=h,m.callbackRemove=b,n(),e.$watch(function(){return m.languages},function(e,t){e!=t&&n()},!0)}angular.module("khchan.translate-editor",["ui.bootstrap","angular-translate-templates"]).directive("translateEditor",e).controller("TranslateEditorController",n),e.$inject=[],n.$inject=["$scope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJ0cmFuc2xhdGVFZGl0b3IiLCJyZXN0cmljdCIsInNjb3BlIiwiYmFzZVBhdGgiLCJsYW5ndWFnZXMiLCJ0cmFuc2xhdGlvbnMiLCJxdWVyaWVzIiwib25VcGRhdGUiLCJvblJlbW92ZSIsInJlcGxhY2UiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlciIsIiRzY29wZSIsImluaXQiLCJfIiwiZWFjaCIsInZtIiwibGFuZyIsImluc2VydE5ld09iamVjdCIsInRhYnMiLCIkaXNPcGVuIiwiYmluZGluZ3MiLCJmb3JtcyIsInhtbERlZmluaXRpb25zIiwiSlNPTiIsInRvWE1MIiwiaXNFbXB0eSIsInNlYXJjaCIsImZpbmRCeUtleSIsInN5bmNKc29uVG9YTUwiLCJjbGVhckJpbmRpbmdzIiwiaXNGbGF0Iiwib2JqZWN0IiwiYWxsIiwidmFsdWUiLCJrZXkiLCJpc1N0cmluZyIsInRyYXZlcnNlT2JqZWN0IiwicGF0aCIsImN1cnIiLCJnZXRQYXRoVG9Ob2RlIiwibm9kZSIsInBhcmVudE5vZGUiLCJwcmV2aW91c1NpYmxpbmciLCJjb3VudCIsInNpYmxpbmciLCJub2RlVHlwZSIsIm5vZGVOYW1lIiwibmV4dFNpYmxpbmciLCJwdXNoIiwiY29sbGFwc2VBbGwiLCJsYW5ndWFnZSIsImlzQWxsQ29sbGFwc2VkIiwiaXNGYXZvdXJpdGVkIiwicXVlcnkiLCJjb250YWlucyIsInBsdWNrIiwiYWRkRmF2b3VyaXRlIiwicmVqZWN0IiwibGFiZWwiLCJwcm9tcHQiLCJ1cGRhdGVPYmplY3QiLCJmb3JtIiwid3JpdGVPYmplY3RCeUtleSIsIm5ld0tleSIsIm5ld1ZhbHVlIiwid2l0aG91dCIsImhhcyIsIm1hcCIsImRlbGV0ZU9iamVjdEJ5S2V5IiwiaW5wdXRGb3JtIiwic2xpY2UiLCJsYXN0IiwidXBkYXRlVHJhbnNsYXRpb25zIiwiZWxlbWVudCIsImlubmVySFRNTCIsInVwZGF0ZWRKU09OIiwiRGVmaWFudCIsInRvSlNPTiIsImFuZ3VsYXIiLCJjb3B5IiwidXBwZXJjYXNlIiwibm9kZXMiLCJzZWxlY3ROb2RlcyIsImlkeCIsIm5vZGVWYWwiLCJqb2luIiwiaGFzSW5wdXQiLCJoYXNFcnJvciIsImVyciIsImNhbGxiYWNrVXBkYXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbGxiYWNrUmVtb3ZlIiwidGhpcyIsImhhc1VwZGF0ZUZuIiwiaXNGdW5jdGlvbiIsImhhc1JlbW92ZUZuIiwibm9vcCIsIiR3YXRjaCIsIm9yaWciLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkaW5qZWN0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBU0EsU0FBU0EsS0FDUCxPQUNFQyxTQUFVLElBQ1ZDLE9BQ0NDLFNBQVUsSUFDVEMsVUFBVyxJQUNYQyxhQUFjLElBQ2RDLFFBQVMsSUFDVEMsU0FBVSxJQUNWQyxTQUFVLEtBRVpDLFNBQVMsRUFDVEMsWUFBYSw0QkFDYkMsV0FBWSw0QkFDWkMsYUFBYyxTQUNkQyxrQkFBa0IsR0FJdEIsUUFBU0MsR0FBMEJDLEdBMENqQyxRQUFTQyxLQUNQQyxFQUFFQyxLQUFLQyxFQUFHZixVQUFXLFNBQVVnQixHQUM5QkQsRUFBR0UsZ0JBQWdCRCxJQUFRLEVBQzNCRCxFQUFHRyxLQUFLRixJQUNQRyxTQUFTLEdBRVRKLEVBQUdLLFNBQVNKLElBQ1ZLLFVBRUZOLEVBQUdPLGVBQWVOLEdBQVFPLEtBQUtDLE1BQU1ULEVBQUdkLGFBQWFlLE1BRWxESCxFQUFFWSxRQUFRVixFQUFHaEIsWUFDaEJnQixFQUFHVyxPQUFTWCxFQUFHaEIsU0FDZjRCLEVBQVVaLEVBQUdoQixXQUlqQixRQUFTNkIsS0FDUGYsRUFBRUMsS0FBS0MsRUFBR2YsVUFBVyxTQUFVZ0IsR0FDN0JELEVBQUdPLGVBQWVOLEdBQVFPLEtBQUtDLE1BQU1U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QUFpQkEsRUFDcEIxRSxFQUFHOEUsZUFBaUJBLEVBRXBCakYsSUFzRkFELEVBQU93RixPQUFPLFdBQ2IsTUFBT3BGLEdBQUdmLFdBQ1IsU0FBVXNDLEVBQU04RCxHQUNkOUQsR0FBUThELEdBQ1h4RixNQUVDLEdBekpMa0UsUUFDR3VCLE9BQU8sMkJBQTRCLGVBQWdCLGdDQUNuREMsVUFBVSxrQkFBbUIxRyxHQUM3QlcsV0FBVyw0QkFBNkJHLEdBRTNDZCxFQUFnQjJHLFdBQ2hCN0YsRUFBMEI2RixTQUFXIiwiZmlsZSI6ImFuZ3VsYXItdHJhbnNsYXRlLWVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyXG5cdCAgLm1vZHVsZSgna2hjaGFuLnRyYW5zbGF0ZS1lZGl0b3InLCBbJ3VpLmJvb3RzdHJhcCcsICdhbmd1bGFyLXRyYW5zbGF0ZS10ZW1wbGF0ZXMnXSlcblx0ICAuZGlyZWN0aXZlKCd0cmFuc2xhdGVFZGl0b3InLCB0cmFuc2xhdGVFZGl0b3IpXG5cdCAgLmNvbnRyb2xsZXIoJ1RyYW5zbGF0ZUVkaXRvckNvbnRyb2xsZXInLCBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKTtcblxuXHR0cmFuc2xhdGVFZGl0b3IuJGluamVjdCA9IFtdO1xuXHRUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xuXG5cdGZ1bmN0aW9uIHRyYW5zbGF0ZUVkaXRvcigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgIHNjb3BlOiB7XG5cdCAgICBcdGJhc2VQYXRoOiAnQCcsXHRcdFx0IC8vIGluaXRpYWwgYmFzZSBwYXRoIHRvIHByZS1sb2FkIHNlYXJjaFxuXHQgICAgICBsYW5ndWFnZXM6ICc9JywgICAgICAvLyBhcnJheSBvZiBhbGxvd2FibGUgbG9jYWxlc1xuXHQgICAgICB0cmFuc2xhdGlvbnM6ICc9JywgICAvLyBkaWN0aW9uYXJ5IG9mIGxhbmd1YWdlLXRyYW5zbGF0aW9uc1xuXHQgICAgICBxdWVyaWVzOiAnPScsICAgICAgICAvLyBwcmVkZWZpbmVkIHF1ZXJpZXMgdG8gYnVpbGQgYnV0dG9ucyBvblxuXHQgICAgICBvblVwZGF0ZTogJz0nLFx0XHRcdCAvLyBjYWxsYmFjayBvbiB1cGRhdGUgb25lXG5cdCAgICAgIG9uUmVtb3ZlOiAnPSdcdFx0XHRcdCAvLyBjYWxsYmFjayBvbiByZW1vdmUgb25lXG5cdCAgICB9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZSxcblx0ICAgIHRlbXBsYXRlVXJsOiAndHJhbnNsYXRlLWVkaXRvci50cGwuaHRtbCcsXG5cdCAgICBjb250cm9sbGVyOiAnVHJhbnNsYXRlRWRpdG9yQ29udHJvbGxlcicsXG5cdCAgICBjb250cm9sbGVyQXM6ICdsb2NhbGUnLFxuXHQgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHQgIH07XG5cdH1cblxuXHRmdW5jdGlvbiBUcmFuc2xhdGVFZGl0b3JDb250cm9sbGVyKCRzY29wZSkge1xuXHQgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAvLyBmcm9tIGRpcmVjdGl2ZVxuXHQgIHZtLmJhc2VQYXRoID0gdm0uYmFzZVBhdGggfHwgXCJcIjtcblx0ICB2bS5sYW5ndWFnZXMgPSB2bS5sYW5ndWFnZXMgfHwgW107XG5cdCAgdm0udHJhbnNsYXRpb25zID0gdm0udHJhbnNsYXRpb25zIHx8IHt9O1xuXHQgIHZtLnF1ZXJpZXMgPSB2bS5xdWVyaWVzIHx8IFtdO1xuXHQgIHZtLmhhc1VwZGF0ZUZuID0gXy5pc0Z1bmN0aW9uKHZtLm9uVXBkYXRlKTtcblx0ICB2bS5oYXNSZW1vdmVGbiA9IF8uaXNGdW5jdGlvbih2bS5vblJlbW92ZSk7XG5cdCAgdm0ub25VcGRhdGUgPSB2bS5vblVwZGF0ZSB8fCBhbmd1bGFyLm5vb3AoKTtcblx0ICB2bS5vblJlbW92ZSA9IHZtLm9uUmVtb3ZlIHx8IGFuZ3VsYXIubm9vcCgpO1xuXG5cdCAgLy8gYmluZGFibGUgdmFyaWFibGVzXG5cdCAgdm0udGFicyA9IHt9O1xuXHQgIHZtLmluc2VydE5ld09iamVjdCA9IHt9O1xuXHQgIHZtLmJpbmRpbmdzID0ge307ICAgICAgICAvLyBzdG9yZXMgcmVzdWx0cyBvZiB4UGF0aCBxdWVyeVxuXHQgIHZtLnhtbERlZmluaXRpb25zID0ge307ICAvLyB4bWwgZXF1aXZhbGVudHMgb2YgdHJhbnNsYXRpb24ganNvbnNcblx0ICB2bS5oYXNFcnJvciA9IGZhbHNlOyAgICAgLy8gYm9vbGVhbiBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZXJlIHdhcyBhIHF1ZXJ5IGVycm9yXG5cblx0ICAvLyBiaW5kYWJsZSBtZXRob2RzXG5cdCAgdm0uaXNFbXB0eSA9IF8uaXNFbXB0eTtcblx0ICB2bS5pc1N0cmluZyA9IF8uaXNTdHJpbmc7XG5cdCAgdm0uY29sbGFwc2VBbGwgPSBjb2xsYXBzZUFsbDtcblx0ICB2bS5pc0Zhdm91cml0ZWQgPSBpc0Zhdm91cml0ZWQ7XG5cdCAgdm0uYWRkRmF2b3VyaXRlID0gYWRkRmF2b3VyaXRlO1xuXHQgIHZtLnVwZGF0ZU9iamVjdCA9IHVwZGF0ZU9iamVjdDtcblx0ICB2bS53cml0ZU9iamVjdEJ5S2V5ID0gd3JpdGVPYmplY3RCeUtleTtcblx0ICB2bS5kZWxldGVPYmplY3RCeUtleSA9IGRlbGV0ZU9iamVjdEJ5S2V5O1xuXHQgIHZtLnVwZGF0ZVRyYW5zbGF0aW9ucyA9IHVwZGF0ZVRyYW5zbGF0aW9ucztcblx0ICB2bS5maW5kQnlLZXkgPSBmaW5kQnlLZXk7XG5cdCAgdm0uY2FsbGJhY2tVcGRhdGUgPSBjYWxsYmFja1VwZGF0ZTtcblx0ICB2bS5jYWxsYmFja1JlbW92ZSA9IGNhbGxiYWNrUmVtb3ZlO1xuXG5cdCAgaW5pdCgpO1xuXG5cdCAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cdCAgLyoqXG5cdCAgICogUHJpdmF0ZSBNZXRob2RzXG5cdCAgICovXG5cblx0ICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmcpIHtcblx0ICAgIFx0dm0uaW5zZXJ0TmV3T2JqZWN0W2xhbmddID0gZmFsc2U7XG5cdCAgICBcdHZtLnRhYnNbbGFuZ10gPSB7XG5cdCAgICBcdFx0JGlzT3BlbjogZmFsc2Vcblx0ICAgIFx0fTtcblx0ICAgICAgdm0uYmluZGluZ3NbbGFuZ10gPSB7XG5cdCAgICAgICAgZm9ybXM6IFtdXG5cdCAgICAgIH07XG5cdCAgICAgIHZtLnhtbERlZmluaXRpb25zW2xhbmddID0gSlNPTi50b1hNTCh2bS50cmFuc2xhdGlvbnNbbGFuZ10pO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoIV8uaXNFbXB0eSh2bS5iYXNlUGF0aCkpIHtcblx0ICAgICAgdm0uc2VhcmNoID0gdm0uYmFzZVBhdGg7XG5cdCAgICAgIGZpbmRCeUtleSh2bS5iYXNlUGF0aCk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gc3luY0pzb25Ub1hNTCgpIHtcblx0ICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICAgIHZtLnhtbERlZmluaXRpb25zW2xhbmddID0gSlNPTi50b1hNTCh2bS50cmFuc2xhdGlvbnNbbGFuZ10pO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gY2xlYXJCaW5kaW5ncygpIHtcblx0ICAgIF8uZWFjaCh2bS5sYW5ndWFnZXMsIGZ1bmN0aW9uIChsYW5nKSB7XG5cdCAgICAgIHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zID0gW107XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBpc0ZsYXQob2JqZWN0KSB7XG5cdCAgXHRyZXR1cm4gXy5hbGwob2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gXy5pc1N0cmluZyh2YWx1ZSk7XG4gICAgICB9KTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiB0cmF2ZXJzZU9iamVjdChvYmplY3QsIHBhdGgpIHtcblx0ICAgIHZhciBjdXJyID0gb2JqZWN0O1xuXHQgICAgXy5lYWNoKHBhdGgsIGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgY3VyciA9IGN1cnJba2V5XTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGN1cnI7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gZ2V0UGF0aFRvTm9kZShub2RlLCBwYXRoKSB7XG5cdCAgICBwYXRoID0gcGF0aCB8fCBbXTtcblx0ICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcblx0ICAgICAgcGF0aCA9IGdldFBhdGhUb05vZGUobm9kZS5wYXJlbnROb2RlLCBwYXRoKTtcblx0ICAgIH1cblxuXHQgICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKSB7XG5cdCAgICAgIHZhciBjb3VudCA9IDE7XG5cdCAgICAgIHZhciBzaWJsaW5nID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAgIGRvIHtcblx0ICAgICAgICBpZiAoc2libGluZy5ub2RlVHlwZSA9PSAxICYmIHNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZSkgeyBjb3VudCsrOyB9XG5cdCAgICAgICAgc2libGluZyA9IHNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgICB9IHdoaWxlKHNpYmxpbmcpO1xuXHQgICAgICBpZiAoY291bnQgPT0gMSkgeyBjb3VudCA9IG51bGw7IH1cblx0ICAgIH0gZWxzZSBpZihub2RlLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHZhciBuZXh0U2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICAgIGRvIHtcblx0ICAgICAgICBpZiAobmV4dFNpYmxpbmcubm9kZVR5cGUgPT0gMSAmJiBuZXh0U2libGluZy5ub2RlTmFtZSA9PSBub2RlLm5vZGVOYW1lKSB7XG5cdCAgICAgICAgICBuZXh0U2libGluZyA9IG51bGw7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSB3aGlsZShuZXh0U2libGluZyk7XG5cdCAgICB9XG5cblx0ICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcblx0ICAgICAgcGF0aC5wdXNoKG5vZGUubm9kZU5hbWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHBhdGg7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogUHVibGljIE1ldGhvZHNcblx0ICAgKi9cblxuXHQgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG5cdCAgXHRyZXR1cm4gdm0ubGFuZ3VhZ2VzO1xuXHQgIH0sIGZ1bmN0aW9uIChjdXJyLCBvcmlnKSB7XG5cdCAgXHRpZiAoY3VyciAhPSBvcmlnKSB7XG5cdCAgXHRcdGluaXQoKTsgLy8gcmUtaW5pdGlhbGl6ZSBiaW5kaW5ncyB3aGVuIGxhbmd1YWdlcyBhcmUgYWRkZWQvcmVtb3ZlZFxuXHQgIFx0fVxuXHQgIH0sIHRydWUpO1xuXG5cdCAgZnVuY3Rpb24gY29sbGFwc2VBbGwoKSB7XG5cdCAgXHRfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcblx0XHRcdFx0dm0udGFic1tsYW5ndWFnZV0uJGlzT3BlbiA9IHZtLmlzQWxsQ29sbGFwc2VkO1xuXHQgIFx0fSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gaXNGYXZvdXJpdGVkKHF1ZXJ5KSB7XG5cdCAgXHRyZXR1cm4gXy5jb250YWlucyhfLnBsdWNrKHZtLnF1ZXJpZXMsICdzZWFyY2gnKSwgcXVlcnkpO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGFkZEZhdm91cml0ZShxdWVyeSkge1xuXHQgIFx0aWYgKGlzRmF2b3VyaXRlZChxdWVyeSkpIHtcblx0ICBcdFx0dm0ucXVlcmllcyA9IF8ucmVqZWN0KHZtLnF1ZXJpZXMsIHsgc2VhcmNoOiBxdWVyeSB9KTtcblx0ICBcdH0gZWxzZSB7XG5cdCAgXHRcdHZhciBsYWJlbCA9IHByb21wdChcIlBsZWFzZSBlbnRlciBhIGxhYmVsOiBcIiwgcXVlcnkpO1xuXHQgIFx0XHRpZiAoIV8uaXNFbXB0eShsYWJlbCkpIHtcblx0ICBcdFx0XHR2bS5xdWVyaWVzLnB1c2goe1xuXHQgIFx0XHRcdFx0bGFiZWw6IGxhYmVsLFxuXHQgIFx0XHRcdFx0c2VhcmNoOiBxdWVyeVxuXHQgIFx0XHRcdH0pO1xuXHQgIFx0XHR9XG5cdCAgXHR9XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogdXBkYXRlT2JqZWN0XG5cdCAgICogQGRlc2NyaXB0aW9uIEdpdmVuIGEgZmxhdCBqc29uIG9iamVjdCwgdXBkYXRlcyBhbmQgc3luY3MgYSBwYXJ0aWN1bGFyIGtleS92YWx1ZSBwYWlyXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gdXBkYXRlT2JqZWN0KG9iamVjdCwgZm9ybSwga2V5LCB2YWx1ZSkge1xuXHQgICAgdmFyIGN1cnIgPSB0cmF2ZXJzZU9iamVjdChvYmplY3QsIGZvcm0ucGF0aCk7XG5cdCAgICBjdXJyW2tleV0gPSB2YWx1ZTtcblx0ICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuXHQgICAgY3VyciA9IG51bGw7XG5cblx0ICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG5cdCAgICBzeW5jSnNvblRvWE1MKCk7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogd3JpdGVPYmplY3RCeUtleVxuXHQgICAqIEBkZXNjcmlwdGlvbiBXcml0ZXMgYSBuZXcgdmFsdWUgdG8gYW4gb2JqZWN0IGJ5IHRyYXZlcnNpbmcgZG93biB0aHJvdWdoIGEgcGF0aFxuXHQgICAqICAgICAgICAgICAgICB0aGVuIHdyaXRlcyBhIHZhbHVlIGdpdmVuIGEga2V5XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gd3JpdGVPYmplY3RCeUtleShvYmplY3QsIGZvcm0pIHtcblx0ICAgIC8vIHVwZGF0ZSBmb3IgZm9ybSBpbiBjdXJyZW50IGxhbmd1YWdlXG5cdCAgICB2YXIgY3VyciA9IHRyYXZlcnNlT2JqZWN0KG9iamVjdCwgZm9ybS5wYXRoKTtcblx0ICAgIC8vIHNldCBuZXcga2V5IHZhbHVlXG5cdCAgICBjdXJyW3ZtLm5ld0tleV0gPSAodm0uaW5zZXJ0TmV3T2JqZWN0W2Zvcm0ubGFuZ10pID8ge30gOiBmb3JtLm5ld1ZhbHVlO1xuXHQgICAgLy8gdXBkYXRlIGpzb24gaW4gcHJldmlld1xuXHQgICAgZm9ybS52YWx1ZSA9IGN1cnI7XG5cdCAgICBjdXJyID0gbnVsbDtcblxuXHQgICAgLy8gY2hlY2sgb3RoZXIgbGFuZ3VhZ2VzIGZvciBrZXkgYW5kIGZpbGwgd2l0aCB2YWx1ZSBpZiBub3QgZXhpc3RzXG5cdCAgICBfLmVhY2goXy53aXRob3V0KHZtLmxhbmd1YWdlcywgZm9ybS5sYW5nKSwgZnVuY3Rpb24gKGxhbmd1YWdlKSB7XG5cdCAgICAgIGN1cnIgPSB0cmF2ZXJzZU9iamVjdCh2bS50cmFuc2xhdGlvbnNbbGFuZ3VhZ2VdLCBmb3JtLnBhdGgpO1xuXHQgICAgICBpZiAoIV8uaGFzKGN1cnIsIHZtLm5ld0tleSkpIHtcblx0ICAgICAgICBjdXJyW3ZtLm5ld0tleV0gPSAodm0uaW5zZXJ0TmV3T2JqZWN0W2Zvcm0ubGFuZ10pID8ge30gOiBmb3JtLm5ld1ZhbHVlO1xuXHQgICAgICAgIF8ubWFwKHZtLmJpbmRpbmdzW2xhbmd1YWdlXS5mb3JtcywgZnVuY3Rpb24gKGZvcm0pIHtcblx0ICAgICAgICAgIC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcblx0ICAgICAgICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgLy8gY2xlYXIgaW5wdXRzXG5cdCAgICBkZWxldGUgdm0ubmV3S2V5O1xuXHQgICAgZGVsZXRlIGZvcm0ubmV3VmFsdWU7XG5cblx0ICAgIC8vIHN5bmMgY2hhbmdlZCBqc29uIGJhY2sgdG8geG1sIG1vZGVsXG5cdCAgICBzeW5jSnNvblRvWE1MKCk7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogZGVsZXRlT2JqZWN0QnlLZXlcblx0ICAgKiBAZGVzY3JpcHRpb24gRGVsZXRlcyBhIHZhbHVlIGdpdmVuIGEga2V5IGluIGEgZmxhdCBqc29uIG9iamVjdFxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGRlbGV0ZU9iamVjdEJ5S2V5KGlucHV0Rm9ybSwga2V5KSB7XG5cdCAgICBfLmVhY2godm0ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAobGFuZ3VhZ2UpIHtcblx0ICAgIFx0dmFyIGN1cnI7XG5cdCAgICBcdGlmICgha2V5KSB7XG5cdFx0XHRcdFx0Y3VyciA9IHRyYXZlcnNlT2JqZWN0KHZtLnRyYW5zbGF0aW9uc1tsYW5ndWFnZV0sIGlucHV0Rm9ybS5wYXRoLnNsaWNlKDAsIC0xKSk7XG5cdFx0ICAgICAgLy8gc2V0IG5ldyBrZXkgdmFsdWVcblx0XHQgICAgICBkZWxldGUgY3VycltfLmxhc3QoaW5wdXRGb3JtLnBhdGgpXTtcblx0ICAgIFx0fSBlbHNlIHtcblx0XHQgICAgXHRjdXJyID0gdHJhdmVyc2VPYmplY3Qodm0udHJhbnNsYXRpb25zW2xhbmd1YWdlXSwgaW5wdXRGb3JtLnBhdGgpO1xuXHRcdCAgICAgIC8vIHNldCBuZXcga2V5IHZhbHVlXG5cdFx0ICAgICAgZGVsZXRlIGN1cnJba2V5XTtcblx0ICAgIFx0fVxuXG5cdCAgICBcdF8ubWFwKHZtLmJpbmRpbmdzW2xhbmd1YWdlXS5mb3JtcywgZnVuY3Rpb24gKGZvcm0pIHtcblx0ICAgICAgXHRpZiAoZm9ybS5sYWJlbCA9PSBpbnB1dEZvcm0ubGFiZWwpIHtcblx0XHQgICAgICBcdC8vIHVwZGF0ZSBqc29uIGluIHByZXZpZXdcblx0XHQgICAgICAgIGZvcm0udmFsdWUgPSBjdXJyO1xuXHQgICAgICBcdH1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblxuXHQgICAgaWYgKCFrZXkpIHsgLy8gaWYgbm8ga2V5IGdpdmVuLCByZW1vdmluZyBlbXB0eSBvYmplY3QgYW5kIHJlc2V0XG5cdCAgICBcdGRlbGV0ZSB2bS5zZWFyY2g7XG5cdCAgICBcdGluaXQoKTtcblx0ICAgIH1cblxuXHQgICAgLy8gc3luYyBjaGFuZ2VkIGpzb24gYmFjayB0byB4bWwgbW9kZWxcblx0ICAgIHN5bmNKc29uVG9YTUwoKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiB1cGRhdGVUcmFuc2xhdGlvbnMoZm9ybSkge1xuXHQgICAgZm9ybS5lbGVtZW50LmlubmVySFRNTCA9IGZvcm0udmFsdWU7XG5cdCAgICB2YXIgdXBkYXRlZEpTT04gPSBEZWZpYW50Lm5vZGUudG9KU09OKHZtLnhtbERlZmluaXRpb25zW2Zvcm0ubGFuZ10pO1xuXHQgICAgYW5ndWxhci5jb3B5KHVwZGF0ZWRKU09OLCB2bS50cmFuc2xhdGlvbnNbZm9ybS5sYW5nXSk7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogZmluZEJ5S2V5XG5cdCAgICogQGRlc2NyaXB0aW9uIE1haW4gcXVlcnkgZnVuY3Rpb24gZm9yIGV2YWx1YXRpbmcgeFBhdGggcXVlcmllcyBhZ2FpbnN0XG5cdCAgICogICAgICAgICAgICAgIEpTT04gdHJhbnNsYXRpb24gb2JqZWN0cy5cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBmaW5kQnlLZXkocXVlcnkpIHtcblx0ICAgIGRlbGV0ZSB2bS5uZXdLZXk7XG5cdCAgICBpZiAoIXF1ZXJ5KSB7XG5cdCAgICAgIHZtLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgIGNsZWFyQmluZGluZ3MoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcXVlcnkgPSBhbmd1bGFyLnVwcGVyY2FzZShxdWVyeSk7XG5cdCAgICAgICAgXy5lYWNoKHZtLmxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmcpIHtcblx0ICAgICAgICAgIHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zID0gW107XG5cdCAgICAgICAgICB2YXIgbm9kZXMgPSBEZWZpYW50Lm5vZGUuc2VsZWN0Tm9kZXModm0ueG1sRGVmaW5pdGlvbnNbbGFuZ10sIHF1ZXJ5KTtcblx0ICAgICAgICAgIF8uZWFjaChub2RlcywgZnVuY3Rpb24gKG5vZGUsIGlkeCkge1xuXHQgICAgICAgICAgICB2YXIgbm9kZVZhbCA9IERlZmlhbnQubm9kZS50b0pTT04obm9kZSk7XG5cdCAgICAgICAgICAgIHZhciBwYXRoID0gZ2V0UGF0aFRvTm9kZShub2RlKS5zbGljZSgxKTtcblx0ICAgICAgICAgICAgdmFyIGZvcm0gPSB7XG5cdCAgICAgICAgICAgICAgbGFuZzogbGFuZyxcblx0ICAgICAgICAgICAgICBsYWJlbDogcGF0aC5qb2luKFwiLlwiKSxcblx0ICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICAgICAgICAgIGhhc0lucHV0OiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnKSxcblx0ICAgICAgICAgICAgICBpc0ZsYXQ6IF8uYWxsKG5vZGVWYWwsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaXNGbGF0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICB9KSxcblx0ICAgICAgICAgICAgICB2YWx1ZTogbm9kZVZhbCxcblx0ICAgICAgICAgICAgICBlbGVtZW50OiBub2RlXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIC8vIG9ubHkgYWxsb3cgbm9uIGFycmF5L29iamVjdHMgdG8gYmUgZWRpdGFibGVcblx0ICAgICAgICAgICAgZm9ybS5oYXNJbnB1dCA9ICh0eXBlb2Ygbm9kZVZhbCAhPSAnb2JqZWN0Jyk7XG5cdCAgICAgICAgICAgIHZtLmJpbmRpbmdzW2xhbmddLmZvcm1zLnB1c2goZm9ybSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHZtLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gY2F0Y2goZXJyKSB7IC8vIHF1ZXJ5IGludmFsaWQsIHNvIGNsZWFyIGJpbmRpbmdzXG5cdCAgICAgICAgdm0uaGFzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgIGNsZWFyQmluZGluZ3MoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblxuXHQgIC8qKlxuXHQgICAqIGNhbGxiYWNrVXBkYXRlXG5cdCAgICogQGRlc2NyaXB0aW9uIEludm9rZXMgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdXBkYXRlIHNwZWNpZmljIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGNhbGxiYWNrVXBkYXRlKGxhbmd1YWdlLCBldmVudCkge1xuXHQgIFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHQgIFx0cmV0dXJuIHZtLm9uVXBkYXRlKGxhbmd1YWdlKTtcblx0ICB9XG5cblx0ICAvKipcblx0ICAgKiBjYWxsYmFja1JlbW92ZVxuXHQgICAqIEBkZXNjcmlwdGlvbiBJbnZva2VzIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlbW92ZSBzcGVjaWZpYyBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBjYWxsYmFja1JlbW92ZShsYW5ndWFnZSwgZXZlbnQpIHtcblx0ICBcdGlmIChldmVudCkge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0ICBcdHJldHVybiB2bS5vblJlbW92ZShsYW5ndWFnZSk7XG5cdCAgfVxuXHR9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

angular.module("angular-translate-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("translate-editor.tpl.html","<div><div class=\"form-group\" ng-class=\"{ \'has-error\': locale.hasError }\"><div class=\"input-group\"><input type=\"text\" class=\"form-control\" ng-model=\"locale.search\" ng-change=\"locale.findByKey(locale.search)\" ng-model-options=\"{ debounce: 500 }\" placeholder=\"Enter xPath Query Here\"><div class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-default\" ng-click=\"locale.addFavourite(locale.search)\"><span class=\"glyphicon\" ng-class=\"{\n						\'glyphicon-star\': !locale.isFavourited(locale.search),\n						\'glyphicon-star-empty\': locale.isFavourited(locale.search)\n					}\"></span></button></div></div><small ng-if=\"locale.hasError\" class=\"pull-right text-danger\">Invalid Query!</small></div><button type=\"button\" class=\"btn btn-default btn-sm\" ng-repeat=\"query in locale.queries\" ng-click=\"locale.findByKey(query.search); locale.search = query.search;\">{{query.label}}</button><div class=\"checkbox pull-right\"><label><input type=\"checkbox\" ng-model=\"locale.isAllCollapsed\" ng-change=\"locale.collapseAll()\"> Expand All</label></div><hr><accordion ng-if=\"!locale.hasError\" close-others=\"false\"><accordion-group ng-repeat=\"language in locale.languages track by language\" is-open=\"locale.tabs[language].$isOpen\"><accordion-heading>{{language | uppercase}} Dictionary <i class=\"glyphicon\" ng-class=\"{\'glyphicon-chevron-down\': locale.tabs[language].$isOpen, \'glyphicon-chevron-right\': !locale.tabs[language].$isOpen}\"></i><div class=\"pull-right\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-info btn-xs\" ng-if=\"locale.hasUpdateFn\" ng-click=\"locale.callbackUpdate(language, $event)\">Update</button> <button type=\"button\" tabindex=\"-1\" class=\"btn btn-danger btn-xs\" ng-if=\"locale.hasRemoveFn\" ng-click=\"locale.callbackRemove(language, $event)\">Remove</button></div></accordion-heading><div class=\"form-group\" ng-repeat=\"form in locale.bindings[language].forms\"><div ng-if=\"form.hasInput\"><label>{{form.label}}:</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"form.value\" ng-change=\"locale.updateTranslations(form)\" ng-model-options=\"{ debounce: 500 }\"></div><div ng-if=\"!form.hasInput\"><div ng-if=\"locale.isEmpty(form.value)\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm pull-right\" ng-click=\"locale.deleteObjectByKey(form)\">Remove Empty Object</button></div><div class=\"panel panel-default\"><div class=\"panel-body\"><div ng-if=\"form.isFlat\"><div class=\"form-group\" ng-repeat=\"(key, value) in form.value\"><label>{{form.label}}.{{key}}</label><div ng-if=\"locale.isString(value)\" class=\"input-group\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"value\" ng-change=\"locale.updateObject(locale.translations[language], form, key, value)\" ng-model-options=\"{ debounce: 500 }\"><pre ng-if=\"!locale.isString(value)\">{{value | json}}</pre><span class=\"input-group-btn\"><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></span></div><div ng-if=\"!locale.isString(value)\"><pre>{{value | json}}</pre><button type=\"button\" tabindex=\"-1\" class=\"btn btn-warning btn-sm\" ng-click=\"locale.deleteObjectByKey(form, key)\">Delete</button></div></div></div><pre ng-if=\"!form.isFlat\">{{form.value | json}}</pre></div><div class=\"panel-footer\"><div class=\"row\"><div class=\"col-md-4\"><label>{{form.label}}.{{locale.newKey}}</label><input type=\"text\" class=\"form-control input-sm\" ng-model=\"locale.newKey\" placeholder=\"TRANSLATION_KEY\"></div><div class=\"col-md-8\"><label>Translated Value</label><div class=\"input-group\"><input type=\"text\" ng-if=\"!locale.insertNewObject[language]\" class=\"form-control input-sm\" ng-model=\"form.newValue\" placeholder=\"Translated Value\"> <span class=\"input-group-btn\"><button type=\"button\" class=\"btn btn-primary btn-sm\" ng-disabled=\"(locale.insertNewObject[language] && !locale.newKey) || (!locale.insertNewObject[language] && !form.newValue || !locale.newKey)\" ng-click=\"locale.writeObjectByKey(locale.translations[language], form)\">Insert</button></span></div></div></div><div class=\"row\"><div class=\"col-md-12\"><div class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.insertNewObject[language]\"> Insert As New Object</label></div></div></div></div></div></div></div><div ng-if=\"locale.search\" class=\"checkbox\"><label><input type=\"checkbox\" ng-model=\"locale.showAll[language]\"> Show Full Translation</label></div><pre ng-if=\"!locale.search || locale.showAll[language]\">{{locale.translations[language] | json}}</pre></accordion-group></accordion></div>");}]);